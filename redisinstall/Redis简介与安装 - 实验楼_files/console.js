/*
 * Copyright (C) 2013 Glyptodon LLC
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

/*
 * Copyright (C) 2014 Glyptodon LLC
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

/**
 * mOxie - multi-runtime File API & XMLHttpRequest L2 Polyfill
 * v1.2.1
 *
 * Copyright 2013, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2014-05-14
 */

/**
 * Plupload - multi-runtime File Uploader
 * v2.1.2
 *
 * Copyright 2013, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2014-05-14
 */

/*
 * $Id: base64.js,v 2.15 2014/04/05 12:58:57 dankogai Exp dankogai $
 *
 *  Licensed under the MIT license.
 *    http://opensource.org/licenses/mit-license
 *
 *  References:
 *    http://en.wikipedia.org/wiki/jsBase64
 */

// AWS SDK for JavaScript v2.1.24
// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// License at https://sdk.amazonaws.com/js/BUNDLE_LICENSE.txt

function QiniuJsSDK(){this.detectIEVersion=function(){var e=4,t=document.createElement("div"),n=t.getElementsByTagName("i");while(t.innerHTML="<!--[if gt IE "+e+"]><i></i><![endif]-->",n[0])e++;return e>4?e:!1},this.isImage=function(e){var t,n="",r=["png","jpg","jpeg","gif","bmp"],i=/\.([a-zA-Z0-9]+)(\?|\@|$)/;if(!e||!i.test(e))return!1;t=i.exec(e),n=t[1].toLowerCase();for(var s=0,o=r.length;s<o;s++)if(n===r[s])return!0;return!1},this.getFileExtension=function(e){var t=e.split("."),n;return t.length===1||t[0]===""&&t.length===2?n="":n=t.pop().toLowerCase(),n},this.utf8_encode=function(e){if(e===null||typeof e=="undefined")return"";var t=e+"",n="",r,i,s=0;r=i=0,s=t.length;for(var o=0;o<s;o++){var u=t.charCodeAt(o),a=null;if(u<128)i++;else if(u>127&&u<2048)a=String.fromCharCode(u>>6|192,u&63|128);else if(u&63488^!0)a=String.fromCharCode(u>>12|224,u>>6&63|128,u&63|128);else{if(u&64512^!0)throw new RangeError("Unmatched trail surrogate at "+o);var f=t.charCodeAt(++o);if(f&64512^!0)throw new RangeError("Unmatched lead surrogate at "+(o-1));u=((u&1023)<<10)+(f&1023)+65536,a=String.fromCharCode(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}a!==null&&(i>r&&(n+=t.slice(r,i)),n+=a,r=i=o+1)}return i>r&&(n+=t.slice(r,s)),n},this.base64_encode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n,r,i,s,o,u,a,f,l=0,c=0,h="",p=[];if(!e)return e;e=this.utf8_encode(e+"");do n=e.charCodeAt(l++),r=e.charCodeAt(l++),i=e.charCodeAt(l++),f=n<<16|r<<8|i,s=f>>18&63,o=f>>12&63,u=f>>6&63,a=f&63,p[c++]=t.charAt(s)+t.charAt(o)+t.charAt(u)+t.charAt(a);while(l<e.length);h=p.join("");switch(e.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"="}return h},this.URLSafeBase64Encode=function(e){return e=this.base64_encode(e),e.replace(/\//g,"_").replace(/\+/g,"-")},this.createAjax=function(e){var t={};return window.XMLHttpRequest?t=new XMLHttpRequest:t=new ActiveXObject("Microsoft.XMLHTTP"),t},this.parseJSON=function(e){if(window.JSON&&window.JSON.parse)return window.JSON.parse(e);if(e===null)return e;if(typeof e=="string"){e=this.trim(e);if(e&&/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,"@").replace(/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return function(){return e}()}},this.trim=function(e){return e===null?"":this.trim.call(e)};var e=this;this.uploader=function(t){if(!t.domain)throw"uptoken_url or domain is required!";if(!t.browse_button)throw"browse_button is required!";var n={},r=t.init&&t.init.Error,i=t.init&&t.init.FileUploaded;t.init.Error=function(){},t.init.FileUploaded=function(){},e.uptoken_url=t.uptoken_url,e.token="",e.key_handler=typeof t.init.Key=="function"?t.init.Key:"",this.domain=t.domain;var s="",o=function(){var n=e.detectIEVersion(),r,i,s,o=mOxie.Env.browser==="Safari"&&mOxie.Env.version<=5&&mOxie.Env.os==="Windows"&&mOxie.Env.osVersion==="7"||mOxie.Env.browser==="Safari"&&mOxie.Env.os==="iOS"&&mOxie.Env.osVersion==="7";n&&n<=9&&t.chunk_size&&t.runtimes.indexOf("flash")>=0?t.chunk_size=0:o?t.chunk_size=0:(r=20,i=4<<r,s=plupload.parseSize(t.chunk_size),s>i&&(t.chunk_size=i))};o();var u=function(){if(!t.uptoken){var n=e.createAjax();n.open("GET",e.uptoken_url,!0),n.setRequestHeader("If-Modified-Since","0"),n.onreadystatechange=function(){if(n.readyState===4&&n.status===200){var t=e.parseJSON(n.responseText);e.token=t.uptoken}},n.send()}else e.token=t.uptoken},a=function(n,r,i){var s="",o=!1;if(!t.save_key){o=n.getOption&&n.getOption("unique_names"),o=o||n.settings&&n.settings.unique_names;if(o){var u=e.getFileExtension(r.name);s=u?r.id+"."+u:r.id}else typeof i=="function"?s=i(n,r):s=r.name}return s};plupload.extend(n,t,{url:"https://up.qbox.me",multipart_params:{token:""}});var f=new plupload.Uploader(n);return f.bind("Init",function(e,t){u()}),f.init(),f.bind("FilesAdded",function(e,t){var n=e.getOption&&e.getOption("auto_start");n=n||e.settings&&e.settings.auto_start,n&&plupload.each(t,function(t,n){e.start()}),e.refresh()}),f.bind("BeforeUpload",function(n,r){$.ajax({method:"post",url:t.custom_uptoken_url,data:t.custom_uptoken_data,async:!1}).done(function(t){t.status=="success"&&(e.token=t.token)}),s="";var i=function(n,r,i){var s;t.save_key?s={token:e.token}:s={key:a(n,r,i),token:e.token};var o=t.x_vars;if(o!==undefined&&typeof o=="object")for(var u in o)o.hasOwnProperty(u)&&(typeof o[u]=="function"?s["x:"+u]=o[u](n,r):typeof o[u]!="object"&&(s["x:"+u]=o[u]));n.setOption({url:"https://up.qbox.me/",multipart:!0,chunk_size:undefined,multipart_params:s})},o=n.getOption&&n.getOption("chunk_size");o=o||n.settings&&n.settings.chunk_size;if(f.runtime==="html5"&&o)if(r.size<o)i(n,r,e.key_handler);else{var u=localStorage.getItem(r.name),l=o;if(u){u=JSON.parse(u);var c=(new Date).getTime(),h=u.time||0,p=864e5;c-h<p?u.percent!==100?r.size===u.total?(r.percent=u.percent,r.loaded=u.offset,s=u.ctx,u.offset+l>r.size&&(l=r.size-u.offset)):localStorage.removeItem(r.name):localStorage.removeItem(r.name):localStorage.removeItem(r.name)}n.setOption({url:"https://up.qbox.me/mkblk/"+l,multipart:!1,chunk_size:o,required_features:"chunks",headers:{Authorization:"UpToken "+e.token},multipart_params:{}})}else i(n,r,e.key_handler)}),f.bind("ChunkUploaded",function(t,n,r){var i=e.parseJSON(r.response);s=s?s+","+i.ctx:i.ctx;var o=r.total-r.offset,u=t.getOption&&t.getOption("chunk_size");u=u||t.settings&&t.settings.chunk_size,o<u&&t.setOption({url:"https://up.qbox.me/mkblk/"+o}),localStorage.setItem(n.name,JSON.stringify({ctx:s,percent:n.percent,total:r.total,offset:r.offset,time:(new Date).getTime()}))}),f.bind("Error",function(t){return function(n,r){var i="",s=r.file;if(s){switch(r.code){case plupload.FAILED:i="上传失败。请稍后再试。";break;case plupload.FILE_SIZE_ERROR:var o=n.getOption&&n.getOption("max_file_size");o=o||n.settings&&n.settings.max_file_size,i="浏览器最大可上传"+o+"。更大文件请使用命令行工具。";break;case plupload.FILE_EXTENSION_ERROR:i="文件验证失败。请稍后重试。";break;case plupload.HTTP_ERROR:var u=e.parseJSON(r.response),a=u.error;switch(r.status){case 400:i="请求报文格式错误。";break;case 401:i="客户端认证授权失败。请重试或提交反馈。";break;case 405:i="客户端请求错误。请重试或提交反馈。";break;case 579:i="资源上传成功，但回调失败。";break;case 599:i="网络连接异常。请重试或提交反馈。";break;case 614:i="文件已存在。";try{u=e.parseJSON(u.error),a=u.error||"file exists"}catch(l){a=u.error||"file exists"}break;case 631:i="指定空间不存在。";break;case 701:i="上传数据块校验出错。请重试或提交反馈。";break;default:i="未知错误。"}i=i+"("+r.status+"："+a+")";break;case plupload.SECURITY_ERROR:i="安全配置错误。请联系网站管理员。";break;case plupload.GENERIC_ERROR:i="上传失败。请稍后再试。";break;case plupload.IO_ERROR:i="上传失败。请稍后再试。";break;case plupload.INIT_ERROR:i="网站配置错误。请联系网站管理员。",f.destroy();break;default:i=r.message+r.details}t&&t(n,r,i)}n.refresh()}}(r)),f.bind("FileUploaded",function(n){return function(r,i,o){var u=function(r,i,s){if(t.downtoken_url){var o=e.createAjax();o.open("POST",t.downtoken_url,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){if(o.readyState===4)if(o.status===200){var t;try{t=e.parseJSON(o.responseText)}catch(u){throw"invalid json format"}var a={};plupload.extend(a,e.parseJSON(s),t),n&&n(r,i,JSON.stringify(a))}else f.trigger("Error",{status:o.status,response:o.responseText,file:i,code:plupload.HTTP_ERROR})},o.send("key="+e.parseJSON(s).key+"&domain="+t.domain)}else n&&n(r,i,s)},l=e.parseJSON(o.response);s=s?s:l.ctx;if(s){var c="";t.save_key||(c=a(r,i,e.key_handler),c=c?"/key/"+e.URLSafeBase64Encode(c):"");var h=t.x_vars,p="",d="";if(h!==undefined&&typeof h=="object")for(var v in h)h.hasOwnProperty(v)&&(typeof h[v]=="function"?p=e.URLSafeBase64Encode(h[v](r,i)):typeof h[v]!="object"&&(p=e.URLSafeBase64Encode(h[v])),d+="/x:"+v+"/"+p);var m="https://up.qbox.me/mkfile/"+i.size+c+d,g=e.createAjax();g.open("POST",m,!0),g.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),g.setRequestHeader("Authorization","UpToken "+e.token),g.onreadystatechange=function(){if(g.readyState===4){localStorage.removeItem(i.name);if(g.status===200){var e=g.responseText;u(r,i,e)}else f.trigger("Error",{status:g.status,response:g.responseText,file:i,code:-200})}},g.send(s)}else u(r,i,o.response)}}(i)),f},this.getUrl=function(e){if(!e)return!1;e=encodeURI(e);var t=this.domain;return t.slice(t.length-1)!=="/"&&(t+="/"),t+e},this.imageView2=function(e,t){var n=e.mode||"",r=e.w||"",i=e.h||"",s=e.quality||"",o=e.format||"";if(!n)return!1;if(!r&&!i)return!1;var u="imageView2/"+n;return u+=r?"/w/"+r:"",u+=i?"/h/"+i:"",u+=s?"/q/"+s:"",u+=o?"/format/"+o:"",t&&(u=this.getUrl(t)+"?"+u),u},this.imageMogr2=function(e,t){var n=e["auto-orient"]||"",r=e.thumbnail||"",i=e.strip||"",s=e.gravity||"",o=e.crop||"",u=e.quality||"",a=e.rotate||"",f=e.format||"",l=e.blur||"",c="imageMogr2";return c+=n?"/auto-orient":"",c+=r?"/thumbnail/"+r:"",c+=i?"/strip":"",c+=s?"/gravity/"+s:"",c+=u?"/quality/"+u:"",c+=o?"/crop/"+o:"",c+=a?"/rotate/"+a:"",c+=f?"/format/"+f:"",c+=l?"/blur/"+l:"",t&&(c=this.getUrl(t)+"?"+c),c},this.watermark=function(e,t){var n=e.mode;if(!n)return!1;var r="watermark/"+n;if(n===1){var i=e.image||"";if(!i)return!1;r+=i?"/image/"+this.URLSafeBase64Encode(i):""}else{if(n!==2)return!1;var s=e.text?e.text:"",o=e.font?e.font:"",u=e.fontsize?e.fontsize:"",a=e.fill?e.fill:"";if(!s)return!1;r+=s?"/text/"+this.URLSafeBase64Encode(s):"",r+=o?"/font/"+this.URLSafeBase64Encode(o):"",r+=u?"/fontsize/"+u:"",r+=a?"/fill/"+this.URLSafeBase64Encode(a):""}var f=e.dissolve||"",l=e.gravity||"",c=e.dx||"",h=e.dy||"";return r+=f?"/dissolve/"+f:"",r+=l?"/gravity/"+l:"",r+=c?"/dx/"+c:"",r+=h?"/dy/"+h:"",t&&(r=this.getUrl(t)+"?"+r),r},this.imageInfo=function(e){if(!e)return!1;var t=this.getUrl(e)+"?imageInfo",n=this.createAjax(),r,i=this;return n.open("GET",t,!1),n.onreadystatechange=function(){n.readyState===4&&n.status===200&&(r=i.parseJSON(n.responseText))},n.send(),r},this.exif=function(e){if(!e)return!1;var t=this.getUrl(e)+"?exif",n=this.createAjax(),r,i=this;return n.open("GET",t,!1),n.onreadystatechange=function(){n.readyState===4&&n.status===200&&(r=i.parseJSON(n.responseText))},n.send(),r},this.get=function(e,t){return!t||!e?!1:e==="exif"?this.exif(t):e==="imageInfo"?this.imageInfo(t):!1},this.pipeline=function(e,t){var n=Object.prototype.toString.call(e)==="[object Array]",r,i,s="";if(n){for(var o=0,u=e.length;o<u;o++){r=e[o];if(!r.fop)return!1;switch(r.fop){case"watermark":s+=this.watermark(r)+"|";break;case"imageView2":s+=this.imageView2(r)+"|";break;case"imageMogr2":s+=this.imageMogr2(r)+"|";break;default:i=!0}if(i)return!1}if(t){s=this.getUrl(t)+"?"+s;var a=s.length;s.slice(a-1)==="|"&&(s=s.slice(0,a-1))}return s}return!1}}function hex_md5(e){return binl2hex(core_md5(str2binl(e),e.length*chrsz))}function b64_md5(e){return binl2b64(core_md5(str2binl(e),e.length*chrsz))}function str_md5(e){return binl2str(core_md5(str2binl(e),e.length*chrsz))}function hex_hmac_md5(e,t){return binl2hex(core_hmac_md5(e,t))}function b64_hmac_md5(e,t){return binl2b64(core_hmac_md5(e,t))}function str_hmac_md5(e,t){return binl2str(core_hmac_md5(e,t))}function md5_vm_test(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"}function core_md5(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(var o=0;o<e.length;o+=16){var u=n,a=r,f=i,l=s;n=md5_ff(n,r,i,s,e[o+0],7,-680876936),s=md5_ff(s,n,r,i,e[o+1],12,-389564586),i=md5_ff(i,s,n,r,e[o+2],17,606105819),r=md5_ff(r,i,s,n,e[o+3],22,-1044525330),n=md5_ff(n,r,i,s,e[o+4],7,-176418897),s=md5_ff(s,n,r,i,e[o+5],12,1200080426),i=md5_ff(i,s,n,r,e[o+6],17,-1473231341),r=md5_ff(r,i,s,n,e[o+7],22,-45705983),n=md5_ff(n,r,i,s,e[o+8],7,1770035416),s=md5_ff(s,n,r,i,e[o+9],12,-1958414417),i=md5_ff(i,s,n,r,e[o+10],17,-42063),r=md5_ff(r,i,s,n,e[o+11],22,-1990404162),n=md5_ff(n,r,i,s,e[o+12],7,1804603682),s=md5_ff(s,n,r,i,e[o+13],12,-40341101),i=md5_ff(i,s,n,r,e[o+14],17,-1502002290),r=md5_ff(r,i,s,n,e[o+15],22,1236535329),n=md5_gg(n,r,i,s,e[o+1],5,-165796510),s=md5_gg(s,n,r,i,e[o+6],9,-1069501632),i=md5_gg(i,s,n,r,e[o+11],14,643717713),r=md5_gg(r,i,s,n,e[o+0],20,-373897302),n=md5_gg(n,r,i,s,e[o+5],5,-701558691),s=md5_gg(s,n,r,i,e[o+10],9,38016083),i=md5_gg(i,s,n,r,e[o+15],14,-660478335),r=md5_gg(r,i,s,n,e[o+4],20,-405537848),n=md5_gg(n,r,i,s,e[o+9],5,568446438),s=md5_gg(s,n,r,i,e[o+14],9,-1019803690),i=md5_gg(i,s,n,r,e[o+3],14,-187363961),r=md5_gg(r,i,s,n,e[o+8],20,1163531501),n=md5_gg(n,r,i,s,e[o+13],5,-1444681467),s=md5_gg(s,n,r,i,e[o+2],9,-51403784),i=md5_gg(i,s,n,r,e[o+7],14,1735328473),r=md5_gg(r,i,s,n,e[o+12],20,-1926607734),n=md5_hh(n,r,i,s,e[o+5],4,-378558),s=md5_hh(s,n,r,i,e[o+8],11,-2022574463),i=md5_hh(i,s,n,r,e[o+11],16,1839030562),r=md5_hh(r,i,s,n,e[o+14],23,-35309556),n=md5_hh(n,r,i,s,e[o+1],4,-1530992060),s=md5_hh(s,n,r,i,e[o+4],11,1272893353),i=md5_hh(i,s,n,r,e[o+7],16,-155497632),r=md5_hh(r,i,s,n,e[o+10],23,-1094730640),n=md5_hh(n,r,i,s,e[o+13],4,681279174),s=md5_hh(s,n,r,i,e[o+0],11,-358537222),i=md5_hh(i,s,n,r,e[o+3],16,-722521979),r=md5_hh(r,i,s,n,e[o+6],23,76029189),n=md5_hh(n,r,i,s,e[o+9],4,-640364487),s=md5_hh(s,n,r,i,e[o+12],11,-421815835),i=md5_hh(i,s,n,r,e[o+15],16,530742520),r=md5_hh(r,i,s,n,e[o+2],23,-995338651),n=md5_ii(n,r,i,s,e[o+0],6,-198630844),s=md5_ii(s,n,r,i,e[o+7],10,1126891415),i=md5_ii(i,s,n,r,e[o+14],15,-1416354905),r=md5_ii(r,i,s,n,e[o+5],21,-57434055),n=md5_ii(n,r,i,s,e[o+12],6,1700485571),s=md5_ii(s,n,r,i,e[o+3],10,-1894986606),i=md5_ii(i,s,n,r,e[o+10],15,-1051523),r=md5_ii(r,i,s,n,e[o+1],21,-2054922799),n=md5_ii(n,r,i,s,e[o+8],6,1873313359),s=md5_ii(s,n,r,i,e[o+15],10,-30611744),i=md5_ii(i,s,n,r,e[o+6],15,-1560198380),r=md5_ii(r,i,s,n,e[o+13],21,1309151649),n=md5_ii(n,r,i,s,e[o+4],6,-145523070),s=md5_ii(s,n,r,i,e[o+11],10,-1120210379),i=md5_ii(i,s,n,r,e[o+2],15,718787259),r=md5_ii(r,i,s,n,e[o+9],21,-343485551),n=safe_add(n,u),r=safe_add(r,a),i=safe_add(i,f),s=safe_add(s,l)}return Array(n,r,i,s)}function md5_cmn(e,t,n,r,i,s){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(r,s)),i),n)}function md5_ff(e,t,n,r,i,s,o){return md5_cmn(t&n|~t&r,e,t,i,s,o)}function md5_gg(e,t,n,r,i,s,o){return md5_cmn(t&r|n&~r,e,t,i,s,o)}function md5_hh(e,t,n,r,i,s,o){return md5_cmn(t^n^r,e,t,i,s,o)}function md5_ii(e,t,n,r,i,s,o){return md5_cmn(n^(t|~r),e,t,i,s,o)}function core_hmac_md5(e,t){var n=str2binl(e);n.length>16&&(n=core_md5(n,e.length*chrsz));var r=Array(16),i=Array(16);for(var s=0;s<16;s++)r[s]=n[s]^909522486,opad[s]=n[s]^1549556828;var o=core_md5(r.concat(str2binl(t)),512+t.length*chrsz);return core_md5(opad.concat(o),640)}function safe_add(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}function bit_rol(e,t){return e<<t|e>>>32-t}function str2binl(e){var t=Array(),n=(1<<chrsz)-1;for(var r=0;r<e.length*chrsz;r+=chrsz)t[r>>5]|=(e.charCodeAt(r/chrsz)&n)<<r%32;return t}function binl2str(e){var t="",n=(1<<chrsz)-1;for(var r=0;r<e.length*32;r+=chrsz)t+=String.fromCharCode(e[r>>5]>>>r%32&n);return t}function binl2hex(e){var t=hexcase?"0123456789ABCDEF":"0123456789abcdef",n="";for(var r=0;r<e.length*4;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n}function binl2b64(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="";for(var r=0;r<e.length*4;r+=3){var i=(e[r>>2]>>8*(r%4)&255)<<16|(e[r+1>>2]>>8*((r+1)%4)&255)<<8|e[r+2>>2]>>8*((r+2)%4)&255;for(var s=0;s<4;s++)r*8+s*6>e.length*32?n+=b64pad:n+=t.charAt(i>>6*(3-s)&63)}return n}var Guacamole=Guacamole||{};Guacamole.ArrayBufferReader=function(e){var t=this;e.onblob=function(e){var n=window.atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r);for(var s=0;s<n.length;s++)i[s]=n.charCodeAt(s);t.ondata&&t.ondata(r)},e.onend=function(){t.onend&&t.onend()},this.ondata=null,this.onend=null};var Guacamole=Guacamole||{};Guacamole.ArrayBufferWriter=function(e){function n(t){var n="";for(var r=0;r<t.byteLength;r++)n+=String.fromCharCode(t[r]);e.sendBlob(window.btoa(n))}var t=this;e.onack=function(e){t.onack&&t.onack(e)},this.sendData=function(e){var t=new Uint8Array(e);if(t.length<=8064)n(t);else for(var r=0;r<t.length;r+=8064)n(t.subarray(r,r+8094))},this.sendEnd=function(){e.sendEnd()},this.onack=null};var Guacamole=Guacamole||{};Guacamole.AudioChannel=function(){var e=this,t=0;this.play=function(e,n,r){var i=new Guacamole.AudioChannel.Packet(e,r),s=Guacamole.AudioChannel.getTimestamp();t<s&&(t=s),i.play(t),t+=n}},window.webkitAudioContext&&(Guacamole.AudioChannel.context=new webkitAudioContext),Guacamole.AudioChannel.getTimestamp=function(){if(Guacamole.AudioChannel.context)return Guacamole.AudioChannel.context.currentTime*1e3;if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return(new Date).getTime()},Guacamole.AudioChannel.Packet=function(e,t){this.play=function(e){};if(Guacamole.AudioChannel.context){var n=null,r=function(e){n=e},i=new FileReader;i.onload=function(){Guacamole.AudioChannel.context.decodeAudioData(i.result,function(e){r(e)})},i.readAsArrayBuffer(t);var s=Guacamole.AudioChannel.context.createBufferSource();s.connect(Guacamole.AudioChannel.context.destination),s.start||(s.start=s.noteOn);var o;function u(e){s.buffer=e,s.start(o/1e3)}this.play=function(e){o=e,n?u(n):r=u}}else{var a=!1,f=null;try{f=new Audio}catch(l){}if(f){var i=new FileReader;i.onload=function(){var t="",n=new Uint8Array(i.result);for(var r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);f.src="data:"+e+";base64,"+window.btoa(t),a&&f.play()},i.readAsArrayBuffer(t);function c(){f.src?f.play():a=!0}this.play=function(e){var t=Guacamole.AudioChannel.getTimestamp(),n=e-t;n<0?c():window.setTimeout(c,n)}}}};var Guacamole=Guacamole||{};Guacamole.BlobReader=function(e,t){var n=this,r=0,i;window.BlobBuilder?i=new BlobBuilder:window.WebKitBlobBuilder?i=new WebKitBlobBuilder:window.MozBlobBuilder?i=new MozBlobBuilder:i=new function(){var e=[];this.append=function(n){e.push(new Blob([n],{type:t}))},this.getBlob=function(){return new Blob(e,{type:t})}},e.onblob=function(t){var s=window.atob(t),o=new ArrayBuffer(s.length),u=new Uint8Array(o);for(var a=0;a<s.length;a++)u[a]=s.charCodeAt(a);i.append(o),r+=o.byteLength,n.onprogress&&n.onprogress(o.byteLength),e.sendAck("OK",0)},e.onend=function(){n.onend&&n.onend()},this.getLength=function(){return r},this.getBlob=function(){return i.getBlob()},this.onprogress=null,this.onend=null};var Guacamole=Guacamole||{};Guacamole.Client=function(e){function w(e){e!=a&&(a=e,t.onstatechange&&t.onstatechange(a))}function E(){return a==s||a==i}function S(e){var t=d[e];return t||(e===0?t=p.getDefaultLayer():e>0?t=p.createLayer():t=p.createBuffer(),d[e]=t),t}function x(t){var n=v[t];return n==null&&(n=v[t]=new Guacamole.Parser,n.oninstruction=e.oninstruction),n}function T(e){var t=m[e];return t==null&&(t=m[e]=new Guacamole.AudioChannel),t}var t=this,n=0,r=1,i=2,s=3,o=4,u=5,a=n,f=0,l=null,c={0:"butt",1:"round",2:"square"},h={0:"bevel",1:"miter",2:"round"},p=new Guacamole.Display,d={},v=[],m=[],g=[],y=new Guacamole.IntegerPool,b=[];this.getDisplay=function(){return p},this.sendSize=function(t,n){if(!E())return;e.sendMessage("size",t,n)},this.sendKeyEvent=function(t,n){if(!E())return;e.sendMessage("key",n,t)},this.sendMouseState=function(t){if(!E())return;p.moveCursor(Math.floor(t.x),Math.floor(t.y));var n=0;t.left&&(n|=1),t.middle&&(n|=2),t.right&&(n|=4),t.up&&(n|=8),t.down&&(n|=16),e.sendMessage("mouse",Math.floor(t.x),Math.floor(t.y),n)},this.setClipboard=function(e){if(!E())return;var n=t.createClipboardStream("text/plain"),r=new Guacamole.StringWriter(n);for(var i=0;i<e.length;i+=4096)r.sendText(e.substring(i,i+4096));r.sendEnd()},this.createFileStream=function(n,r){var i=y.next();e.sendMessage("file",i,n,r);var s=b[i]=new Guacamole.OutputStream(t,i),o=s.sendEnd;return s.sendEnd=function(){o(),y.free(i),delete b[i]},s},this.createPipeStream=function(n,r){var i=y.next();e.sendMessage("pipe",i,n,r);var s=b[i]=new Guacamole.OutputStream(t,i),o=s.sendEnd;return s.sendEnd=function(){o(),y.free(i),delete b[i]},s},this.createClipboardStream=function(n){var r=y.next();e.sendMessage("clipboard",r,n);var i=b[r]=new Guacamole.OutputStream(t,r),s=i.sendEnd;return i.sendEnd=function(){s(),y.free(r),delete b[r]},i},this.sendAck=function(t,n,r){if(!E())return;e.sendMessage("ack",t,n,r)},this.sendBlob=function(t,n){if(!E())return;e.sendMessage("blob",t,n)},this.endStream=function(t){if(!E())return;e.sendMessage("end",t)},this.onstatechange=null,this.onname=null,this.onerror=null,this.onclipboard=null,this.onfile=null,this.onpipe=null,this.onsync=null;var N={"miter-limit":function(e,t){p.setMiterLimit(e,parseFloat(t))}},C={ack:function(e){var t=parseInt(e[0]),n=e[1],r=parseInt(e[2]),i=b[t];i&&(i.onack&&i.onack(new Guacamole.Status(r,n)),r>=256&&(y.free(t),delete b[t]))},arc:function(e){var t=S(parseInt(e[0])),n=parseInt(e[1]),r=parseInt(e[2]),i=parseInt(e[3]),s=parseFloat(e[4]),o=parseFloat(e[5]),u=parseInt(e[6]);p.arc(t,n,r,i,s,o,u!=0)},audio:function(e){var n=parseInt(e[0]),r=T(parseInt(e[1])),i=e[2],s=parseFloat(e[3]),o=g[n]=new Guacamole.InputStream(t,n),u=new Guacamole.BlobReader(o,i);u.onend=function(){r.play(i,s,u.getBlob())},t.sendAck(n,"OK",0)},blob:function(e){var t=parseInt(e[0]),n=e[1],r=g[t];r.onblob(n)},cfill:function(e){var t=parseInt(e[0]),n=S(parseInt(e[1])),r=parseInt(e[2]),i=parseInt(e[3]),s=parseInt(e[4]),o=parseInt(e[5]);p.setChannelMask(n,t),p.fillColor(n,r,i,s,o)},clip:function(e){var t=S(parseInt(e[0]));p.clip(t)},clipboard:function(e){var n=parseInt(e[0]),r=e[1];if(t.onclipboard){var i=g[n]=new Guacamole.InputStream(t,n);t.onclipboard(i,r)}else t.sendAck(n,"Clipboard unsupported",256)},close:function(e){var t=S(parseInt(e[0]));p.close(t)},copy:function(e){var t=S(parseInt(e[0])),n=parseInt(e[1]),r=parseInt(e[2]),i=parseInt(e[3]),s=parseInt(e[4]),o=parseInt(e[5]),u=S(parseInt(e[6])),a=parseInt(e[7]),f=parseInt(e[8]);p.setChannelMask(u,o),p.copy(t,n,r,i,s,u,a,f)},cstroke:function(e){var t=parseInt(e[0]),n=S(parseInt(e[1])),r=c[parseInt(e[2])],i=h[parseInt(e[3])],s=parseInt(e[4]),o=parseInt(e[5]),u=parseInt(e[6]),a=parseInt(e[7]),f=parseInt(e[8]);p.setChannelMask(n,t),p.strokeColor(n,r,i,s,o,u,a,f)},cursor:function(e){var t=parseInt(e[0]),n=parseInt(e[1]),r=S(parseInt(e[2])),i=parseInt(e[3]),s=parseInt(e[4]),o=parseInt(e[5]),u=parseInt(e[6]);p.setCursor(t,n,r,i,s,o,u)},curve:function(e){var t=S(parseInt(e[0])),n=parseInt(e[1]),r=parseInt(e[2]),i=parseInt(e[3]),s=parseInt(e[4]),o=parseInt(e[5]),u=parseInt(e[6]);p.curveTo(t,n,r,i,s,o,u)},dispose:function(e){var t=parseInt(e[0]);if(t>0){var n=S(t);n.dispose(),delete d[t]}else t<0&&delete d[t]},distort:function(e){var t=parseInt(e[0]),n=parseFloat(e[1]),r=parseFloat(e[2]),i=parseFloat(e[3]),s=parseFloat(e[4]),o=parseFloat(e[5]),u=parseFloat(e[6]);if(t>=0){var a=S(t);a.distort(n,r,i,s,o,u)}},error:function(e){var n=e[0],r=parseInt(e[1]);t.onerror&&t.onerror(new Guacamole.Status(r,n)),t.disconnect()},end:function(e){var t=parseInt(e[0]),n=g[t];n.onend&&n.onend()},file:function(e){var n=parseInt(e[0]),r=e[1],i=e[2];if(t.onfile){var s=g[n]=new Guacamole.InputStream(t,n);t.onfile(s,r,i)}else t.sendAck(n,"File transfer unsupported",256)},identity:function(e){var t=S(parseInt(e[0]));p.setTransform(t,1,0,0,1,0,0)},lfill:function(e){var t=parseInt(e[0]),n=S(parseInt(e[1])),r=S(parseInt(e[2]));p.setChannelMask(n,t),p.fillLayer(n,r)},line:function(e){var t=S(parseInt(e[0])),n=parseInt(e[1]),r=parseInt(e[2]);p.lineTo(t,n,r)},lstroke:function(e){var t=parseInt(e[0]),n=S(parseInt(e[1])),r=S(parseInt(e[2]));p.setChannelMask(n,t),p.strokeLayer(n,r)},move:function(e){var t=parseInt(e[0]),n=parseInt(e[1]),r=parseInt(e[2]),i=parseInt(e[3]),s=parseInt(e[4]);if(t>0&&n>=0){var o=S(t),u=S(n);o.move(u,r,i,s)}},name:function(e){t.onname&&t.onname(e[0])},nest:function(e){var t=x(parseInt(e[0]));t.receive(e[1])},pipe:function(e){var n=parseInt(e[0]),r=e[1],i=e[2];if(t.onpipe){var s=g[n]=new Guacamole.InputStream(t,n);t.onpipe(s,r,i)}else t.sendAck(n,"Named pipes unsupported",256)},png:function(e){var t=parseInt(e[0]),n=S(parseInt(e[1])),r=parseInt(e[2]),i=parseInt(e[3]),s=e[4];p.setChannelMask(n,t),p.draw(n,r,i,"data:image/png;base64,"+s)},pop:function(e){var t=S(parseInt(e[0]));p.pop(t)},push:function(e){var t=S(parseInt(e[0]));p.push(t)},rect:function(e){var t=S(parseInt(e[0])),n=parseInt(e[1]),r=parseInt(e[2]),i=parseInt(e[3]),s=parseInt(e[4]);p.rect(t,n,r,i,s)},reset:function(e){var t=S(parseInt(e[0]));p.reset(t)},set:function(e){var t=S(parseInt(e[0])),n=e[1],r=e[2],i=N[n];i&&i(t,r)},shade:function(e){var t=parseInt(e[0]),n=parseInt(e[1]);if(t>=0){var r=S(t);r.shade(n)}},size:function(e){var t=parseInt(e[0]),n=S(t),r=parseInt(e[1]),i=parseInt(e[2]);p.resize(n,r,i)},start:function(e){var t=S(parseInt(e[0])),n=parseInt(e[1]),r=parseInt(e[2]);p.moveTo(t,n,r)},sync:function(n){var r=parseInt(n[0]);p.flush(function(){r!==f&&(e.sendMessage("sync",r),f=r)}),a===i&&w(s),t.onsync&&t.onsync(r)},transfer:function(e){var t=S(parseInt(e[0])),n=parseInt(e[1]),r=parseInt(e[2]),i=parseInt(e[3]),s=parseInt(e[4]),o=parseInt(e[5]),u=S(parseInt(e[6])),a=parseInt(e[7]),f=parseInt(e[8]);o===3?p.put(t,n,r,i,s,u,a,f):o!==5&&p.transfer(t,n,r,i,s,u,a,f,Guacamole.Client.DefaultTransferFunction[o])},transform:function(e){var t=S(parseInt(e[0])),n=parseFloat(e[1]),r=parseFloat(e[2]),i=parseFloat(e[3]),s=parseFloat(e[4]),o=parseFloat(e[5]),u=parseFloat(e[6]);p.transform(t,n,r,i,s,o,u)},video:function(n){var r=parseInt(n[0]),i=S(parseInt(n[1])),s=n[2],o=parseFloat(n[3]),u=g[r]=new Guacamole.InputStream(t,r),a=new Guacamole.BlobReader(u,s);a.onend=function(){var e=new FileReader;e.onload=function(){var t="",n=new Uint8Array(e.result);for(var r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);i.play(s,o,"data:"+s+";base64,"+window.btoa(t))},e.readAsArrayBuffer(a.getBlob())},e.sendMessage("ack",r,"OK",0)}};e.oninstruction=function(e,t){var n=C[e];n&&n(t)},this.disconnect=function(){a!=u&&a!=o&&(w(o),l&&window.clearInterval(l),e.sendMessage("disconnect"),e.disconnect(),w(u))},this.connect=function(t){w(r);try{e.connect(t)}catch(s){throw w(n),s}l=window.setInterval(function(){e.sendMessage("sync",f)},5e3),w(i)}},Guacamole.Client.DefaultTransferFunction={0:function(e,t){t.red=t.green=t.blue=0},15:function(e,t){t.red=t.green=t.blue=255},3:function(e,t){t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha},5:function(e,t){},12:function(e,t){t.red=255&~e.red,t.green=255&~e.green,t.blue=255&~e.blue,t.alpha=e.alpha},10:function(e,t){t.red=255&~t.red,t.green=255&~t.green,t.blue=255&~t.blue},1:function(e,t){t.red=e.red&t.red,t.green=e.green&t.green,t.blue=e.blue&t.blue},14:function(e,t){t.red=255&~(e.red&t.red),t.green=255&~(e.green&t.green),t.blue=255&~(e.blue&t.blue)},7:function(e,t){t.red=e.red|t.red,t.green=e.green|t.green,t.blue=e.blue|t.blue},8:function(e,t){t.red=255&~(e.red|t.red),t.green=255&~(e.green|t.green),t.blue=255&~(e.blue|t.blue)},6:function(e,t){t.red=e.red^t.red,t.green=e.green^t.green,t.blue=e.blue^t.blue},9:function(e,t){t.red=255&~(e.red^t.red),t.green=255&~(e.green^t.green),t.blue=255&~(e.blue^t.blue)},4:function(e,t){t.red=255&(~e.red&t.red),t.green=255&(~e.green&t.green),t.blue=255&(~e.blue&t.blue)},13:function(e,t){t.red=255&(~e.red|t.red),t.green=255&(~e.green|t.green),t.blue=255&(~e.blue|t.blue)},2:function(e,t){t.red=255&(e.red&~t.red),t.green=255&(e.green&~t.green),t.blue=255&(e.blue&~t.blue)},11:function(e,t){t.red=255&(e.red|~t.red),t.green=255&(e.green|~t.green),t.blue=255&(e.blue|~t.blue)}};var Guacamole=Guacamole||{};Guacamole.Display=function(){function l(){var e=0;while(e<f.length){var t=f[e];if(!t.isReady())break;t.flush(),e++}f.splice(0,e)}function c(e,t){this.isReady=function(){for(var e=0;e<t.length;e++)if(t[e].blocked)return!1;return!0},this.flush=function(){for(var n=0;n<t.length;n++)t[n].execute();e&&e()}}function h(e,t){var n=this;this.blocked=t,this.unblock=function(){n.blocked&&(n.blocked=!1,l())},this.execute=function(){e&&e()}}function p(e,t){var n=new h(e,t);return a.push(n),n}var e=this,t=0,n=0,r=1,i=document.createElement("div");i.style.position="relative",i.style.width=t+"px",i.style.height=n+"px",i.style.transformOrigin=i.style.webkitTransformOrigin=i.style.MozTransformOrigin=i.style.OTransformOrigin=i.style.msTransformOrigin="0 0";var s=new Guacamole.Display.VisibleLayer(t,n),o=new Guacamole.Display.VisibleLayer(0,0);o.setChannelMask(Guacamole.Layer.SRC),i.appendChild(s.getElement()),i.appendChild(o.getElement());var u=document.createElement("div");u.style.position="relative",u.style.width=t*r+"px",u.style.height=n*r+"px",u.appendChild(i),this.cursorHotspotX=0,this.cursorHotspotY=0,this.cursorX=0,this.cursorY=0,this.onresize=null,this.oncursor=null;var a=[],f=[];this.getElement=function(){return u},this.getWidth=function(){return t},this.getHeight=function(){return n},this.getDefaultLayer=function(){return s},this.getCursorLayer=function(){return o},this.createLayer=function(){var e=new Guacamole.Display.VisibleLayer(t,n);return e.move(s,0,0,0),e},this.createBuffer=function(){var e=new Guacamole.Layer(0,0);return e.autosize=1,e},this.flush=function(e){f.push(new c(e,a)),a=[],l()},this.setCursor=function(t,n,r,i,s,u,a){p(function(){e.cursorHotspotX=t,e.cursorHotspotY=n,o.resize(u,a),o.copy(r,i,s,u,a,0,0),e.moveCursor(e.cursorX,e.cursorY),e.oncursor&&e.oncursor(o.getCanvas(),t,n)})},this.showCursor=function(e){var t=o.getElement(),n=t.parentNode;e===!1?n&&n.removeChild(t):n!==i&&i.appendChild(t)},this.moveCursor=function(t,n){o.translate(t-e.cursorHotspotX,n-e.cursorHotspotY),e.cursorX=t,e.cursorY=n},this.resize=function(o,a,f){p(function(){o.resize(a,f),o===s&&(t=a,n=f,i.style.width=t+"px",i.style.height=n+"px",u.style.width=t*r+"px",u.style.height=n*r+"px",e.onresize&&e.onresize(a,f))})},this.drawImage=function(e,t,n,r){p(function(){e.drawImage(t,n,r)})},this.draw=function(e,t,n,r){var i=p(function(){e.drawImage(t,n,s)},!0),s=new Image;s.onload=i.unblock,s.src=r},this.play=function(e,t,n,r){var i=document.createElement("video");i.type=t,i.src=r,i.addEventListener("play",function(){function t(){e.drawImage(0,0,i),i.ended||window.setTimeout(t,20)}t()},!1),p(i.play)},this.transfer=function(e,t,n,r,i,s,o,u,a){p(function(){s.transfer(e,t,n,r,i,o,u,a)})},this.put=function(e,t,n,r,i,s,o,u){p(function(){s.put(e,t,n,r,i,o,u)})},this.copy=function(e,t,n,r,i,s,o,u){p(function(){s.copy(e,t,n,r,i,o,u)})},this.moveTo=function(e,t,n){p(function(){e.moveTo(t,n)})},this.lineTo=function(e,t,n){p(function(){e.lineTo(t,n)})},this.arc=function(e,t,n,r,i,s,o){p(function(){e.arc(t,n,r,i,s,o)})},this.curveTo=function(e,t,n,r,i,s,o){p(function(){e.curveTo(t,n,r,i,s,o)})},this.close=function(e){p(function(){e.close()})},this.rect=function(e,t,n,r,i){p(function(){e.rect(t,n,r,i)})},this.clip=function(e){p(function(){e.clip()})},this.strokeColor=function(e,t,n,r,i,s,o,u){p(function(){e.strokeColor(t,n,r,i,s,o,u)})},this.fillColor=function(e,t,n,r,i){p(function(){e.fillColor(t,n,r,i)})},this.strokeLayer=function(e,t,n,r,i){p(function(){e.strokeLayer(t,n,r,i)})},this.fillLayer=function(e,t){p(function(){e.fillLayer(t)})},this.push=function(e){p(function(){e.push()})},this.pop=function(e){p(function(){e.pop()})},this.reset=function(e){p(function(){e.reset()})},this.setTransform=function(e,t,n,r,i,s,o){p(function(){e.setTransform(t,n,r,i,s,o)})},this.transform=function(e,t,n,r,i,s,o){p(function(){e.transform(t,n,r,i,s,o)})},this.setChannelMask=function(e,t){p(function(){e.setChannelMask(t)})},this.setMiterLimit=function(e,t){p(function(){e.setMiterLimit(t)})},this.scale=function(e){i.style.transform=i.style.WebkitTransform=i.style.MozTransform=i.style.OTransform=i.style.msTransform="scale("+e+","+e+")",r=e,u.style.width=t*r+"px",u.style.height=n*r+"px"},this.getScale=function(){return r},this.flatten=function(){function n(e){var t=[];for(var n in e.children)t.push(e.children[n]);return t.sort(function(t,n){var r=t.z-n.z;if(r!==0)return r;var i=t.getElement(),s=n.getElement(),o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_PRECEDING?-1:o&Node.DOCUMENT_POSITION_FOLLOWING?1:0}),t}function r(e,i,s){if(e.width>0&&e.height>0){var o=t.globalAlpha;t.globalAlpha*=e.alpha/255,t.drawImage(e.getCanvas(),i,s);var u=n(e);for(var a=0;a<u.length;a++){var f=u[a];r(f,i+f.x,s+f.y)}t.globalAlpha=o}}var e=document.createElement("canvas");e.width=s.width,e.height=s.height;var t=e.getContext("2d");return r(s,0,0),e}},Guacamole.Display.VisibleLayer=function(e,t){Guacamole.Layer.apply(this,[e,t]);var n=this;this.__unique_id=Guacamole.Display.VisibleLayer.__next_id++,this.alpha=255,this.x=0,this.y=0,this.z=0,this.matrix=[1,0,0,1,0,0],this.parent=null,this.children={};var r=n.getCanvas();r.style.position="absolute",r.style.left="0px",r.style.top="0px";var i=document.createElement("div");i.appendChild(r),i.style.width=e+"px",i.style.height=t+"px",i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.overflow="hidden";var s=this.resize;this.resize=function(e,t){i.style.width=e+"px",i.style.height=t+"px",s(e,t)},this.getElement=function(){return i};var o="translate(0px, 0px)",u="matrix(1, 0, 0, 1, 0, 0)";this.translate=function(e,t){n.x=e,n.y=t,o="translate("+e+"px,"+t+"px)",i.style.transform=i.style.WebkitTransform=i.style.MozTransform=i.style.OTransform=i.style.msTransform=o+" "+u},this.move=function(e,t,r,s){if(n.parent!==e){n.parent&&delete n.parent.children[n.__unique_id],n.parent=e,e.children[n.__unique_id]=n;var o=e.getElement();o.appendChild(i)}n.translate(t,r),n.z=s,i.style.zIndex=s},this.shade=function(e){n.alpha=e,i.style.opacity=e/255},this.dispose=function(){n.parent&&(delete n.parent.children[n.__unique_id],n.parent=null),i.parentNode&&i.parentNode.removeChild(i)},this.distort=function(e,t,r,s,a,f){n.matrix=[e,t,r,s,a,f],u="matrix("+e+","+t+","+r+","+s+","+a+","+f+")",i.style.transform=i.style.WebkitTransform=i.style.MozTransform=i.style.OTransform=i.style.msTransform=o+" "+u}},Guacamole.Display.VisibleLayer.__next_id=0;var Guacamole=Guacamole||{};Guacamole.InputStream=function(e,t){var n=this;this.index=t,this.onblob=null,this.onend=null,this.sendAck=function(t,r){e.sendAck(n.index,t,r)}};var Guacamole=Guacamole||{};Guacamole.IntegerPool=function(){var e=this,t=[];this.next_int=0,this.next=function(){return t.length>0?t.shift():e.next_int++},this.free=function(e){t.push(e)}};var Guacamole=Guacamole||{};Guacamole.Keyboard=function(e){function d(e,t){return e?e[t]||e[0]:null}function v(e,t,n){if(!e)return null;var r,i=e.indexOf("U+");if(i>=0){var s=e.substring(i+2);r=String.fromCharCode(parseInt(s,16))}else{if(e.length!==1)return d(a[e],t);r=e}n===!0?r=r.toUpperCase():n===!1&&(r=r.toLowerCase());var o=r.charCodeAt(0);return g(o)}function m(e){return e<=31||e>=127&&e<=159}function g(e){return m(e)?65280|e:e>=0&&e<=255?e:e>=256&&e<=1114111?16777216|e:null}function y(e,t){return d(u[e],t)}function b(e,t){if(!t)return!1;var n=t.indexOf("U+");if(n===-1)return!0;var r=parseInt(t.substring(n+2),16);return e!==r?!0:e>=65&&e<=90||e>=48&&e<=57?!0:!1}function w(e){var n=Guacamole.Keyboard.ModifierState.fromKeyboardEvent(e);t.modifiers.alt&&n.alt===!1&&(t.release(65513),t.release(65514),t.release(65027)),t.modifiers.shift&&n.shift===!1&&(t.release(65505),t.release(65506)),t.modifiers.ctrl&&n.ctrl===!1&&(t.release(65507),t.release(65508)),t.modifiers.meta&&n.meta===!1&&(t.release(65511),t.release(65512)),t.modifiers.hyper&&n.hyper===!1&&(t.release(65515),t.release(65516)),t.modifiers=n}function E(){var e=x();if(!e)return!1;var t;do t=e,e=x();while(e!==null);return t.defaultPrevented}function S(e){if(!t.modifiers.ctrl||!t.modifiers.alt)return;if(e>=65&&e<=90)return;if(e>=97&&e<=122)return;if(e<=255||(e&4278190080)===16777216)t.release(65507),t.release(65508),t.release(65513),t.release(65514)}function x(){var e=o[0];if(!e)return null;if(!(e instanceof r)){if(e instanceof s){var n=e.keysym;return n&&(t.release(n),e.defaultPrevented=!0),o.shift()}return o.shift()}var n=null,u=[];e.reliable?(n=e.keysym,u=o.splice(0,1)):o[1]instanceof i?(n=o[1].keysym,u=o.splice(0,2)):o[1]&&(n=e.keysym,u=o.splice(0,1));if(u.length>0){if(n){S(n);var a=!t.press(n);c[e.keyCode]=n,t.modifiers.meta&&n!==65511&&n!==65512&&t.release(n);for(var f=0;f<u.length;f++)u[f].defaultPrevented=a}return e}return null}var t=this;this.onkeydown=null,this.onkeyup=null;var n=function(){var e=this;this.timestamp=(new Date).getTime(),this.defaultPrevented=!1,this.keysym=null,this.reliable=!1,this.getAge=function(){return(new Date).getTime()-e.timestamp}},r=function(e,r,i,s){n.apply(this),this.keyCode=e,this.keyIdentifier=r,this.key=i,this.location=s,this.keysym=v(i,s)||y(e,s),this.keysym&&(this.reliable=!0),!this.keysym&&b(e,r)&&(this.keysym=v(r,s,t.modifiers.shift));var o=!t.modifiers.ctrl&&!(navigator&&navigator.platform&&navigator.platform.match(/^mac/i)),u=!t.modifiers.alt;if(u&&t.modifiers.ctrl||o&&t.modifiers.alt||t.modifiers.meta||t.modifiers.hyper)this.reliable=!0;c[e]=this.keysym};r.prototype=new n;var i=function(e){n.apply(this),this.charCode=e,this.keysym=g(e),this.reliable=!0};i.prototype=new n;var s=function(e,t,r,i){n.apply(this),this.keyCode=e,this.keyIdentifier=t,this.key=r,this.location=i,this.keysym=c[e]||y(e,i)||v(r,i),this.reliable=!0};s.prototype=new n;var o=[],u={8:[65288],9:[65289],13:[65293],16:[65505,65505,65506],17:[65507,65507,65508],18:[65513,65513,65027],19:[65299],20:[65509],27:[65307],32:[32],33:[65365],34:[65366],35:[65367],36:[65360],37:[65361],38:[65362],39:[65363],40:[65364],45:[65379],46:[65535],91:[65515],92:[65383],93:null,112:[65470],113:[65471],114:[65472],115:[65473],116:[65474],117:[65475],118:[65476],119:[65477],120:[65478],121:[65479],122:[65480],123:[65481],144:[65407],145:[65300],225:[65027]},a={Again:[65382],AllCandidates:[65341],Alphanumeric:[65328],Alt:[65513,65513,65027],Attn:[64782],AltGraph:[65027],ArrowDown:[65364],ArrowLeft:[65361],ArrowRight:[65363],ArrowUp:[65362],Backspace:[65288],CapsLock:[65509],Cancel:[65385],Clear:[65291],Convert:[65313],Copy:[64789],Crsel:[64796],CrSel:[64796],CodeInput:[65335],Compose:[65312],Control:[65507,65507,65508],ContextMenu:[65383],DeadGrave:[65104],DeadAcute:[65105],DeadCircumflex:[65106],DeadTilde:[65107],DeadMacron:[65108],DeadBreve:[65109],DeadAboveDot:[65110],DeadUmlaut:[65111],DeadAboveRing:[65112],DeadDoubleacute:[65113],DeadCaron:[65114],DeadCedilla:[65115],DeadOgonek:[65116],DeadIota:[65117],DeadVoicedSound:[65118],DeadSemivoicedSound:[65119],Delete:[65535],Down:[65364],End:[65367],Enter:[65293],EraseEof:[64774],Escape:[65307],Execute:[65378],Exsel:[64797],ExSel:[64797],F1:[65470],F2:[65471],F3:[65472],F4:[65473],F5:[65474],F6:[65475],F7:[65476],F8:[65477],F9:[65478],F10:[65479],F11:[65480],F12:[65481],F13:[65482],F14:[65483],F15:[65484],F16:[65485],F17:[65486],F18:[65487],F19:[65488],F20:[65489],F21:[65490],F22:[65491],F23:[65492],F24:[65493],Find:[65384],GroupFirst:[65036],GroupLast:[65038],GroupNext:[65032],GroupPrevious:[65034],FullWidth:null,HalfWidth:null,HangulMode:[65329],Hankaku:[65321],HanjaMode:[65332],Help:[65386],Hiragana:[65317],HiraganaKatakana:[65319],Home:[65360],Hyper:[65517,65517,65518],Insert:[65379],JapaneseHiragana:[65317],JapaneseKatakana:[65318],JapaneseRomaji:[65316],JunjaMode:[65336],KanaMode:[65325],KanjiMode:[65313],Katakana:[65318],Left:[65361],Meta:[65511,65511,65512],ModeChange:[65406],NumLock:[65407],PageDown:[65366],PageUp:[65365],Pause:[65299],Play:[64790],PreviousCandidate:[65342],PrintScreen:[64797],Redo:[65382],Right:[65363],RomanCharacters:null,Scroll:[65300],Select:[65376],Separator:[65452],Shift:[65505,65505,65506],SingleCandidate:[65340],Super:[65515,65515,65516],Tab:[65289],Up:[65362],Undo:[65381],Win:[65515],Zenkaku:[65320],ZenkakuHankaku:[65322]},f={65027:!0,65505:!0,65506:!0,65507:!0,65508:!0,65511:!0,65512:!0,65513:!0,65514:!0,65515:!0,65516:!0};this.modifiers=new Guacamole.Keyboard.ModifierState,this.pressed={};var l={},c={},h=null,p=null;this.press=function(e){if(e===null)return;if(!t.pressed[e]){t.pressed[e]=!0;if(t.onkeydown){var n=t.onkeydown(e);return l[e]=n,window.clearTimeout(h),window.clearInterval(p),f[e]||(h=window.setTimeout(function(){p=window.setInterval(function(){t.onkeyup(e),t.onkeydown(e)},50)},500)),n}}return l[e]||!1},this.release=function(e){t.pressed[e]&&(delete t.pressed[e],window.clearTimeout(h),window.clearInterval(p),e!==null&&t.onkeyup&&t.onkeyup(e))},this.reset=function(){for(var e in t.pressed)t.release(parseInt(e));o=[]},e.addEventListener("keydown",function(e){if(!t.onkeydown)return;var n;window.event?n=window.event.keyCode:e.which&&(n=e.which),w(e);if(n===229)return;var i=new r(n,e.keyIdentifier,e.key,e.location||e.keyLocation);o.push(i),E()&&e.preventDefault()},!0),e.addEventListener("keypress",function(e){if(!t.onkeydown&&!t.onkeyup)return;var n;window.event?n=window.event.keyCode:e.which&&(n=e.which),w(e);var r=new i(n);o.push(r),E()&&e.preventDefault()},!0),e.addEventListener("keyup",function(e){if(!t.onkeyup)return;e.preventDefault();var n;window.event?n=window.event.keyCode:e.which&&(n=e.which),w(e);var r=new s(n,e.keyIdentifier,e.key,e.location||e.keyLocation);o.push(r),E()},!0)},Guacamole.Keyboard.ModifierState=function(){this.shift=!1,this.ctrl=!1,this.alt=!1,this.meta=!1,this.hyper=!1},Guacamole.Keyboard.ModifierState.fromKeyboardEvent=function(e){var t=new Guacamole.Keyboard.ModifierState;return t.shift=e.shiftKey,t.ctrl=e.ctrlKey,t.alt=e.altKey,t.meta=e.metaKey,e.getModifierState&&(t.hyper=e.getModifierState("OS")||e.getModifierState("Super")||e.getModifierState("Hyper")||e.getModifierState("Win")),t};var Guacamole=Guacamole||{};Guacamole.Layer=function(e,t){function a(e,t){var s=null;if(n.width!==0&&n.height!==0){s=document.createElement("canvas"),s.width=n.width,s.height=n.height;var u=s.getContext("2d");u.drawImage(r,0,0,n.width,n.height,0,0,n.width,n.height)}var a=i.globalCompositeOperation;r.width=e,r.height=t,s&&i.drawImage(s,0,0,n.width,n.height,0,0,n.width,n.height),i.globalCompositeOperation=a,n.width=e,n.height=t,o=0,i.save()}function f(e,t,r,i){var s=r+e,o=i+t,u;s>n.width?u=s:u=n.width;var a;o>n.height?a=o:a=n.height,n.resize(u,a)}var n=this,r=document.createElement("canvas"),i=r.getContext("2d");i.save();var s=!0,o=0,u={1:"destination-in",2:"destination-out",4:"source-in",6:"source-atop",8:"source-out",9:"destination-atop",10:"xor",11:"destination-over",12:"copy",14:"source-over",15:"lighter"};this.autosize=!1,this.width=e,this.height=t,this.getCanvas=function(){return r},this.resize=function(e,t){(e!==n.width||t!==n.height)&&a(e,t)},this.drawImage=function(e,t,r){n.autosize&&f(e,t,r.width,r.height),i.drawImage(r,e,t)},this.transfer=function(e,t,r,s,o,u,a,l){var c=e.getCanvas();if(t>=c.width||r>=c.height)return;t+s>c.width&&(s=c.width-t),r+o>c.height&&(o=c.height-r);if(s===0||o===0)return;n.autosize&&f(u,a,s,o);var h=e.getCanvas().getContext("2d").getImageData(t,r,s,o),p=i.getImageData(u,a,s,o);for(var d=0;d<s*o*4;d+=4){var v=new Guacamole.Layer.Pixel(h.data[d],h.data[d+1],h.data[d+2],h.data[d+3]),m=new Guacamole.Layer.Pixel(p.data[d],p.data[d+1],p.data[d+2],p.data[d+3]);l(v,m),p.data[d]=m.red,p.data[d+1]=m.green,p.data[d+2]=m.blue,p.data[d+3]=m.alpha}i.putImageData(p,u,a)},this.put=function(e,t,r,s,o,u,a){var l=e.getCanvas();if(t>=l.width||r>=l.height)return;t+s>l.width&&(s=l.width-t),r+o>l.height&&(o=l.height-r);if(s===0||o===0)return;n.autosize&&f(u,a,s,o);var c=e.getCanvas().getContext("2d").getImageData(t,r,s,o);i.putImageData(c,u,a)},this.copy=function(e,t,r,s,o,u,a){var l=e.getCanvas();if(t>=l.width||r>=l.height)return;t+s>l.width&&(s=l.width-t),r+o>l.height&&(o=l.height-r);if(s===0||o===0)return;n.autosize&&f(u,a,s,o),i.drawImage(l,t,r,s,o,u,a,s,o)},this.moveTo=function(e,t){s&&(i.beginPath(),s=!1),n.autosize&&f(e,t,0,0),i.moveTo(e,t)},this.lineTo=function(e,t){s&&(i.beginPath(),s=!1),n.autosize&&f(e,t,0,0),i.lineTo(e,t)},this.arc=function(e,t,r,o,u,a){s&&(i.beginPath(),s=!1),n.autosize&&f(e,t,0,0),i.arc(e,t,r,o,u,a)},this.curveTo=function(e,t,r,o,u,a){s&&(i.beginPath(),s=!1),n.autosize&&f(u,a,0,0),i.bezierCurveTo(e,t,r,o,u,a)},this.close=function(){i.closePath(),s=!0},this.rect=function(e,t,r,o){s&&(i.beginPath(),s=!1),n.autosize&&f(e,t,r,o),i.rect(e,t,r,o)},this.clip=function(){i.clip(),s=!0},this.strokeColor=function(e,t,n,r,o,u,a){i.lineCap=e,i.lineJoin=t,i.lineWidth=n,i.strokeStyle="rgba("+r+","+o+","+u+","+a/255+")",i.stroke(),s=!0},this.fillColor=function(e,t,n,r){i.fillStyle="rgba("+e+","+t+","+n+","+r/255+")",i.fill(),s=!0},this.strokeLayer=function(e,t,n,r){i.lineCap=e,i.lineJoin=t,i.lineWidth=n,i.strokeStyle=i.createPattern(r.getCanvas(),"repeat"),i.stroke(),s=!0},this.fillLayer=function(e){i.fillStyle=i.createPattern(e.getCanvas(),"repeat"),i.fill(),s=!0},this.push=function(){i.save(),o++},this.pop=function(){o>0&&(i.restore(),o--)},this.reset=function(){while(o>0)i.restore(),o--;i.restore(),i.save(),i.beginPath(),s=!1},this.setTransform=function(e,t,n,r,s,o){i.setTransform(e,t,n,r,s,o)},this.transform=function(e,t,n,r,s,o){i.transform(e,t,n,r,s,o)},this.setChannelMask=function(e){i.globalCompositeOperation=u[e]},this.setMiterLimit=function(e){i.miterLimit=e},r.width=e,r.height=t,r.style.zIndex=-1},Guacamole.Layer.ROUT=2,Guacamole.Layer.ATOP=6,Guacamole.Layer.XOR=10,Guacamole.Layer.ROVER=11,Guacamole.Layer.OVER=14,Guacamole.Layer.PLUS=15,Guacamole.Layer.RIN=1,Guacamole.Layer.IN=4,Guacamole.Layer.OUT=8,Guacamole.Layer.RATOP=9,Guacamole.Layer.SRC=12,Guacamole.Layer.Pixel=function(e,t,n,r){this.red=e,this.green=t,this.blue=n,this.alpha=r};var Guacamole=Guacamole||{};Guacamole.Mouse=function(e){function i(e){e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function s(){n=t.touchMouseThreshold}function o(e){var n=e.deltaY||-e.wheelDeltaY||-e.wheelDelta;n?e.deltaMode===1?n=e.deltaY*t.PIXELS_PER_LINE:e.deltaMode===2&&(n=e.deltaY*t.PIXELS_PER_PAGE):n=e.detail*t.PIXELS_PER_LINE,r+=n;while(r<=-t.scrollThreshold)t.onmousedown&&(t.currentState.up=!0,t.onmousedown(t.currentState)),t.onmouseup&&(t.currentState.up=!1,t.onmouseup(t.currentState)),r+=t.scrollThreshold;while(r>=t.scrollThreshold)t.onmousedown&&(t.currentState.down=!0,t.onmousedown(t.currentState)),t.onmouseup&&(t.currentState.down=!1,t.onmouseup(t.currentState)),r-=t.scrollThreshold;i(e)}var t=this;this.touchMouseThreshold=3,this.scrollThreshold=120,this.PIXELS_PER_LINE=40,this.PIXELS_PER_PAGE=640,this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1),this.onmousedown=null,this.onmouseup=null,this.onmousemove=null,this.onmouseout=null;var n=0,r=0;e.addEventListener("contextmenu",function(e){i(e)},!1),e.addEventListener("mousemove",function(r){i(r);if(n){n--;return}t.currentState.fromClientPosition(e,r.clientX,r.clientY),t.onmousemove&&t.onmousemove(t.currentState)},!1),e.addEventListener("mousedown",function(e){i(e);if(n)return;switch(e.button){case 0:t.currentState.left=!0;break;case 1:t.currentState.middle=!0;break;case 2:t.currentState.right=!0}t.onmousedown&&t.onmousedown(t.currentState)},!1),e.addEventListener("mouseup",function(e){i(e);if(n)return;switch(e.button){case 0:t.currentState.left=!1;break;case 1:t.currentState.middle=!1;break;case 2:t.currentState.right=!1}t.onmouseup&&t.onmouseup(t.currentState)},!1),e.addEventListener("mouseout",function(n){n||(n=window.event);var r=n.relatedTarget||n.toElement;while(r){if(r===e)return;r=r.parentNode}i(n);if(t.currentState.left||t.currentState.middle||t.currentState.right)t.currentState.left=!1,t.currentState.middle=!1,t.currentState.right=!1,t.onmouseup&&t.onmouseup(t.currentState);t.onmouseout&&t.onmouseout()},!1),e.addEventListener("selectstart",function(e){i(e)},!1),e.addEventListener("touchmove",s,!1),e.addEventListener("touchstart",s,!1),e.addEventListener("touchend",s,!1),e.addEventListener("DOMMouseScroll",o,!1),e.addEventListener("mousewheel",o,!1),e.addEventListener("wheel",o,!1);var u=function(){var e=document.createElement("div");if("cursor"in e.style){try{e.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==) 0 0, auto"}catch(t){return!1}return/\burl\([^()]*\)\s+0\s+0\b/.test(e.style.cursor||"")}return!1}();this.setCursor=function(t,n,r){if(u){var i=t.toDataURL("image/png");return e.style.cursor="url("+i+") "+n+" "+r+", auto",!0}return!1}},Guacamole.Mouse.State=function(e,t,n,r,i,s,o){var u=this;this.x=e,this.y=t,this.left=n,this.middle=r,this.right=i,this.up=s,this.down=o,this.fromClientPosition=function(e,t,n){u.x=t-e.offsetLeft,u.y=n-e.offsetTop;var r=e.offsetParent;while(r&&r!==document.body)u.x-=r.offsetLeft-r.scrollLeft,u.y-=r.offsetTop-r.scrollTop,r=r.offsetParent;if(r){var i=document.body.scrollLeft||document.documentElement.scrollLeft,s=document.body.scrollTop||document.documentElement.scrollTop;u.x-=r.offsetLeft-i,u.y-=r.offsetTop-s}}},Guacamole.Mouse.Touchpad=function(e){var t=this;this.scrollThreshold=20*(window.devicePixelRatio||1),this.clickTimingThreshold=250,this.clickMoveThreshold=10*(window.devicePixelRatio||1),this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1),this.onmousedown=null,this.onmouseup=null,this.onmousemove=null;var n=0,r=0,i=0,s=0,o=0,u={1:"left",2:"right",3:"middle"},a=!1,f=null;e.addEventListener("touchend",function(e){e.preventDefault();if(a&&e.touches.length===0){var r=(new Date).getTime(),i=u[n];t.currentState[i]&&(t.currentState[i]=!1,t.onmouseup&&t.onmouseup(t.currentState),f&&(window.clearTimeout(f),f=null)),r-s<=t.clickTimingThreshold&&o<t.clickMoveThreshold&&(t.currentState[i]=!0,t.onmousedown&&t.onmousedown(t.currentState),f=window.setTimeout(function(){t.currentState[i]=!1,t.onmouseup&&t.onmouseup(t.currentState),a=!1},t.clickTimingThreshold)),f||(a=!1)}},!1),e.addEventListener("touchstart",function(e){e.preventDefault(),n=Math.min(e.touches.length,3),f&&(window.clearTimeout(f),f=null);if(!a){a=!0;var t=e.touches[0];r=t.clientX,i=t.clientY,s=(new Date).getTime(),o=0}},!1),e.addEventListener("touchmove",function(u){u.preventDefault();var a=u.touches[0],f=a.clientX-r,l=a.clientY-i;o+=Math.abs(f)+Math.abs(l);if(n===1){var c=o/((new Date).getTime()-s),h=1+c;t.currentState.x+=f*h,t.currentState.y+=l*h,t.currentState.x<0?t.currentState.x=0:t.currentState.x>=e.offsetWidth&&(t.currentState.x=e.offsetWidth-1),t.currentState.y<0?t.currentState.y=0:t.currentState.y>=e.offsetHeight&&(t.currentState.y=e.offsetHeight-1),t.onmousemove&&t.onmousemove(t.currentState),r=a.clientX,i=a.clientY}else if(n===2&&Math.abs(l)>=t.scrollThreshold){var p;l>0?p="down":p="up",t.currentState[p]=!0,t.onmousedown&&t.onmousedown(t.currentState),t.currentState[p]=!1,t.onmouseup&&t.onmouseup(t.currentState),r=a.clientX,i=a.clientY}},!1)},Guacamole.Mouse.Touchscreen=function(e){function u(e){t.currentState[e]||(t.currentState[e]=!0,t.onmousedown&&t.onmousedown(t.currentState))}function a(e){t.currentState[e]&&(t.currentState[e]=!1,t.onmouseup&&t.onmouseup(t.currentState))}function f(e){u(e),a(e)}function l(n,r){t.currentState.fromClientPosition(e,n,r),t.onmousemove&&t.onmousemove(t.currentState)}function c(e){var n=e.touches[0]||e.changedTouches[0],s=n.clientX-r,o=n.clientY-i;return Math.sqrt(s*s+o*o)>=t.clickMoveThreshold}function h(e){var t=e.touches[0];n=!0,r=t.clientX,i=t.clientY}function p(){window.clearTimeout(s),window.clearTimeout(o),n=!1}var t=this,n=!1,r=null,i=null,s=null,o=null;this.scrollThreshold=20*(window.devicePixelRatio||1),this.clickTimingThreshold=250,this.clickMoveThreshold=16*(window.devicePixelRatio||1),this.longPressThreshold=500,this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1),this.onmousedown=null,this.onmouseup=null,this.onmousemove=null,e.addEventListener("touchend",function(e){if(!n)return;if(e.touches.length!==0||e.changedTouches.length!==1){p();return}window.clearTimeout(o),a("left");if(!c(e)){e.preventDefault();if(!t.currentState.left){var r=e.changedTouches[0];l(r.clientX,r.clientY),u("left"),s=window.setTimeout(function(){a("left"),p()},t.clickTimingThreshold)}}},!1),e.addEventListener("touchstart",function(e){if(e.touches.length!==1){p();return}e.preventDefault(),h(e),window.clearTimeout(s),o=window.setTimeout(function(){var t=e.touches[0];l(t.clientX,t.clientY),f("right"),p()},t.longPressThreshold)},!1),e.addEventListener("touchmove",function(e){if(!n)return;c(e)&&window.clearTimeout(o);if(e.touches.length!==1){p();return}if(t.currentState.left){e.preventDefault();var r=e.touches[0];l(r.clientX,r.clientY)}},!1)};var Guacamole=Guacamole||{};Guacamole.OnScreenKeyboard=function(e){function l(){f=t.touchMouseThreshold}function c(e){var t=s[e];return t||(t=o,o<<=1,s[e]=t),t}function h(e,t,n,r){this.width=t,this.height=n,this.scale=function(i){e.style.width=t*i+"px",e.style.height=n*i+"px",r&&(e.style.lineHeight=n*i+"px",e.style.fontSize=i+"px")}}function p(e,t){var n=e.childNodes;for(var r=0;r<n.length;r++){var i=n[r];if(!i.tagName)continue;var s=t[i.tagName];if(!s)throw new Error("Unexpected "+i.tagName+" within "+e.tagName);s(i)}}var t=this,n=0,r={},i=[],s={},o=1,u,a;this.touchMouseThreshold=3;var f=0;Node.classList?(u=function(e,t){e.classList.add(t)},a=function(e,t){e.classList.remove(t)}):(u=function(e,t){e.className+=" "+t},a=function(e,t){e.className=e.className.replace(/([^ ]+)[ ]*/g,function(e,n,r,i,s){return n==t?"":e})});var d=document.createElement("div");d.className="guac-keyboard";var v=new XMLHttpRequest;v.open("GET",e,!1),v.send(null);var m=v.responseXML;if(m){function g(e){var s=document.createElement("div");return s.className="guac-keyboard-row",p(e,{column:function(e){s.appendChild(y(e))},gap:function(t){var n=document.createElement("div");n.className="guac-keyboard-gap";var r=1;t.getAttribute("size")&&(r=parseFloat(t.getAttribute("size"))),i.push(new h(n,r,r)),s.appendChild(n)},key:function(o){function y(){if(!m.pressed){u(l,"guac-keyboard-pressed");var e=m.getCap(n);if(e.modifier){var i="guac-keyboard-modifier-"+e.modifier,s=c(e.modifier);n^=s;if(n&s)u(d,i),r[e.modifier]=e.keysym,t.onkeydown&&e.keysym&&t.onkeydown(e.keysym);else{var o=r[e.modifier];a(d,i),delete r[e.modifier],t.onkeyup&&o&&t.onkeyup(o)}}else t.onkeydown&&e.keysym&&t.onkeydown(e.keysym);m.pressed=!0}}function b(){if(m.pressed){var e=m.getCap(n);a(l,"guac-keyboard-pressed"),!e.modifier&&t.onkeyup&&e.keysym&&t.onkeyup(e.keysym),m.pressed=!1}}function w(e){e.preventDefault(),f=t.touchMouseThreshold,y()}function E(e){e.preventDefault(),f=t.touchMouseThreshold,b()}function S(e){e.preventDefault(),f==0&&y()}function x(e){e.preventDefault(),f==0&&b()}var l=document.createElement("div");l.className="guac-keyboard-key",o.getAttribute("class")&&(l.className+=" "+o.getAttribute("class"));var v=document.createElement("div");v.className="guac-keyboard-key-container",v.appendChild(l);var m=new Guacamole.OnScreenKeyboard.Key,g=1;o.getAttribute("size")&&(g=parseFloat(o.getAttribute("size"))),m.size=g,p(o,{cap:function(t){var n=t.textContent||t.text;n.length==0&&(n=" ");var r=null;if(t.getAttribute("keysym"))r=parseInt(t.getAttribute("keysym"));else if(n.length==1){var i=n.charCodeAt(0);i>=0&&i<=255?r=i:i>=256&&i<=1114111&&(r=16777216|i)}var s=new Guacamole.OnScreenKeyboard.Cap(n,r);t.getAttribute("modifier")&&(s.modifier=t.getAttribute("modifier"));var o=document.createElement("div");o.className="guac-keyboard-cap",o.textContent=n,l.appendChild(o),t.getAttribute("class")&&(o.className+=" "+t.getAttribute("class"));var a=0;if(t.getAttribute("if")){var f=t.getAttribute("if").split(",");for(var h=0;h<f.length;h++)a|=c(f[h]),u(o,"guac-keyboard-requires-"+f[h]),u(l,"guac-keyboard-uses-"+f[h])}m.modifierMask|=a,m.caps[a]=s}}),i.push(new h(v,g,1,!0)),s.appendChild(v),l.addEventListener("touchstart",w,!0),l.addEventListener("touchend",E,!0),l.addEventListener("mousedown",S,!0),l.addEventListener("mouseup",x,!0),l.addEventListener("mouseout",x,!0)}}),s}function y(e){var t=document.createElement("div");return t.className="guac-keyboard-column",t.getAttribute("align")&&(t.style.textAlign=t.getAttribute("align")),p(e,{row:function(e){t.appendChild(g(e))}}),t}var b=m.documentElement;if(b.tagName!="keyboard")throw new Error("Root element must be keyboard");if(!b.getAttribute("size"))throw new Error("size attribute is required for keyboard");var w=parseFloat(b.getAttribute("size"));p(b,{row:function(e){d.appendChild(g(e))},column:function(e){d.appendChild(y(e))}})}d.onselectstart=d.onmousemove=d.onmouseup=d.onmousedown=function(e){return f&&f--,e.stopPropagation(),!1},this.onkeydown=null,this.onkeyup=null,this.getElement=function(){return d},this.resize=function(e){var t=Math.floor(e*10/w)/10;for(var n=0;n<i.length;n++){var r=i[n];r.scale(t)}}},Guacamole.OnScreenKeyboard.Key=function(){var e=this;this.pressed=!1,this.size=1,this.caps={},this.modifierMask=0,this.getCap=function(t){return e.caps[t&e.modifierMask]}},Guacamole.OnScreenKeyboard.Cap=function(e,t,n){this.modifier=null,this.text=e,this.keysym=t,n&&(this.modifier=n)};var Guacamole=Guacamole||{};Guacamole.OutputStream=function(e,t){var n=this;this.index=t,this.onack=null,this.sendBlob=function(t){e.sendBlob(n.index,t)},this.sendEnd=function(){e.endStream(n.index)}};var Guacamole=Guacamole||{};Guacamole.Parser=function(){var e=this,t="",n=[],r=-1,i=0;this.receive=function(s){i>4096&&r>=i&&(t=t.substring(i),r-=i,i=0),t+=s;while(r<t.length){if(r>=i){var o=t.substring(i,r),u=t.substring(r,r+1);n.push(o);if(u==";"){var a=n.shift();e.oninstruction!=null&&e.oninstruction(a,n),n.length=0}else if(u!=",")throw new Error("Illegal terminator.");i=r+1}var f=t.indexOf(".",i);if(f==-1){i=t.length;break}var l=parseInt(t.substring(r+1,f));if(l==NaN)throw new Error("Non-numeric character in element length.");i=f+1,r=i+l}},this.oninstruction=null};var Guacamole=Guacamole||{};Guacamole.Status=function(e,t){var n=this;this.code=e,this.message=t,this.isError=function(){return n.code<0||n.code>255}},Guacamole.Status.Code={SUCCESS:0,UNSUPPORTED:256,SERVER_ERROR:512,SERVER_BUSY:513,UPSTREAM_TIMEOUT:514,UPSTREAM_ERROR:515,RESOURCE_NOT_FOUND:516,RESOURCE_CONFLICT:517,CLIENT_BAD_REQUEST:768,CLIENT_UNAUTHORIZED:769,CLIENT_FORBIDDEN:771,CLIENT_TIMEOUT:776,CLIENT_OVERRUN:781,CLIENT_BAD_TYPE:783,CLIENT_TOO_MANY:797};var Guacamole=Guacamole||{};Guacamole.StringReader=function(e){function s(e){var t="",n=new Uint8Array(e);for(var s=0;s<n.length;s++){var o=n[s];r===0?(o|127)===127?t+=String.fromCharCode(o):(o|31)===223?(i=o&31,r=1):(o|15)===239?(i=o&15,r=2):(o|7)===247?(i=o&7,r=3):t+="�":(o|63)===191?(i=i<<6|o&63,r--,r===0&&(t+=String.fromCharCode(i))):(r=0,t+="�")}return t}var t=this,n=new Guacamole.ArrayBufferReader(e),r=0,i=0;n.ondata=function(e){var n=s(e);t.ontext&&t.ontext(n)},n.onend=function(){t.onend&&t.onend()},this.ontext=null,this.onend=null};var Guacamole=Guacamole||{};Guacamole.StringWriter=function(e){function s(e){if(i+e>=r.length){var t=new Uint8Array((i+e)*2);t.set(r),r=t}i+=e}function o(e){var t,n;if(e<=127)t=0,n=1;else if(e<=2047)t=192,n=2;else if(e<=65535)t=224,n=3;else{if(!(e<=2097151)){o(65533);return}t=240,n=4}s(n);var u=i-1;for(var a=1;a<n;a++)r[u--]=128|e&63,e>>=6;r[u]=t|e}function u(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);o(n)}if(i>0){var s=r.subarray(0,i);return i=0,s}}var t=this,n=new Guacamole.ArrayBufferWriter(e),r=new Uint8Array(8192),i=0;n.onack=function(e){t.onack&&t.onack(e)},this.sendText=function(e){n.sendData(u(e))},this.sendEnd=function(){n.sendEnd()},this.onack=null};var Guacamole=Guacamole||{};Guacamole.Tunnel=function(){this.connect=function(e){},this.disconnect=function(){},this.sendMessage=function(e){},this.state=Guacamole.Tunnel.State.CONNECTING,this.receiveTimeout=15e3,this.onerror=null,this.onstatechange=null,this.oninstruction=null},Guacamole.Tunnel.State={CONNECTING:0,OPEN:1,CLOSED:2},Guacamole.HTTPTunnel=function(e){function h(){window.clearTimeout(c),c=window.setTimeout(function(){p(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},t.receiveTimeout)}function p(e){if(t.state===Guacamole.Tunnel.State.CLOSED)return;e.code!==Guacamole.Status.Code.SUCCESS&&t.onerror&&(t.state===Guacamole.Tunnel.State.CONNECTING||e.code!==Guacamole.Status.Code.RESOURCE_NOT_FOUND)&&t.onerror(e),t.state=Guacamole.Tunnel.State.CLOSED,f=!1,t.onstatechange&&t.onstatechange(t.state)}function d(){if(t.state!==Guacamole.Tunnel.State.OPEN)return;if(l.length>0){f=!0;var e=new XMLHttpRequest;e.open("POST",s+n),e.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),e.onreadystatechange=function(){e.readyState===4&&(e.status!==200?v(e):d())},e.send(l),l=""}else f=!1}function v(e){var t=parseInt(e.getResponseHeader("Guacamole-Status-Code")),n=e.getResponseHeader("Guacamole-Error-Message");p(new Guacamole.Status(t,n))}function m(e){function c(){if(t.state!==Guacamole.Tunnel.State.OPEN){n!==null&&clearInterval(n);return}if(e.readyState<2)return;var i;try{i=e.status}catch(u){i=200}!r&&i===200&&(r=y());if(e.readyState===3||e.readyState===4){h(),a===o&&(e.readyState===3&&!n?n=setInterval(c,30):e.readyState===4&&!n&&clearInterval(n));if(e.status===0){t.disconnect();return}if(e.status!==200){v(e);return}var p;try{p=e.responseText}catch(u){return}while(s<p.length){if(s>=f){var d=p.substring(f,s),g=p.substring(s,s+1);l.push(d);if(g===";"){var b=l.shift();t.oninstruction&&t.oninstruction(b,l),l.length=0}f=s+1}var w=p.indexOf(".",f);if(w===-1){f=p.length;break}var E=parseInt(p.substring(s+1,w));if(E===0){n||clearInterval(n),e.onreadystatechange=null,e.abort(),r&&m(r);break}f=w+1,s=f+E}}}var n=null,r=null,i=0,s=-1,f=0,l=new Array;a===o?e.onreadystatechange=function(){e.readyState===3&&(i++,i>=2&&(a=u,e.onreadystatechange=c)),c()}:e.onreadystatechange=c,c()}function y(){var e=new XMLHttpRequest;return e.open("GET",i+n+":"+g++),e.send(null),e}var t=this,n,r=e+"?connect",i=e+"?read:",s=e+"?write:",o=1,u=0,a=o,f=!1,l="",c=null;this.sendMessage=function(){function e(e){var t=new String(e);return t.length+"."+t}if(t.state!==Guacamole.Tunnel.State.OPEN)return;if(arguments.length===0)return;var n=e(arguments[0]);for(var r=1;r<arguments.length;r++)n+=","+e(arguments[r]);n+=";",l+=n,f||d()};var g=0;this.connect=function(e){h();var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState!==4)return;if(i.status!==200){v(i);return}h(),n=i.responseText,t.state=Guacamole.Tunnel.State.OPEN,t.onstatechange&&t.onstatechange(t.state),m(y())},i.open("POST",r,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),i.send(e)},this.disconnect=function(){p(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}},Guacamole.HTTPTunnel.prototype=new Guacamole.Tunnel,Guacamole.WebSocketTunnel=function(e){function a(){window.clearTimeout(r),r=window.setTimeout(function(){f(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},t.receiveTimeout)}function f(e){if(t.state===Guacamole.Tunnel.State.CLOSED)return;e.code!==Guacamole.Status.Code.SUCCESS&&t.onerror&&t.onerror(e),t.state=Guacamole.Tunnel.State.CLOSED,t.onstatechange&&t.onstatechange(t.state),n.close()}var t=this,n=null,r=null,i={"http:":"ws:","https:":"wss:"};if(e.substring(0,3)!=="ws:"&&e.substring(0,4)!=="wss:"){var s=i[window.location.protocol];if(e.substring(0,1)==="/")e=s+"//"+window.location.host+e;else{var o=window.location.pathname.lastIndexOf("/"),u=window.location.pathname.substring(0,o+1);e=s+"//"+window.location.host+u+e}}this.sendMessage=function(e){function r(e){var t=new String(e);return t.length+"."+t}if(t.state!==Guacamole.Tunnel.State.OPEN)return;if(arguments.length===0)return;var i=r(arguments[0]);for(var s=1;s<arguments.length;s++)i+=","+r(arguments[s]);i+=";",n.send(i)},this.connect=function(r){a(),n=new WebSocket(e+"?"+r,"guacamole"),n.onopen=function(e){a(),t.state=Guacamole.Tunnel.State.OPEN,t.onstatechange&&t.onstatechange(t.state)},n.onclose=function(e){f(new Guacamole.Status(parseInt(e.reason),e.reason))},n.onerror=function(e){f(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,e.data))},n.onmessage=function(e){a();var n=e.data,r=0,i,s=[];do{var o=n.indexOf(".",r);if(o!==-1){var u=parseInt(n.substring(i+1,o));r=o+1,i=r+u}else f(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,"Incomplete instruction."));var l=n.substring(r,i),c=n.substring(i,i+1);s.push(l);if(c===";"){var h=s.shift();t.oninstruction&&t.oninstruction(h,s),s.length=0}r=i+1}while(r<n.length)}},this.disconnect=function(){f(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}},Guacamole.WebSocketTunnel.prototype=new Guacamole.Tunnel,Guacamole.ChainedTunnel=function(e){function s(e){function i(){var t=r.shift();return t&&(e.onerror=null,e.oninstruction=null,e.onstatechange=null,s(t)),t}function o(){e.onstatechange=t.onstatechange,e.oninstruction=t.oninstruction,e.onerror=t.onerror}t.disconnect=e.disconnect,t.sendMessage=e.sendMessage,e.onstatechange=function(e){switch(e){case Guacamole.Tunnel.State.OPEN:o(),t.onstatechange&&t.onstatechange(e);break;case Guacamole.Tunnel.State.CLOSED:!i()&&t.onstatechange&&t.onstatechange(e)}},e.oninstruction=function(e,n){o(),t.oninstruction&&t.oninstruction(e,n)},e.onerror=function(e){!i()&&t.onerror&&t.onerror(e)},e.connect(n)}var t=this,n,r=[];for(var i=0;i<arguments.length;i++)r.push(arguments[i]);this.connect=function(e){n=e;var i=r.shift();i?s(i):t.onerror&&t.onerror(Guacamole.Status.Code.SERVER_ERROR,"No tunnels to try.")}},Guacamole.ChainedTunnel.prototype=new Guacamole.Tunnel;var Guacamole=Guacamole||{};Guacamole.API_VERSION="0.9.5",define("guacamole",function(e){return function(){var t,n;return t||e.guacamole}}(this)),define("course/console/connectVm",["utils","guacamole"],function(e){function b(e){var t=new Guacamole.Mouse.State(e.x/v.getScale(),e.y/v.getScale(),e.left,e.middle,e.right,e.up,e.down);p.sendMouseState(t)}function w(e){p.sendKeyEvent(1,e)}function E(e){p.sendKeyEvent(0,e)}var t=$("#jinja-data").data(),n="ssh",r="desktop",i=t.vmUri,s=t.vncUri,o=t.sshUri,u=s||o,a=$(".vmmode select"),f=$("#cutmodal"),l=f.find(".copytovm"),c=f.find(".copyarea"),h=$("#clipboard");(function(e,n){if(e==n){var r=a.find("option[value=ssh]");a.html(r),localStorage.currentLab=t.labid,localStorage.mode="ssh"}})(u,o),function(){var e;!localStorage.mode||!localStorage.currentLab||localStorage.currentLab!=t.labid?(localStorage.clear(),localStorage.currentLab=t.labid,localStorage.mode=u==s?"vnc":"ssh"):(e=localStorage.mode=="vnc"?r:n,a.val(e))}();var p=new Guacamole.Client(function(){var n;return window.WebSocket?n=new Guacamole.ChainedTunnel(new Guacamole.WebSocketTunnel((t.siteType==0?"wss://":"ws://")+t.guacHost+"/websocket-tunnel"),new Guacamole.HTTPTunnel("tunnel")):(e.flashMessage("error","您的浏览器不支持WebSocket，请使用最新版的Google Chrome浏览器！"),n=new Guacamole.HTTPTunnel("tunnel")),n}());$("#display").html(p.getDisplay().getElement()),p.onerror=function(n){t.siteType==0?e.modalMessage("error","与服务器断开了连接，请刷新页面重试","错误提示"):e.modalMessage("error","disconnected with the server, please refresh the browser","error")};var d=localStorage.mode=="vnc"?s:o;$.ajax({method:"POST",async:!1,url:(t.siteType==0?"https://":"http://")+t.guacHost+"/api/tokens",data:d}).done(function(e){d=d+"&authToken="+e.authToken}).fail(function(e){console.error("token error: ",e.status,e.statusText)}),p.connect(d);var v=p.getDisplay(),m=new Guacamole.Mouse(p.getDisplay().getElement()),g=new Guacamole.Keyboard(document),y=t.resolution.split(",");return v.scale($(".vmdesktop").width()/y[0]),m.onmousedown=m.onmouseup=m.onmousemove=function(e){v.showCursor(!1),b(e)},g.onkeydown=w,g.onkeyup=E,p.onclipboard=function(e,t){if(t!=="text/plain"){e.sendAck("只支持text/plain",Guacamole.Status.Code.UNSUPPORTED);return}var n=new Guacamole.StringReader(e),r="";n.ontext=function(t){r+=t,e.sendAck("获取剪切板成功",Guacamole.Status.Code.SUCCESS)},n.onend=function(){c.val(r)}},l.on("click",function(){var t=c.val();p.setClipboard(t),e.flashMessage("success","保存成功，请在实验环境中粘贴")}),f.on("show.bs.modal",function(){g.onkeydown=null,g.onkeyup=null}).on("hide.bs.modal",function(){g.onkeydown=w,g.onkeyup=E}),a.change(function(){var e=$(this).val();e=="ssh"?(localStorage.mode="ssh",window.location.reload()):(localStorage.mode="vnc",window.location.reload())}),/simplecloud\.cn/.test(window.location.origin)&&(window.guac=p,window.display=v),{guac:p,display:v,keyboard:g,keydownEvent:w,keyupEvent:E}}),define("course/console/fixLayout",["bootstrap","course/console/connectVm"],function(e,t){function n(e,n){var r=$("#jinja-data").data(),i=$(".vmdesktop"),s=$(".vmlayer"),o=$(".labcontent"),u=$("#toolbar"),a=u.find(".leftbar"),f=u.find(".rightbar"),l=$("#footertool"),c=$("#labimages"),h=c.find(".capturescreen"),p=$("#labimages"),d=$("#document"),v=$("#preview"),m=e||$(window).width(),g=n||$(window).height(),y=r.resolution.split(","),b=u.outerHeight(),w=50;i.add(s).width(y[0]*(g-w)/y[1]),t.display.scale(i.width()/y[0]),i.add(s).css({top:w}),i.height($(window).height()-w),i.width()<787?(w=b>50?b:50,$(".stoplab")[0].childNodes[1].nodeValue="",$(".nextlab")[0].childNodes[1].nodeValue="",i.add(s).width(y[0]*(g-w)/y[1]),t.display.scale(i.width()/y[0]),i.add(s).css({top:w})):($(".stoplab")[0].childNodes[1].nodeValue=" 停止实验",$(".nextlab")[0].childNodes[1].nodeValue=" 下一个实验");var E=i.width();o.add(a).width(m-E-10),f.width(E-10),f.find(".btns").css("margin-left",function(){var e=(E-175)/2-220;return e>0?e:0}),$("> div",o).width(o.width()-12),l.width(o.width()+8),h.css({height:c.find(".col-md-3").width()*y[1]/y[0]}).hover(function(){$("img",this).attr("src",r.captureScreenPngHover)},function(){$("img",this).attr("src",r.captureScreenPng)}),$(".togglecapture").hasClass("active")&&p.height(p.find(".row").height()),d.css({top:u.outerHeight()-2,height:l.offset().top-u.outerHeight()}),i.width()<787&&d.css({top:u.outerHeight()-2,height:l.offset().top-u.outerHeight()}),v.height(d.height()-80),docHeight=l.offset().top-51,docTop=d.offset().top}return n(),{fixLayout:n}}),!function(e,t){function n(e,t){for(var n,r=[],i=0;i<e.length;++i){if(n=u[e[i]]||s(e[i]),!n)throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){u[e]=i.apply(null,arguments)})}function i(e){return!!u[e]}function s(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;r<n.length;r++){for(var i=e,s=n[r],o=s.split(/[.\/]/),a=0;a<o.length-1;++a)i[o[a]]===t&&(i[o[a]]={}),i=i[o[a]];i[o[o.length-1]]=u[s]}}var u={},a="moxie/core/utils/Basic",f="moxie/core/I18n",l="moxie/core/utils/Mime",c="moxie/core/utils/Env",h="moxie/core/utils/Dom",p="moxie/core/Exceptions",d="moxie/core/EventTarget",v="moxie/core/utils/Encode",m="moxie/runtime/Runtime",g="moxie/runtime/RuntimeClient",y="moxie/file/Blob",b="moxie/file/File",w="moxie/file/FileInput",E="moxie/file/FileDrop",S="moxie/runtime/RuntimeTarget",x="moxie/file/FileReader",T="moxie/core/utils/Url",N="moxie/file/FileReaderSync",C="moxie/xhr/FormData",k="moxie/xhr/XMLHttpRequest",L="moxie/runtime/Transporter",A="moxie/image/Image",O="moxie/runtime/html5/Runtime",M="moxie/runtime/html5/file/Blob",_="moxie/core/utils/Events",D="moxie/runtime/html5/file/FileInput",P="moxie/runtime/html5/file/FileDrop",H="moxie/runtime/html5/file/FileReader",B="moxie/runtime/html5/xhr/XMLHttpRequest",j="moxie/runtime/html5/utils/BinaryReader",F="moxie/runtime/html5/image/JPEGHeaders",I="moxie/runtime/html5/image/ExifParser",q="moxie/runtime/html5/image/JPEG",R="moxie/runtime/html5/image/PNG",U="moxie/runtime/html5/image/ImageInfo",z="moxie/runtime/html5/image/MegaPixel",W="moxie/runtime/html5/image/Image",X="moxie/runtime/flash/Runtime",V="moxie/runtime/flash/file/Blob",$="moxie/runtime/flash/file/FileInput",J="moxie/runtime/flash/file/FileReader",K="moxie/runtime/flash/file/FileReaderSync",Q="moxie/runtime/flash/xhr/XMLHttpRequest",G="moxie/runtime/flash/runtime/Transporter",Y="moxie/runtime/flash/image/Image",Z="moxie/runtime/silverlight/Runtime",et="moxie/runtime/silverlight/file/Blob",tt="moxie/runtime/silverlight/file/FileInput",nt="moxie/runtime/silverlight/file/FileDrop",rt="moxie/runtime/silverlight/file/FileReader",it="moxie/runtime/silverlight/file/FileReaderSync",st="moxie/runtime/silverlight/xhr/XMLHttpRequest",ot="moxie/runtime/silverlight/runtime/Transporter",ut="moxie/runtime/silverlight/image/Image",at="moxie/runtime/html4/Runtime",ft="moxie/runtime/html4/file/FileInput",lt="moxie/runtime/html4/file/FileReader",ct="moxie/runtime/html4/xhr/XMLHttpRequest",ht="moxie/runtime/html4/image/Image";r(a,[],function(){var e=function(e){var t;return e===t?"undefined":null===e?"null":e.nodeType?"node":{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},t=function(r){var i;return n(arguments,function(s,u){u>0&&n(s,function(n,s){n!==i&&(e(r[s])===e(n)&&~o(e(n),["array","object"])?t(r[s],n):r[s]=n)})}),r},n=function(e,t){var n,r,i,s;if(e){try{n=e.length}catch(o){n=s}if(n===s){for(r in e)if(e.hasOwnProperty(r)&&t(e[r],r)===!1)return}else for(i=0;n>i;i++)if(t(e[i],i)===!1)return}},r=function(t){var n;if(!t||"object"!==e(t))return!0;for(n in t)return!1;return!0},i=function(t,n){function r(i){"function"===e(t[i])&&t[i](function(e){++i<s&&!e?r(i):n(e)})}var i=0,s=t.length;"function"!==e(n)&&(n=function(){}),t&&t.length||n(),r(i)},s=function(e,t){var r=0,i=e.length,s=new Array(i);n(e,function(e,n){e(function(e){if(e)return t(e);var o=[].slice.call(arguments);o.shift(),s[n]=o,r++,r===i&&(s.unshift(null),t.apply(this,s))})})},o=function(e,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n}return-1},u=function(t,n){var r=[];"array"!==e(t)&&(t=[t]),"array"!==e(n)&&(n=[n]);for(var i in t)-1===o(t[i],n)&&r.push(t[i]);return r.length?r:!1},a=function(e,t){var r=[];return n(e,function(e){-1!==o(e,t)&&r.push(e)}),r.length?r:null},f=function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n},l=function(){var e=0;return function(t){var n=(new Date).getTime().toString(32),r;for(r=0;5>r;r++)n+=Math.floor(65535*Math.random()).toString(32);return(t||"o_")+n+(e++).toString(32)}}(),c=function(e){return e?String.prototype.trim?String.prototype.trim.call(e):e.toString().replace(/^\s*/,"").replace(/\s*$/,""):e},h=function(e){if("string"!=typeof e)return e;var t={t:1099511627776,g:1073741824,m:1048576,k:1024},n;return e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")),n=e[2],e=+e[1],t.hasOwnProperty(n)&&(e*=t[n]),e};return{guid:l,typeOf:e,extend:t,each:n,isEmptyObj:r,inSeries:i,inParallel:s,inArray:o,arrayDiff:u,arrayIntersect:a,toArray:f,trim:c,parseSizeStr:h}}),r(f,[a],function(e){var t={};return{addI18n:function(n){return e.extend(t,n)},translate:function(e){return t[e]||e},_:function(e){return this.translate(e)},sprintf:function(t){var n=[].slice.call(arguments,1);return t.replace(/%[a-z]/g,function(){var t=n.shift();return"undefined"!==e.typeOf(t)?t:""})}}}),r(l,[a,f],function(e,t){var n="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",r={mimes:{},extensions:{},addMimeType:function(e){var t=e.split(/,/),n,r,i;for(n=0;n<t.length;n+=2){for(i=t[n+1].split(/ /),r=0;r<i.length;r++)this.mimes[i[r]]=t[n];this.extensions[t[n]]=i}},extList2mimes:function(t,n){var r=this,i,s,o,u,a=[];for(s=0;s<t.length;s++)for(i=t[s].extensions.split(/\s*,\s*/),o=0;o<i.length;o++){if("*"===i[o])return[];if(u=r.mimes[i[o]])-1===e.inArray(u,a)&&a.push(u);else{if(!n||!/^\w+$/.test(i[o]))return[];a.push("."+i[o])}}return a},mimes2exts:function(t){var n=this,r=[];return e.each(t,function(t){if("*"===t)return r=[],!1;var i=t.match(/^(\w+)\/(\*|\w+)$/);i&&("*"===i[2]?e.each(n.extensions,function(e,t){(new RegExp("^"+i[1]+"/")).test(t)&&[].push.apply(r,n.extensions[t])}):n.extensions[t]&&[].push.apply(r,n.extensions[t]))}),r},mimes2extList:function(n){var r=[],i=[];return"string"===e.typeOf(n)&&(n=e.trim(n).split(/\s*,\s*/)),i=this.mimes2exts(n),r.push({title:t.translate("Files"),extensions:i.length?i.join(","):"*"}),r.mimes=n,r},getFileExtension:function(e){var t=e&&e.match(/\.([^.]+)$/);return t?t[1].toLowerCase():""},getFileMime:function(e){return this.mimes[this.getFileExtension(e)]||""}};return r.addMimeType(n),r}),r(c,[a],function(e){function t(e,t,n){var r=0,i=0,s=0,o={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},u=function(e){return e=(""+e).replace(/[_\-+]/g,"."),e=e.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),e.length?e.split("."):[-8]},a=function(e){return e?isNaN(e)?o[e]||-7:parseInt(e,10):0};for(e=u(e),t=u(t),i=Math.max(e.length,t.length),r=0;i>r;r++)if(e[r]!=t[r]){if(e[r]=a(e[r]),t[r]=a(t[r]),e[r]<t[r]){s=-1;break}if(e[r]>t[r]){s=1;break}}if(!n)return s;switch(n){case">":case"gt":return s>0;case">=":case"ge":return s>=0;case"<=":case"le":return 0>=s;case"==":case"=":case"eq":return 0===s;case"<>":case"!=":case"ne":return 0!==s;case"":case"<":case"lt":return 0>s;default:return null}}var n=function(e){var t="",n="?",r="function",i="undefined",s="object",o="major",u="model",a="name",f="type",l="vendor",c="version",h="architecture",p="console",d="mobile",v="tablet",m={has:function(e,t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()}},g={rgx:function(){for(var t,n=0,o,u,a,f,l,c,h=arguments;n<h.length;n+=2){var p=h[n],d=h[n+1];if(typeof t===i){t={};for(a in d)f=d[a],typeof f===s?t[f[0]]=e:t[f]=e}for(o=u=0;o<p.length;o++)if(l=p[o].exec(this.getUA())){for(a=0;a<d.length;a++)c=l[++u],f=d[a],typeof f===s&&f.length>0?2==f.length?t[f[0]]=typeof f[1]==r?f[1].call(this,c):f[1]:3==f.length?t[f[0]]=typeof f[1]!==r||f[1].exec&&f[1].test?c?c.replace(f[1],f[2]):e:c?f[1].call(this,c,f[2]):e:4==f.length&&(t[f[0]]=c?f[3].call(this,c.replace(f[1],f[2])):e):t[f]=c?c:e;break}if(l)break}return t},str:function(t,r){for(var i in r)if(typeof r[i]===s&&r[i].length>0){for(var o=0;o<r[i].length;o++)if(m.has(r[i][o],t))return i===n?e:i}else if(m.has(r[i],t))return i===n?e:i;return t}},y={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},b={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[a,c,o],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[a,"Opera"],c,o],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[a,c,o],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[a,"IE"],c,o],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[a,"Yandex"],c,o],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[a,/_/g," "],c,o],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[a,c,o],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[a,"Dolphin"],c,o],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[a,"Chrome"],c,o],[/((?:android.+))version\/((\d+)?[\w\.]+)\smobile\ssafari/i],[[a,"Android Browser"],c,o],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[c,o,[a,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[c,o,a],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[a,[o,g.str,y.browser.oldsafari.major],[c,g.str,y.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[a,c,o],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[a,"Netscape"],c,o],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[a,c,o]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,c],[/rv\:([\w\.]+).*(gecko)/i],[c,a]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[c,g.str,y.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[c,g.str,y.os.windows.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[a,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[a,"Symbian"],c],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],c],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[a,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],c],[/(sunos)\s?([\w\.]+\d)*/i],[[a,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[a,c],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[a,"iOS"],[c,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[a,[c,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[a,c]]},w=function(e){var n=e||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:t);this.getBrowser=function(){return g.rgx.apply(this,b.browser)},this.getEngine=function(){return g.rgx.apply(this,b.engine)},this.getOS=function(){return g.rgx.apply(this,b.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this.setUA(n)};return(new w).getResult()}(),r=function(){var t={define_property:function(){return!1}(),create_canvas:function(){var e=document.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")}(),return_response_type:function(t){try{if(-1!==e.inArray(t,["","text","document"]))return!0;if(window.XMLHttpRequest){var n=new XMLHttpRequest;if(n.open("get","/"),"responseType"in n)return n.responseType=t,n.responseType!==t?!1:!0}}catch(r){}return!1},use_data_uri:function(){var e=new Image;return e.onload=function(){t.use_data_uri=1===e.width&&1===e.height},setTimeout(function(){e.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return t.use_data_uri&&("IE"!==i.browser||i.version>=9)},use_data_uri_of:function(e){return t.use_data_uri&&33e3>e||t.use_data_uri_over32kb()},use_fileinput:function(){var e=document.createElement("input");return e.setAttribute("type","file"),!e.disabled}};return function(n){var r=[].slice.call(arguments);return r.shift(),"function"===e.typeOf(t[n])?t[n].apply(this,r):!!t[n]}}(),i={can:r,browser:n.browser.name,version:parseFloat(n.browser.major),os:n.os.name,osVersion:n.os.version,verComp:t,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return i.OS=i.os,i}),r(h,[c],function(e){var t=function(e){return"string"!=typeof e?e:document.getElementById(e)},n=function(e,t){if(!e.className)return!1;var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");return n.test(e.className)},r=function(e,t){n(e,t)||(e.className=e.className?e.className.replace(/\s+$/,"")+" "+t:t)},i=function(e,t){if(e.className){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(n,function(e,t,n){return" "===t&&" "===n?" ":""})}},s=function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null)[t]:void 0},o=function(t,n){function r(e){var t,n,r=0,i=0;return e&&(n=e.getBoundingClientRect(),t="CSS1Compat"===u.compatMode?u.documentElement:u.body,r=n.left+t.scrollLeft,i=n.top+t.scrollTop),{x:r,y:i}}var i=0,s=0,o,u=document,a,f;if(t=t,n=n||u.body,t&&t.getBoundingClientRect&&"IE"===e.browser&&(!u.documentMode||u.documentMode<8))return a=r(t),f=r(n),{x:a.x-f.x,y:a.y-f.y};for(o=t;o&&o!=n&&o.nodeType;)i+=o.offsetLeft||0,s+=o.offsetTop||0,o=o.offsetParent;for(o=t.parentNode;o&&o!=n&&o.nodeType;)i-=o.scrollLeft||0,s-=o.scrollTop||0,o=o.parentNode;return{x:i,y:s}},u=function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}};return{get:t,hasClass:n,addClass:r,removeClass:i,getStyle:s,getPos:o,getSize:u}}),r(p,[a],function(e){function t(e,t){var n;for(n in e)if(e[n]===t)return n;return null}return{RuntimeError:function(){function n(e){this.code=e,this.name=t(r,e),this.message=this.name+": RuntimeError "+this.code}var r={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};return e.extend(n,r),n.prototype=Error.prototype,n}(),OperationNotAllowedException:function(){function t(e){this.code=e,this.name="OperationNotAllowedException"}return e.extend(t,{NOT_ALLOWED_ERR:1}),t.prototype=Error.prototype,t}(),ImageError:function(){function n(e){this.code=e,this.name=t(r,e),this.message=this.name+": ImageError "+this.code}var r={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2};return e.extend(n,r),n.prototype=Error.prototype,n}(),FileException:function(){function n(e){this.code=e,this.name=t(r,e),this.message=this.name+": FileException "+this.code}var r={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return e.extend(n,r),n.prototype=Error.prototype,n}(),DOMException:function(){function n(e){this.code=e,this.name=t(r,e),this.message=this.name+": DOMException "+this.code}var r={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return e.extend(n,r),n.prototype=Error.prototype,n}(),EventException:function(){function t(e){this.code=e,this.name="EventException"}return e.extend(t,{UNSPECIFIED_EVENT_TYPE_ERR:0}),t.prototype=Error.prototype,t}()}}),r(d,[p,a],function(e,t){function n(){var n={};t.extend(this,{uid:null,init:function(){this.uid||(this.uid=t.guid("uid_"))},addEventListener:function(e,r,i,s){var o=this,u;return e=t.trim(e),/\s/.test(e)?void t.each(e.split(/\s+/),function(e){o.addEventListener(e,r,i,s)}):(e=e.toLowerCase(),i=parseInt(i,10)||0,u=n[this.uid]&&n[this.uid][e]||[],u.push({fn:r,priority:i,scope:s||this}),n[this.uid]||(n[this.uid]={}),void (n[this.uid][e]=u))},hasEventListener:function(e){return e?!!n[this.uid]&&!!n[this.uid][e]:!!n[this.uid]},removeEventListener:function(e,r){e=e.toLowerCase();var i=n[this.uid]&&n[this.uid][e],s;if(i){if(r){for(s=i.length-1;s>=0;s--)if(i[s].fn===r){i.splice(s,1);break}}else i=[];i.length||(delete n[this.uid][e],t.isEmptyObj(n[this.uid])&&delete n[this.uid])}},removeAllEventListeners:function(){n[this.uid]&&delete n[this.uid]},dispatchEvent:function(r){var i,s,o,u,a={},f=!0,l;if("string"!==t.typeOf(r)){if(u=r,"string"!==t.typeOf(u.type))throw new e.EventException(e.EventException.UNSPECIFIED_EVENT_TYPE_ERR);r=u.type,u.total!==l&&u.loaded!==l&&(a.total=u.total,a.loaded=u.loaded),a.async=u.async||!1}if(-1!==r.indexOf("::")?!function(e){i=e[0],r=e[1]}(r.split("::")):i=this.uid,r=r.toLowerCase(),s=n[i]&&n[i][r]){s.sort(function(e,t){return t.priority-e.priority}),o=[].slice.call(arguments),o.shift(),a.type=r,o.unshift(a);var c=[];t.each(s,function(e){o[0].target=e.scope,c.push(a.async?function(t){setTimeout(function(){t(e.fn.apply(e.scope,o)===!1)},1)}:function(t){t(e.fn.apply(e.scope,o)===!1)})}),c.length&&t.inSeries(c,function(e){f=!e})}return f},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},convertEventPropsToHandlers:function(e){var n;"array"!==t.typeOf(e)&&(e=[e]);for(var r=0;r<e.length;r++)n="on"+e[r],"function"===t.typeOf(this[n])?this.addEventListener(e[r],this[n]):"undefined"===t.typeOf(this[n])&&(this[n]=null)}})}return n.instance=new n,n}),r(v,[],function(){var e=function(e){return unescape(encodeURIComponent(e))},t=function(e){return decodeURIComponent(escape(e))},n=function(e,n){if("function"==typeof window.atob)return n?t(window.atob(e)):window.atob(e);var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i,s,o,u,a,f,l,c,h=0,p=0,d="",v=[];if(!e)return e;e+="";do u=r.indexOf(e.charAt(h++)),a=r.indexOf(e.charAt(h++)),f=r.indexOf(e.charAt(h++)),l=r.indexOf(e.charAt(h++)),c=u<<18|a<<12|f<<6|l,i=c>>16&255,s=c>>8&255,o=255&c,v[p++]=64==f?String.fromCharCode(i):64==l?String.fromCharCode(i,s):String.fromCharCode(i,s,o);while(h<e.length);return d=v.join(""),n?t(d):d},r=function(t,n){if(n&&e(t),"function"==typeof window.btoa)return window.btoa(t);var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i,s,o,u,a,f,l,c,h=0,p=0,d="",v=[];if(!t)return t;do i=t.charCodeAt(h++),s=t.charCodeAt(h++),o=t.charCodeAt(h++),c=i<<16|s<<8|o,u=c>>18&63,a=c>>12&63,f=c>>6&63,l=63&c,v[p++]=r.charAt(u)+r.charAt(a)+r.charAt(f)+r.charAt(l);while(h<t.length);d=v.join("");var m=t.length%3;return(m?d.slice(0,m-3):d)+"===".slice(m||3)};return{utf8_encode:e,utf8_decode:t,atob:n,btoa:r}}),r(m,[a,h,d],function(e,t,n){function r(n,i,o,u,a){var f=this,l,c=e.guid(i+"_"),h=a||"browser";n=n||{},s[c]=this,o=e.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},o),n.preferred_caps&&(h=r.getMode(u,n.preferred_caps,h)),l=function(){var t={};return{exec:function(e,n,r,i){return l[n]&&(t[e]||(t[e]={context:this,instance:new l[n]}),t[e].instance[r])?t[e].instance[r].apply(this,i):void 0},removeInstance:function(e){delete t[e]},removeAllInstances:function(){var n=this;e.each(t,function(t,r){"function"===e.typeOf(t.instance.destroy)&&t.instance.destroy.call(t.context),n.removeInstance(r)})}}}(),e.extend(this,{initialized:!1,uid:c,type:i,mode:r.getMode(u,n.required_caps,h),shimid:c+"_container",clients:0,options:n,can:function(t,n){var i=arguments[2]||o;if("string"===e.typeOf(t)&&"undefined"===e.typeOf(n)&&(t=r.parseCaps(t)),"object"===e.typeOf(t)){for(var s in t)if(!this.can(s,t[s],i))return!1;return!0}return"function"===e.typeOf(i[t])?i[t].call(this,n):n===i[t]},getShimContainer:function(){var n,r=t.get(this.shimid);return r||(n=this.options.container?t.get(this.options.container):document.body,r=document.createElement("div"),r.id=this.shimid,r.className="moxie-shim moxie-shim-"+this.type,e.extend(r.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),n.appendChild(r),n=null),r},getShim:function(){return l},shimExec:function(e,t){var n=[].slice.call(arguments,2);return f.getShim().exec.call(this,this.uid,e,t,n)},exec:function(e,t){var n=[].slice.call(arguments,2);return f[e]&&f[e][t]?f[e][t].apply(this,n):f.shimExec.apply(this,arguments)},destroy:function(){if(f){var e=t.get(this.shimid);e&&e.parentNode.removeChild(e),l&&l.removeAllInstances(),this.unbindAll(),delete s[this.uid],this.uid=null,c=f=l=e=null}}}),this.mode&&n.required_caps&&!this.can(n.required_caps)&&(this.mode=!1)}var i={},s={};return r.order="html5,flash,silverlight,html4",r.getRuntime=function(e){return s[e]?s[e]:!1},r.addConstructor=function(e,t){t.prototype=n.instance,i[e]=t},r.getConstructor=function(e){return i[e]||null},r.getInfo=function(e){var t=r.getRuntime(e);return t?{uid:t.uid,type:t.type,mode:t.mode,can:function(){return t.can.apply(t,arguments)}}:null},r.parseCaps=function(t){var n={};return"string"!==e.typeOf(t)?t||{}:(e.each(t.split(","),function(e){n[e]=!0}),n)},r.can=function(e,t){var n,i=r.getConstructor(e),s;return i?(n=new i({required_caps:t}),s=n.mode,n.destroy(),!!s):!1},r.thatCan=function(e,t){var n=(t||r.order).split(/\s*,\s*/);for(var i in n)if(r.can(n[i],e))return n[i];return null},r.getMode=function(t,n,r){var i=null;if("undefined"===e.typeOf(r)&&(r="browser"),n&&!e.isEmptyObj(t)){if(e.each(n,function(n,r){if(t.hasOwnProperty(r)){var s=t[r](n);if("string"==typeof s&&(s=[s]),i){if(!(i=e.arrayIntersect(i,s)))return i=!1}else i=s}}),i)return-1!==e.inArray(r,i)?r:i[0];if(i===!1)return!1}return r},r.capTrue=function(){return!0},r.capFalse=function(){return!1},r.capTest=function(e){return function(){return!!e}},r}),r(g,[p,a,m],function(e,t,n){return function r(){var r;t.extend(this,{connectRuntime:function(i){function s(t){var u,a;return t.length?(u=t.shift(),(a=n.getConstructor(u))?(r=new a(i),r.bind("Init",function(){r.initialized=!0,setTimeout(function(){r.clients++,o.trigger("RuntimeInit",r)},1)}),r.bind("Error",function(){r.destroy(),s(t)}),r.mode?void r.init():void r.trigger("Error")):void s(t)):(o.trigger("RuntimeError",new e.RuntimeError(e.RuntimeError.NOT_INIT_ERR)),void (r=null))}var o=this,u;if("string"===t.typeOf(i)?u=i:"string"===t.typeOf(i.ruid)&&(u=i.ruid),u){if(r=n.getRuntime(u))return r.clients++,r;throw new e.RuntimeError(e.RuntimeError.NOT_INIT_ERR)}s((i.runtime_order||n.order).split(/\s*,\s*/))},getRuntime:function(){return r&&r.uid?r:(r=null,null)},disconnectRuntime:function(){r&&--r.clients<=0&&(r.destroy(),r=null)}})}}),r(y,[a,v,g],function(e,t,n){function r(s,o){function u(t,n,s){var o,u=i[this.uid];return"string"===e.typeOf(u)&&u.length?(o=new r(null,{type:s,size:n-t}),o.detach(u.substr(t,o.size)),o):null}n.call(this),s&&this.connectRuntime(s),o?"string"===e.typeOf(o)&&(o={data:o}):o={},e.extend(this,{uid:o.uid||e.guid("uid_"),ruid:s,size:o.size||0,type:o.type||"",slice:function(e,t,n){return this.isDetached()?u.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),e,t,n)},getSource:function(){return i[this.uid]?i[this.uid]:null},detach:function(e){this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),e=e||"";var n=e.match(/^data:([^;]*);base64,/);n&&(this.type=n[1],e=t.atob(e.substring(e.indexOf("base64,")+7))),this.size=e.length,i[this.uid]=e},isDetached:function(){return!this.ruid&&"string"===e.typeOf(i[this.uid])},destroy:function(){this.detach(),delete i[this.uid]}}),o.data?this.detach(o.data):i[this.uid]=o}var i={};return r}),r(b,[a,l,y],function(e,t,n){function r(r,i){var s,o;if(i||(i={}),o=i.type&&""!==i.type?i.type:t.getFileMime(i.name),i.name)s=i.name.replace(/\\/g,"/"),s=s.substr(s.lastIndexOf("/")+1);else{var u=o.split("/")[0];s=e.guid((""!==u?u:"file")+"_"),t.extensions[o]&&(s+="."+t.extensions[o][0])}n.apply(this,arguments),e.extend(this,{type:o||"",name:s||e.guid("file_"),lastModifiedDate:i.lastModifiedDate||(new Date).toLocaleString()})}return r.prototype=n.prototype,r}),r(w,[a,l,h,p,d,f,b,m,g],function(e,t,n,r,i,s,o,u,a){function f(i){var f=this,c,h,p;if(-1!==e.inArray(e.typeOf(i),["string","node"])&&(i={browse_button:i}),h=n.get(i.browse_button),!h)throw new r.DOMException(r.DOMException.NOT_FOUND_ERR);p={accept:[{title:s.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:h.parentNode||document.body},i=e.extend({},p,i),"string"==typeof i.required_caps&&(i.required_caps=u.parseCaps(i.required_caps)),"string"==typeof i.accept&&(i.accept=t.mimes2extList(i.accept)),c=n.get(i.container),c||(c=document.body),"static"===n.getStyle(c,"position")&&(c.style.position="relative"),c=h=null,a.call(f),e.extend(f,{uid:e.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){f.convertEventPropsToHandlers(l),f.bind("RuntimeInit",function(t,r){f.ruid=r.uid,f.shimid=r.shimid,f.bind("Ready",function(){f.trigger("Refresh")},999),f.bind("Change",function(){var t=r.exec.call(f,"FileInput","getFiles");f.files=[],e.each(t,function(e){return 0===e.size?!0:void f.files.push(new o(f.ruid,e))})},999),f.bind("Refresh",function(){var t,s,o,u;o=n.get(i.browse_button),u=n.get(r.shimid),o&&(t=n.getPos(o,n.get(i.container)),s=n.getSize(o),u&&e.extend(u.style,{top:t.y+"px",left:t.x+"px",width:s.w+"px",height:s.h+"px"})),u=o=null}),r.exec.call(f,"FileInput","init",i)}),f.connectRuntime(e.extend({},i,{required_caps:{select_file:!0}}))},disable:function(t){var n=this.getRuntime();n&&n.exec.call(this,"FileInput","disable","undefined"===e.typeOf(t)?!0:t)},refresh:function(){f.trigger("Refresh")},destroy:function(){var t=this.getRuntime();t&&(t.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===e.typeOf(this.files)&&e.each(this.files,function(e){e.destroy()}),this.files=null}})}var l=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return f.prototype=i.instance,f}),r(E,[f,h,p,a,b,g,d,l],function(e,t,n,r,i,s,o,u){function a(n){var o=this,a;"string"==typeof n&&(n={drop_zone:n}),a={accept:[{title:e.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},n="object"==typeof n?r.extend({},a,n):a,n.container=t.get(n.drop_zone)||document.body,"static"===t.getStyle(n.container,"position")&&(n.container.style.position="relative"),"string"==typeof n.accept&&(n.accept=u.mimes2extList(n.accept)),s.call(o),r.extend(o,{uid:r.guid("uid_"),ruid:null,files:null,init:function(){o.convertEventPropsToHandlers(f),o.bind("RuntimeInit",function(e,t){o.ruid=t.uid,o.bind("Drop",function(){var e=t.exec.call(o,"FileDrop","getFiles");o.files=[],r.each(e,function(e){o.files.push(new i(o.ruid,e))})},999),t.exec.call(o,"FileDrop","init",n),o.dispatchEvent("ready")}),o.connectRuntime(n)},destroy:function(){var e=this.getRuntime();e&&(e.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null}})}var f=["ready","dragenter","dragleave","drop","error"];return a.prototype=o.instance,a}),r(S,[a,g,d],function(e,t,n){function r(){this.uid=e.guid("uid_"),t.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return r.prototype=n.instance,r}),r(x,[a,v,p,d,y,b,S],function(e,t,n,r,i,s,o){function u(){function r(e,r){function l(e){s.readyState=u.DONE,s.error=e,s.trigger("error"),c()}function c(){f.destroy(),f=null,s.trigger("loadend")}function h(t){f.bind("Error",function(e,t){l(t)}),f.bind("Progress",function(e){s.result=t.exec.call(f,"FileReader","getResult"),s.trigger(e)}),f.bind("Load",function(e){s.readyState=u.DONE,s.result=t.exec.call(f,"FileReader","getResult"),s.trigger(e),c()}),t.exec.call(f,"FileReader","read",e,r)}if(f=new o,this.convertEventPropsToHandlers(a),this.readyState===u.LOADING)return l(new n.DOMException(n.DOMException.INVALID_STATE_ERR));if(this.readyState=u.LOADING,this.trigger("loadstart"),r instanceof i)if(r.isDetached()){var p=r.getSource();switch(e){case"readAsText":case"readAsBinaryString":this.result=p;break;case"readAsDataURL":this.result="data:"+r.type+";base64,"+t.btoa(p)}this.readyState=u.DONE,this.trigger("load"),c()}else h(f.connectRuntime(r.ruid));else l(new n.DOMException(n.DOMException.NOT_FOUND_ERR))}var s=this,f;e.extend(this,{uid:e.guid("uid_"),readyState:u.EMPTY,result:null,error:null,readAsBinaryString:function(e){r.call(this,"readAsBinaryString",e)},readAsDataURL:function(e){r.call(this,"readAsDataURL",e)},readAsText:function(e){r.call(this,"readAsText",e)},abort:function(){this.result=null,-1===e.inArray(this.readyState,[u.EMPTY,u.DONE])&&(this.readyState===u.LOADING&&(this.readyState=u.DONE),f&&f.getRuntime().exec.call(this,"FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),f&&(f.getRuntime().exec.call(this,"FileReader","destroy"),f.disconnectRuntime()),s=f=null}})}var a=["loadstart","progress","load","abort","error","loadend"];return u.EMPTY=0,u.LOADING=1,u.DONE=2,u.prototype=r.instance,u}),r(T,[],function(){var e=function(t,n){for(var r=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],i=r.length,s={http:80,https:443},o={},u=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,a=u.exec(t||"");i--;)a[i]&&(o[r[i]]=a[i]);if(!o.scheme){n&&"string"!=typeof n||(n=e(n||document.location.href)),o.scheme=n.scheme,o.host=n.host,o.port=n.port;var f="";/^[^\/]/.test(o.path)&&(f=n.path,/(\/|\/[^\.]+)$/.test(f)?f+="/":f=f.replace(/\/[^\/]+$/,"/")),o.path=f+(o.path||"")}return o.port||(o.port=s[o.scheme]||80),o.port=parseInt(o.port,10),o.path||(o.path="/"),delete o.source,o},t=function(t){var n={http:80,https:443},r=e(t);return r.scheme+"://"+r.host+(r.port!==n[r.scheme]?":"+r.port:"")+r.path+(r.query?r.query:"")},n=function(t){function n(e){return[e.scheme,e.host,e.port].join("/")}return"string"==typeof t&&(t=e(t)),n(e())===n(t)};return{parseUrl:e,resolveUrl:t,hasSameOrigin:n}}),r(N,[a,g,v],function(e,t,n){return function(){function r(e,t){if(!t.isDetached()){var r=this.connectRuntime(t.ruid).exec.call(this,"FileReaderSync","read",e,t);return this.disconnectRuntime(),r}var i=t.getSource();switch(e){case"readAsBinaryString":return i;case"readAsDataURL":return"data:"+t.type+";base64,"+n.btoa(i);case"readAsText":for(var s="",o=0,u=i.length;u>o;o++)s+=String.fromCharCode(i[o]);return s}}t.call(this),e.extend(this,{uid:e.guid("uid_"),readAsBinaryString:function(e){return r.call(this,"readAsBinaryString",e)},readAsDataURL:function(e){return r.call(this,"readAsDataURL",e)},readAsText:function(e){return r.call(this,"readAsText",e)}})}}),r(C,[p,a,y],function(e,t,n){function r(){var e,r=[];t.extend(this,{append:function(i,s){var o=this,u=t.typeOf(s);s instanceof n?e={name:i,value:s}:"array"===u?(i+="[]",t.each(s,function(e){o.append(i,e)})):"object"===u?t.each(s,function(e,t){o.append(i+"["+t+"]",e)}):"null"===u||"undefined"===u||"number"===u&&isNaN(s)?o.append(i,"false"):r.push({name:i,value:s.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return e&&e.value||null},getBlobName:function(){return e&&e.name||null},each:function(n){t.each(r,function(e){n(e.value,e.name)}),e&&n(e.value,e.name)},destroy:function(){e=null,r=[]}})}return r}),r(k,[a,p,d,v,T,m,S,y,N,C,c,l],function(e,t,n,r,i,s,o,u,a,f,l,c){function h(){this.uid=e.guid("uid_")}function p(){function n(e,t){return y.hasOwnProperty(e)?1===arguments.length?l.can("define_property")?y[e]:g[e]:void (l.can("define_property")?y[e]=t:g[e]=t):void 0}function a(t){function r(){F&&(F.destroy(),F=null),u.dispatchEvent("loadend"),u=null}function i(i){F.bind("LoadStart",function(e){n("readyState",p.LOADING),u.dispatchEvent("readystatechange"),u.dispatchEvent(e),A&&u.upload.dispatchEvent(e)}),F.bind("Progress",function(e){n("readyState")!==p.LOADING&&(n("readyState",p.LOADING),u.dispatchEvent("readystatechange")),u.dispatchEvent(e)}),F.bind("UploadProgress",function(e){A&&u.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:e.total,loaded:e.loaded})}),F.bind("Load",function(t){n("readyState",p.DONE),n("status",Number(i.exec.call(F,"XMLHttpRequest","getStatus")||0)),n("statusText",d[n("status")]||""),n("response",i.exec.call(F,"XMLHttpRequest","getResponse",n("responseType"))),~e.inArray(n("responseType"),["text",""])?n("responseText",n("response")):"document"===n("responseType")&&n("responseXML",n("response")),I=i.exec.call(F,"XMLHttpRequest","getAllResponseHeaders"),u.dispatchEvent("readystatechange"),n("status")>0?(A&&u.upload.dispatchEvent(t),u.dispatchEvent(t)):(M=!0,u.dispatchEvent("error")),r()}),F.bind("Abort",function(e){u.dispatchEvent(e),r()}),F.bind("Error",function(e){M=!0,n("readyState",p.DONE),u.dispatchEvent("readystatechange"),O=!0,u.dispatchEvent(e),r()}),i.exec.call(F,"XMLHttpRequest","send",{url:w,method:E,async:b,user:x,password:T,headers:S,mimeType:C,encoding:N,responseType:u.responseType,withCredentials:u.withCredentials,options:j},t)}var u=this;D=(new Date).getTime(),F=new o,"string"==typeof j.required_caps&&(j.required_caps=s.parseCaps(j.required_caps)),j.required_caps=e.extend({},j.required_caps,{return_response_type:u.responseType}),t instanceof f&&(j.required_caps.send_multipart=!0),_||(j.required_caps.do_cors=!0),j.ruid?i(F.connectRuntime(j)):(F.bind("RuntimeInit",function(e,t){i(t)}),F.bind("RuntimeError",function(e,t){u.dispatchEvent("RuntimeError",t)}),F.connectRuntime(j))}function m(){n("responseText",""),n("responseXML",null),n("response",null),n("status",0),n("statusText",""),D=P=null}var g=this,y={timeout:0,readyState:p.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},b=!0,w,E,S={},x,T,N=null,C=null,k=!1,L=!1,A=!1,O=!1,M=!1,_=!1,D,P,H=null,B=null,j={},F,I="",q;e.extend(this,y,{uid:e.guid("uid_"),upload:new h,open:function(s,o,u,a,f){var l;if(!s||!o)throw new t.DOMException(t.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(s)||r.utf8_encode(s)!==s)throw new t.DOMException(t.DOMException.SYNTAX_ERR);if(~e.inArray(s.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(E=s.toUpperCase()),~e.inArray(E,["CONNECT","TRACE","TRACK"]))throw new t.DOMException(t.DOMException.SECURITY_ERR);if(o=r.utf8_encode(o),l=i.parseUrl(o),_=i.hasSameOrigin(l),w=i.resolveUrl(o),(a||f)&&!_)throw new t.DOMException(t.DOMException.INVALID_ACCESS_ERR);if(x=a||l.user,T=f||l.pass,b=u||!0,b===!1&&(n("timeout")||n("withCredentials")||""!==n("responseType")))throw new t.DOMException(t.DOMException.INVALID_ACCESS_ERR);k=!b,L=!1,S={},m.call(this),n("readyState",p.OPENED),this.convertEventPropsToHandlers(["readystatechange"]),this.dispatchEvent("readystatechange")},setRequestHeader:function(i,s){var o=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(n("readyState")!==p.OPENED||L)throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(i)||r.utf8_encode(i)!==i)throw new t.DOMException(t.DOMException.SYNTAX_ERR);return i=e.trim(i).toLowerCase(),~e.inArray(i,o)||/^(proxy\-|sec\-)/.test(i)?!1:(S[i]?S[i]+=", "+s:S[i]=s,!0)},getAllResponseHeaders:function(){return I||""},getResponseHeader:function(t){return t=t.toLowerCase(),M||~e.inArray(t,["set-cookie","set-cookie2"])?null:I&&""!==I&&(q||(q={},e.each(I.split(/\r\n/),function(t){var n=t.split(/:\s+/);2===n.length&&(n[0]=e.trim(n[0]),q[n[0].toLowerCase()]={header:n[0],value:e.trim(n[1])})})),q.hasOwnProperty(t))?q[t].header+": "+q[t].value:null},overrideMimeType:function(r){var i,s;if(~e.inArray(n("readyState"),[p.LOADING,p.DONE]))throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);if(r=e.trim(r.toLowerCase()),/;/.test(r)&&(i=r.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(r=i[1],i[2]&&(s=i[2])),!c.mimes[r])throw new t.DOMException(t.DOMException.SYNTAX_ERR);H=r,B=s},send:function(n,i){if(j="string"===e.typeOf(i)?{ruid:i}:i?i:{},this.convertEventPropsToHandlers(v),this.upload.convertEventPropsToHandlers(v),this.readyState!==p.OPENED||L)throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);if(n instanceof u)j.ruid=n.ruid,C=n.type||"application/octet-stream";else if(n instanceof f){if(n.hasBlob()){var s=n.getBlob();j.ruid=s.ruid,C=s.type||"application/octet-stream"}}else"string"==typeof n&&(N="UTF-8",C="text/plain;charset=UTF-8",n=r.utf8_encode(n));this.withCredentials||(this.withCredentials=j.required_caps&&j.required_caps.send_browser_cookies&&!_),A=!k&&this.upload.hasEventListener(),M=!1,O=!n,k||(L=!0),a.call(this,n)},abort:function(){if(M=!0,k=!1,~e.inArray(n("readyState"),[p.UNSENT,p.OPENED,p.DONE]))n("readyState",p.UNSENT);else{if(n("readyState",p.DONE),L=!1,!F)throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);F.getRuntime().exec.call(F,"XMLHttpRequest","abort",O),O=!0}},destroy:function(){F&&("function"===e.typeOf(F.destroy)&&F.destroy(),F=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}})}var d={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};h.prototype=n.instance;var v=["loadstart","progress","abort","error","load","timeout","loadend"],m=1,g=2;return p.UNSENT=0,p.OPENED=1,p.HEADERS_RECEIVED=2,p.LOADING=3,p.DONE=4,p.prototype=n.instance,p}),r(L,[a,v,g,d],function(e,t,n,r){function i(){function r(){l=c=0,f=this.result=null}function s(t,n){var r=this;a=n,r.bind("TransportingProgress",function(t){c=t.loaded,l>c&&-1===e.inArray(r.state,[i.IDLE,i.DONE])&&o.call(r)},999),r.bind("TransportingComplete",function(){c=l,r.state=i.DONE,f=null,r.result=a.exec.call(r,"Transporter","getAsBlob",t||"")},999),r.state=i.BUSY,r.trigger("TransportingStarted"),o.call(r)}function o(){var e=this,n,r=l-c;h>r&&(h=r),n=t.btoa(f.substr(c,h)),a.exec.call(e,"Transporter","receive",n,l)}var u,a,f,l,c,h;n.call(this),e.extend(this,{uid:e.guid("uid_"),state:i.IDLE,result:null,transport:function(t,n,i){var o=this;if(i=e.extend({chunk_size:204798},i),(u=i.chunk_size%3)&&(i.chunk_size+=3-u),h=i.chunk_size,r.call(this),f=t,l=t.length,"string"===e.typeOf(i)||i.ruid)s.call(o,n,this.connectRuntime(i));else{var a=function(e,t){o.unbind("RuntimeInit",a),s.call(o,n,t)};this.bind("RuntimeInit",a),this.connectRuntime(i)}},abort:function(){var e=this;e.state=i.IDLE,a&&(a.exec.call(e,"Transporter","clear"),e.trigger("TransportingAborted")),r.call(e)},destroy:function(){this.unbindAll(),a=null,this.disconnectRuntime(),r.call(this)}})}return i.IDLE=0,i.BUSY=1,i.DONE=2,i.prototype=r.instance,i}),r(A,[a,h,p,N,k,m,g,L,c,d,y,b,v],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function p(){function r(e){e||(e=this.getRuntime().exec.call(this,"Image","getInfo")),this.size=e.size,this.width=e.width,this.height=e.height,this.type=e.type,this.meta=e.meta,""===this.name&&(this.name=e.name)}function f(t){var r=e.typeOf(t);try{if(t instanceof p){if(!t.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);v.apply(this,arguments)}else if(t instanceof l){if(!~e.inArray(t.type,["image/jpeg","image/png"]))throw new n.ImageError(n.ImageError.WRONG_FORMAT);m.apply(this,arguments)}else if(-1!==e.inArray(r,["blob","file"]))f.call(this,new c(null,t),arguments[1]);else if("string"===r)/^data:[^;]*;base64,/.test(t)?f.call(this,new l(null,{data:t}),arguments[1]):g.apply(this,arguments);else{if("node"!==r||"img"!==t.nodeName.toLowerCase())throw new n.DOMException(n.DOMException.TYPE_MISMATCH_ERR);f.call(this,t.src,arguments[1])}}catch(i){this.trigger("error",i.code)}}function v(t,n){var r=this.connectRuntime(t.ruid);this.ruid=r.uid,r.exec.call(this,"Image","loadFromImage",t,"undefined"===e.typeOf(n)?!0:n)}function m(t,n){function r(e){i.ruid=e.uid,e.exec.call(i,"Image","loadFromBlob",t)}var i=this;i.name=t.name||"",t.isDetached()?(this.bind("RuntimeInit",function(e,t){r(t)}),n&&"string"==typeof n.required_caps&&(n.required_caps=s.parseCaps(n.required_caps)),this.connectRuntime(e.extend({required_caps:{access_image_binary:!0,resize_image:!0}},n))):r(this.connectRuntime(t.ruid))}function g(e,t){var n=this,r;r=new i,r.open("get",e),r.responseType="blob",r.onprogress=function(e){n.trigger(e)},r.onload=function(){m.call(n,r.response,!0)},r.onerror=function(e){n.trigger(e)},r.onloadend=function(){r.destroy()},r.bind("RuntimeError",function(e,t){n.trigger("RuntimeError",t)}),r.send(null,t)}o.call(this),e.extend(this,{uid:e.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){this.bind("Load Resize",function(){r.call(this)},999),this.convertEventPropsToHandlers(d),f.apply(this,arguments)},downsize:function(t){var r={width:this.width,height:this.height,crop:!1,preserveHeaders:!0};t="object"==typeof t?e.extend(r,t):e.extend(r,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]});try{if(!this.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);if(this.width>p.MAX_RESIZE_WIDTH||this.height>p.MAX_RESIZE_HEIGHT)throw new n.ImageError(n.ImageError.MAX_RESOLUTION_ERR);this.getRuntime().exec.call(this,"Image","downsize",t.width,t.height,t.crop,t.preserveHeaders)}catch(i){this.trigger("error",i.code)}},crop:function(e,t,n){this.downsize(e,t,!0,n)},getAsCanvas:function(){if(!a.can("create_canvas"))throw new n.RuntimeError(n.RuntimeError.NOT_SUPPORTED_ERR);var e=this.connectRuntime(this.ruid);return e.exec.call(this,"Image","getAsCanvas")},getAsBlob:function(e,t){if(!this.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);return e||(e="image/jpeg"),"image/jpeg"!==e||t||(t=90),this.getRuntime().exec.call(this,"Image","getAsBlob",e,t)},getAsDataURL:function(e,t){if(!this.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);return this.getRuntime().exec.call(this,"Image","getAsDataURL",e,t)},getAsBinaryString:function(e,t){var n=this.getAsDataURL(e,t);return h.atob(n.substring(n.indexOf("base64,")+7))},embed:function(r){function i(){if(a.can("create_canvas")){var t=o.getAsCanvas();if(t)return r.appendChild(t),t=null,o.destroy(),void s.trigger("embedded")}var i=o.getAsDataURL(f,l);if(!i)throw new n.ImageError(n.ImageError.WRONG_FORMAT);if(a.can("use_data_uri_of",i.length))r.innerHTML='<img src="'+i+'" width="'+o.width+'" height="'+o.height+'" />',o.destroy(),s.trigger("embedded");else{var c=new u;c.bind("TransportingComplete",function(){g=s.connectRuntime(this.result.ruid),s.bind("Embedded",function(){e.extend(g.getShimContainer().style,{top:"0px",left:"0px",width:o.width+"px",height:o.height+"px"}),g=null},999),g.exec.call(s,"ImageView","display",this.result.uid,v,m),o.destroy()}),c.transport(h.atob(i.substring(i.indexOf("base64,")+7)),f,e.extend({},d,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:r}))}}var s=this,o,f,l,c,d=arguments[1]||{},v=this.width,m=this.height,g;try{if(!(r=t.get(r)))throw new n.DOMException(n.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);if(this.width>p.MAX_RESIZE_WIDTH||this.height>p.MAX_RESIZE_HEIGHT)throw new n.ImageError(n.ImageError.MAX_RESOLUTION_ERR);if(f=d.type||this.type||"image/jpeg",l=d.quality||90,c="undefined"!==e.typeOf(d.crop)?d.crop:!1,d.width)v=d.width,m=d.height||v;else{var y=t.getSize(r);y.w&&y.h&&(v=y.w,m=y.h)}return o=new p,o.bind("Resize",function(){i.call(s)}),o.bind("Load",function(){o.downsize(v,m,c,!1)}),o.clone(this,!1),o}catch(b){this.trigger("error",b.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}})}var d=["progress","load","error","resize","embedded"];return p.MAX_RESIZE_WIDTH=6500,p.MAX_RESIZE_HEIGHT=6500,p.prototype=f.instance,p}),r(O,[a,p,m,c],function(e,t,n,r){function i(t){var i=this,u=n.capTest,a=n.capTrue,f=e.extend({access_binary:u(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return i.can("access_binary")&&!!o.Image},display_media:u(r.can("create_canvas")||r.can("use_data_uri_over32kb")),do_cors:u(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:u(function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&("IE"!==r.browser||r.version>9)}()),filter_by_extension:u(function(){return"Chrome"===r.browser&&r.version>=28||"IE"===r.browser&&r.version>=10}()),return_response_headers:a,return_response_type:function(e){return"json"===e&&window.JSON?!0:r.can("return_response_type",e)},return_status_code:a,report_upload_progress:u(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return i.can("access_binary")&&r.can("create_canvas")},select_file:function(){return r.can("use_fileinput")&&window.File},select_folder:function(){return i.can("select_file")&&"Chrome"===r.browser&&r.version>=21},select_multiple:function(){return!(!i.can("select_file")||"Safari"===r.browser&&"Windows"===r.os||"iOS"===r.os&&r.verComp(r.osVersion,"7.0.4","<"))},send_binary_string:u(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:u(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||i.can("send_binary_string")},slice_blob:u(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return i.can("slice_blob")&&i.can("send_multipart")},summon_file_dialog:u(function(){return"Firefox"===r.browser&&r.version>=4||"Opera"===r.browser&&r.version>=12||"IE"===r.browser&&r.version>=10||!!~e.inArray(r.browser,["Chrome","Safari"])}()),upload_filesize:a},arguments[2]);n.call(this,t,arguments[1]||s,f),e.extend(this,{init:function(){this.trigger("Init")},destroy:function(e){return function(){e.call(i),e=i=null}}(this.destroy)}),e.extend(this.getShim(),o)}var s="html5",o={};return n.addConstructor(s,i),o}),r(M,[O,y],function(e,t){function n(){function e(e,t,n){var r;if(!window.File.prototype.slice)return(r=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?r.call(e,t,n):null;try{return e.slice(),e.slice(t,n)}catch(i){return e.slice(t,n-t)}}this.slice=function(){return new t(this.getRuntime().uid,e.apply(this,arguments))}}return e.Blob=n}),r(_,[a],function(e){function t(){this.returnValue=!1}function n(){this.cancelBubble=!0}var r={},i="moxie_"+e.guid(),s=function(s,o,u,a){var f,l;o=o.toLowerCase(),s.addEventListener?(f=u,s.addEventListener(o,f,!1)):s.attachEvent&&(f=function(){var e=window.event;e.target||(e.target=e.srcElement),e.preventDefault=t,e.stopPropagation=n,u(e)},s.attachEvent("on"+o,f)),s[i]||(s[i]=e.guid()),r.hasOwnProperty(s[i])||(r[s[i]]={}),l=r[s[i]],l.hasOwnProperty(o)||(l[o]=[]),l[o].push({func:f,orig:u,key:a})},o=function(t,n,s){var o,u;if(n=n.toLowerCase(),t[i]&&r[t[i]]&&r[t[i]][n]){o=r[t[i]][n];for(var a=o.length-1;a>=0&&(o[a].orig!==s&&o[a].key!==s||(t.removeEventListener?t.removeEventListener(n,o[a].func,!1):t.detachEvent&&t.detachEvent("on"+n,o[a].func),o[a].orig=null,o[a].func=null,o.splice(a,1),s===u));a--);if(o.length||delete r[t[i]][n],e.isEmptyObj(r[t[i]])){delete r[t[i]];try{delete t[i]}catch(f){t[i]=u}}}},u=function(t,n){t&&t[i]&&e.each(r[t[i]],function(e,r){o(t,r,n)})};return{addEvent:s,removeEvent:o,removeAllEvents:u}}),r(D,[O,a,h,_,l,c],function(e,t,n,r,i,s){function o(){var e=[],o;t.extend(this,{init:function(u){var a=this,f=a.getRuntime(),l,c,h,p,d,v;o=u,e=[],h=o.accept.mimes||i.extList2mimes(o.accept,f.can("filter_by_extension")),c=f.getShimContainer(),c.innerHTML='<input id="'+f.uid+'" type="file" style="font-size:999px;opacity:0;"'+(o.multiple&&f.can("select_multiple")?"multiple":"")+(o.directory&&f.can("select_folder")?"webkitdirectory directory":"")+(h?' accept="'+h.join(",")+'"':"")+" />",l=n.get(f.uid),t.extend(l.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),p=n.get(o.browse_button),f.can("summon_file_dialog")&&("static"===n.getStyle(p,"position")&&(p.style.position="relative"),d=parseInt(n.getStyle(p,"z-index"),10)||1,p.style.zIndex=d,c.style.zIndex=d-1,r.addEvent(p,"click",function(e){var t=n.get(f.uid);t&&!t.disabled&&t.click(),e.preventDefault()},a.uid)),v=f.can("summon_file_dialog")?p:c,r.addEvent(v,"mouseover",function(){a.trigger("mouseenter")},a.uid),r.addEvent(v,"mouseout",function(){a.trigger("mouseleave")},a.uid),r.addEvent(v,"mousedown",function(){a.trigger("mousedown")},a.uid),r.addEvent(n.get(o.container),"mouseup",function(){a.trigger("mouseup")},a.uid),l.onchange=function m(){if(e=[],o.directory?t.each(this.files,function(t){"."!==t.name&&e.push(t)}):e=[].slice.call(this.files),"IE"!==s.browser&&"IEMobile"!==s.browser)this.value="";else{var n=this.cloneNode(!0);this.parentNode.replaceChild(n,this),n.onchange=m}a.trigger("change")},a.trigger({type:"ready",async:!0}),c=null},getFiles:function(){return e},disable:function(e){var t=this.getRuntime(),r;(r=n.get(t.uid))&&(r.disabled=!!e)},destroy:function(){var t=this.getRuntime(),i=t.getShim(),s=t.getShimContainer();r.removeAllEvents(s,this.uid),r.removeAllEvents(o&&n.get(o.container),this.uid),r.removeAllEvents(o&&n.get(o.browse_button),this.uid),s&&(s.innerHTML=""),i.removeInstance(this.uid),e=o=s=i=null}})}return e.FileInput=o}),r(P,[O,a,h,_,l],function(e,t,n,r,i){function s(){function e(e){if(!e.dataTransfer||!e.dataTransfer.types)return!1;var n=t.toArray(e.dataTransfer.types||[]);return-1!==t.inArray("Files",n)||-1!==t.inArray("public.file-url",n)||-1!==t.inArray("application/x-moz-file",n)}function s(e){for(var n=[],r=0;r<e.length;r++)[].push.apply(n,e[r].extensions.split(/\s*,\s*/));return-1===t.inArray("*",n)?n:[]}function o(e){if(!h.length)return!0;var n=i.getFileExtension(e.name);return!n||-1!==t.inArray(n,h)}function u(e,n){var r=[];t.each(e,function(e){var t=e.webkitGetAsEntry();if(t)if(t.isFile){var n=e.getAsFile();o(n)&&c.push(n)}else r.push(t)}),r.length?a(r,n):n()}function a(e,n){var r=[];t.each(e,function(e){r.push(function(t){f(e,t)})}),t.inSeries(r,function(){n()})}function f(e,t){e.isFile?e.file(function(e){o(e)&&c.push(e),t()},function(){t()}):e.isDirectory?l(e,t):t()}function l(e,t){function n(e){i.readEntries(function(t){t.length?([].push.apply(r,t),n(e)):e()},e)}var r=[],i=e.createReader();n(function(){a(r,t)})}var c=[],h=[],p;t.extend(this,{init:function(n){var i=this,a;p=n,h=s(p.accept),a=p.container,r.addEvent(a,"dragover",function(t){e(t)&&(t.preventDefault(),t.dataTransfer.dropEffect="copy")},i.uid),r.addEvent(a,"drop",function(n){e(n)&&(n.preventDefault(),c=[],n.dataTransfer.items&&n.dataTransfer.items[0].webkitGetAsEntry?u(n.dataTransfer.items,function(){i.trigger("drop")}):(t.each(n.dataTransfer.files,function(e){o(e)&&c.push(e)}),i.trigger("drop")))},i.uid),r.addEvent(a,"dragenter",function(e){i.trigger("dragenter")},i.uid),r.addEvent(a,"dragleave",function(e){i.trigger("dragleave")},i.uid)},getFiles:function(){return c},destroy:function(){r.removeAllEvents(p&&n.get(p.container),this.uid),c=h=p=null}})}return e.FileDrop=s}),r(H,[O,v,a],function(e,t,n){function r(){function e(e){return t.atob(e.substring(e.indexOf("base64,")+7))}var r,i=!1;n.extend(this,{read:function(e,t){var s=this;r=new window.FileReader,r.addEventListener("progress",function(e){s.trigger(e)}),r.addEventListener("load",function(e){s.trigger(e)}),r.addEventListener("error",function(e){s.trigger(e,r.error)}),r.addEventListener("loadend",function(){r=null}),"function"===n.typeOf(r[e])?(i=!1,r[e](t.getSource())):"readAsBinaryString"===e&&(i=!0,r.readAsDataURL(t.getSource()))},getResult:function(){return r&&r.result?i?e(r.result):r.result:null},abort:function(){r&&r.abort()},destroy:function(){r=null}})}return e.FileReader=r}),r(B,[O,a,l,T,b,y,C,p,c],function(e,t,n,r,i,s,o,u,a){function f(){function e(e,t){var n=this,r,i;r=t.getBlob().getSource(),i=new window.FileReader,i.onload=function(){t.append(t.getBlobName(),new s(null,{type:r.type,data:i.result})),h.send.call(n,e,t)},i.readAsBinaryString(r)}function f(){return!window.XMLHttpRequest||"IE"===a.browser&&a.version<8?function(){for(var e=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{return new ActiveXObject(e[t])}catch(n){}}():new window.XMLHttpRequest}function l(e){var t=e.responseXML,n=e.responseText;return"IE"===a.browser&&n&&t&&!t.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(e.getResponseHeader("Content-Type"))&&(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.validateOnParse=!1,t.loadXML(n)),t&&("IE"===a.browser&&0!==t.parseError||!t.documentElement||"parsererror"===t.documentElement.tagName)?null:t}function c(e){var t="----moxieboundary"+(new Date).getTime(),n="--",r="\r\n",i="",o=this.getRuntime();if(!o.can("send_binary_string"))throw new u.RuntimeError(u.RuntimeError.NOT_SUPPORTED_ERR);return p.setRequestHeader("Content-Type","multipart/form-data; boundary="+t),e.each(function(e,o){i+=e instanceof s?n+t+r+'Content-Disposition: form-data; name="'+o+'"; filename="'+unescape(encodeURIComponent(e.name||"blob"))+'"'+r+"Content-Type: "+(e.type||"application/octet-stream")+r+r+e.getSource()+r:n+t+r+'Content-Disposition: form-data; name="'+o+'"'+r+r+unescape(encodeURIComponent(e))+r}),i+=n+t+n+r}var h=this,p,d;t.extend(this,{send:function(n,i){var u=this,l="Mozilla"===a.browser&&a.version>=4&&a.version<7,h="Android Browser"===a.browser,v=!1;if(d=n.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),p=f(),p.open(n.method,n.url,n.async,n.user,n.password),i instanceof s)i.isDetached()&&(v=!0),i=i.getSource();else if(i instanceof o){if(i.hasBlob())if(i.getBlob().isDetached())i=c.call(u,i),v=!0;else if((l||h)&&"blob"===t.typeOf(i.getBlob().getSource())&&window.FileReader)return void e.call(u,n,i);if(i instanceof o){var m=new window.FormData;i.each(function(e,t){e instanceof s?m.append(t,e.getSource()):m.append(t,e)}),i=m}}p.upload?(n.withCredentials&&(p.withCredentials=!0),p.addEventListener("load",function(e){u.trigger(e)}),p.addEventListener("error",function(e){u.trigger(e)}),p.addEventListener("progress",function(e){u.trigger(e)}),p.upload.addEventListener("progress",function(e){u.trigger({type:"UploadProgress",loaded:e.loaded,total:e.total})})):p.onreadystatechange=function(){switch(p.readyState){case 1:break;case 2:break;case 3:var t,i;try{r.hasSameOrigin(n.url)&&(t=p.getResponseHeader("Content-Length")||0),p.responseText&&(i=p.responseText.length)}catch(s){t=i=0}u.trigger({type:"progress",lengthComputable:!!t,total:parseInt(t,10),loaded:i});break;case 4:p.onreadystatechange=function(){},u.trigger(0===p.status?"error":"load")}},t.isEmptyObj(n.headers)||t.each(n.headers,function(e,t){p.setRequestHeader(t,e)}),""!==n.responseType&&"responseType"in p&&(p.responseType="json"!==n.responseType||a.can("return_response_type","json")?n.responseType:"text"),v?p.sendAsBinary?p.sendAsBinary(i):!function(){for(var e=new Uint8Array(i.length),t=0;t<i.length;t++)e[t]=255&i.charCodeAt(t);p.send(e.buffer)}():p.send(i),u.trigger("loadstart")},getStatus:function(){try{if(p)return p.status}catch(e){}return 0},getResponse:function(e){var t=this.getRuntime();try{switch(e){case"blob":var r=new i(t.uid,p.response),s=p.getResponseHeader("Content-Disposition");if(s){var o=s.match(/filename=([\'\"'])([^\1]+)\1/);o&&(d=o[2])}return r.name=d,r.type||(r.type=n.getFileMime(d)),r;case"json":return a.can("return_response_type","json")?p.response:200===p.status&&window.JSON?JSON.parse(p.responseText):null;case"document":return l(p);default:return""!==p.responseText?p.responseText:null}}catch(u){return null}},getAllResponseHeaders:function(){try{return p.getAllResponseHeaders()}catch(e){}return""},abort:function(){p&&p.abort()},destroy:function(){h=d=null}})}return e.XMLHttpRequest=f}),r(j,[],function(){return function(){function e(e,t){var n=i?0:-8*(t-1),r=0,o;for(o=0;t>o;o++)r|=s.charCodeAt(e+o)<<Math.abs(n+8*o);return r}function n(e,t,n){n=3===arguments.length?n:s.length-t-1,s=s.substr(0,t)+e+s.substr(n+t)}function r(e,t,r){var s="",o=i?0:-8*(r-1),u;for(u=0;r>u;u++)s+=String.fromCharCode(t>>Math.abs(o+8*u)&255);n(s,e,r)}var i=!1,s;return{II:function(e){return e===t?i:void (i=e)},init:function(e){i=!1,s=e},SEGMENT:function(e,t,r){switch(arguments.length){case 1:return s.substr(e,s.length-e-1);case 2:return s.substr(e,t);case 3:n(r,e,t);break;default:return s}},BYTE:function(t){return e(t,1)},SHORT:function(t){return e(t,2)},LONG:function(n,i){return i===t?e(n,4):void r(n,i,4)},SLONG:function(t){var n=e(t,4);return n>2147483647?n-4294967296:n},STRING:function(t,n){var r="";for(n+=t;n>t;t++)r+=String.fromCharCode(e(t,1));return r}}}}),r(F,[j],function(e){return function t(n){var r=[],i,s,o,u=0;if(i=new e,i.init(n),65496===i.SHORT(0)){for(s=2;s<=n.length;)if(o=i.SHORT(s),o>=65488&&65495>=o)s+=2;else{if(65498===o||65497===o)break;u=i.SHORT(s+2)+2,o>=65505&&65519>=o&&r.push({hex:o,name:"APP"+(15&o),start:s,length:u,segment:i.SEGMENT(s,u)}),s+=u}return i.init(null),{headers:r,restore:function(e){var t,n;for(i.init(e),s=65504==i.SHORT(2)?4+i.SHORT(4):2,n=0,t=r.length;t>n;n++)i.SEGMENT(s,0,r[n].segment),s+=r[n].length;return e=i.SEGMENT(),i.init(null),e},strip:function(e){var n,r,s;for(r=new t(e),n=r.headers,r.purge(),i.init(e),s=n.length;s--;)i.SEGMENT(n[s].start,n[s].length,"");return e=i.SEGMENT(),i.init(null),e},get:function(e){for(var t=[],n=0,i=r.length;i>n;n++)r[n].name===e.toUpperCase()&&t.push(r[n].segment);return t},set:function(e,t){var n=[],i,s,o;for("string"==typeof t?n.push(t):n=t,i=s=0,o=r.length;o>i&&(r[i].name===e.toUpperCase()&&(r[i].segment=n[s],r[i].length=n[s].length,s++),!(s>=n.length));i++);},purge:function(){r=[],i.init(null),i=null}}}}}),r(I,[a,j],function(e,n){return function r(){function r(e,n){var r=o.SHORT(e),i,s,u,a,c,h,p,d,v=[],m={};for(i=0;r>i;i++)if(p=h=e+12*i+2,u=n[o.SHORT(p)],u!==t){switch(a=o.SHORT(p+=2),c=o.LONG(p+=2),p+=4,v=[],a){case 1:case 7:for(c>4&&(p=o.LONG(p)+f.tiffHeader),s=0;c>s;s++)v[s]=o.BYTE(p+s);break;case 2:c>4&&(p=o.LONG(p)+f.tiffHeader),m[u]=o.STRING(p,c-1);continue;case 3:for(c>2&&(p=o.LONG(p)+f.tiffHeader),s=0;c>s;s++)v[s]=o.SHORT(p+2*s);break;case 4:for(c>1&&(p=o.LONG(p)+f.tiffHeader),s=0;c>s;s++)v[s]=o.LONG(p+4*s);break;case 5:for(p=o.LONG(p)+f.tiffHeader,s=0;c>s;s++)v[s]=o.LONG(p+4*s)/o.LONG(p+4*s+4);break;case 9:for(p=o.LONG(p)+f.tiffHeader,s=0;c>s;s++)v[s]=o.SLONG(p+4*s);break;case 10:for(p=o.LONG(p)+f.tiffHeader,s=0;c>s;s++)v[s]=o.SLONG(p+4*s)/o.SLONG(p+4*s+4);break;default:continue}d=1==c?v[0]:v,m[u]=l.hasOwnProperty(u)&&"object"!=typeof d?l[u][d]:d}return m}function i(){var e=f.tiffHeader;return o.II(18761==o.SHORT(e)),42!==o.SHORT(e+=2)?!1:(f.IFD0=f.tiffHeader+o.LONG(e+=2),a=r(f.IFD0,u.tiff),"ExifIFDPointer"in a&&(f.exifIFD=f.tiffHeader+a.ExifIFDPointer,delete a.ExifIFDPointer),"GPSInfoIFDPointer"in a&&(f.gpsIFD=f.tiffHeader+a.GPSInfoIFDPointer,delete a.GPSInfoIFDPointer),!0)}function s(e,t,n){var r,i,s,a=0;if("string"==typeof t){var l=u[e.toLowerCase()];for(var c in l)if(l[c]===t){t=c;break}}r=f[e.toLowerCase()+"IFD"],i=o.SHORT(r);for(var h=0;i>h;h++)if(s=r+12*h+2,o.SHORT(s)==t){a=s+8;break}return a?(o.LONG(a,n),!0):!1}var o,u,a,f={},l;return o=new n,u={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},l={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(e){return f={tiffHeader:10},e!==t&&e.length?(o.init(e),65505===o.SHORT(0)&&"EXIF\0"===o.STRING(4,5).toUpperCase()?i():!1):!1},TIFF:function(){return a},EXIF:function(){var t;if(t=r(f.exifIFD,u.exif),t.ExifVersion&&"array"===e.typeOf(t.ExifVersion)){for(var n=0,i="";n<t.ExifVersion.length;n++)i+=String.fromCharCode(t.ExifVersion[n]);t.ExifVersion=i}return t},GPS:function(){var t;return t=r(f.gpsIFD,u.gps),t.GPSVersionID&&"array"===e.typeOf(t.GPSVersionID)&&(t.GPSVersionID=t.GPSVersionID.join(".")),t},setExif:function(e,t){return"PixelXDimension"!==e&&"PixelYDimension"!==e?!1:s("exif",e,t)},getBinary:function(){return o.SEGMENT()},purge:function(){o.init(null),o=a=null,f={}}}}}),r(q,[a,p,F,j,I],function(e,t,n,r,i){function s(s){function o(){for(var e=0,t,n;e<=a.length;){if(t=f.SHORT(e+=2),t>=65472&&65475>=t)return e+=5,{height:f.SHORT(e),width:f.SHORT(e+=2)};n=f.SHORT(e+=2),e+=n-2}return null}function u(){c&&l&&f&&(c.purge(),l.purge(),f.init(null),a=h=l=c=f=null)}var a,f,l,c,h,p;if(a=s,f=new r,f.init(a),65496!==f.SHORT(0))throw new t.ImageError(t.ImageError.WRONG_FORMAT);l=new n(s),c=new i,p=!!c.init(l.get("app1")[0]),h=o.call(this),e.extend(this,{type:"image/jpeg",size:a.length,width:h&&h.width||0,height:h&&h.height||0,setExif:function(t,n){return p?("object"===e.typeOf(t)?e.each(t,function(e,t){c.setExif(t,e)}):c.setExif(t,n),void l.set("app1",c.getBinary())):!1},writeHeaders:function(){return arguments.length?l.restore(arguments[0]):a=l.restore(a)},stripHeaders:function(e){return l.strip(e)},purge:function(){u.call(this)}}),p&&(this.meta={tiff:c.TIFF(),exif:c.EXIF(),gps:c.GPS()})}return s}),r(R,[p,a,j],function(e,t,n){function r(r){function i(){var e,t;return e=o.call(this,8),"IHDR"==e.type?(t=e.start,{width:a.LONG(t),height:a.LONG(t+=4)}):null}function s(){a&&(a.init(null),u=c=f=l=a=null)}function o(e){var t,n,r,i;return t=a.LONG(e),n=a.STRING(e+=4,4),r=e+=4,i=a.LONG(e+t),{length:t,type:n,start:r,CRC:i}}var u,a,f,l,c;u=r,a=new n,a.init(u),function(){var t=0,n=0,r=[35152,20039,3338,6666];for(n=0;n<r.length;n++,t+=2)if(r[n]!=a.SHORT(t))throw new e.ImageError(e.ImageError.WRONG_FORMAT)}(),c=i.call(this),t.extend(this,{type:"image/png",size:u.length,width:c.width,height:c.height,purge:function(){s.call(this)}}),s.call(this)}return r}),r(U,[a,p,q,R],function(e,t,n,r){return function(i){var s=[n,r],o;o=function(){for(var e=0;e<s.length;e++)try{return new s[e](i)}catch(n){}throw new t.ImageError(t.ImageError.WRONG_FORMAT)}(),e.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(e){return e},stripHeaders:function(e){return e},purge:function(){}}),e.extend(this,o),this.purge=function(){o.purge(),o=null}}}),r(z,[],function(){function e(e,r,i){var s=e.naturalWidth,o=e.naturalHeight,u=i.width,a=i.height,f=i.x||0,l=i.y||0,c=r.getContext("2d");t(e)&&(s/=2,o/=2);var h=1024,p=document.createElement("canvas");p.width=p.height=h;for(var d=p.getContext("2d"),v=n(e,s,o),m=0;o>m;){for(var g=m+h>o?o-m:h,y=0;s>y;){var b=y+h>s?s-y:h;d.clearRect(0,0,h,h),d.drawImage(e,-y,-m);var w=y*u/s+f<<0,E=Math.ceil(b*u/s),S=m*a/o/v+l<<0,x=Math.ceil(g*a/o/v);c.drawImage(p,0,0,b,g,w,S,E,x),y+=h}m+=h}p=d=null}function t(e){var t=e.naturalWidth,n=e.naturalHeight;if(t*n>1048576){var r=document.createElement("canvas");r.width=r.height=1;var i=r.getContext("2d");return i.drawImage(e,-t+1,0),0===i.getImageData(0,0,1,1).data[3]}return!1}function n(e,t,n){var r=document.createElement("canvas");r.width=1,r.height=n;var i=r.getContext("2d");i.drawImage(e,0,0);for(var s=i.getImageData(0,0,1,n).data,o=0,u=n,a=n;a>o;){var f=s[4*(a-1)+3];0===f?u=a:o=a,a=u+o>>1}r=null;var l=a/n;return 0===l?1:l}return{isSubsampled:t,renderTo:e}}),r(W,[O,a,p,v,b,U,z,l,c],function(e,t,n,r,i,s,o,u,a){function f(){function e(){if(!w&&!y)throw new n.ImageError(n.DOMException.INVALID_STATE_ERR);return w||y}function f(e){return r.atob(e.substring(e.indexOf("base64,")+7))}function l(e,t){return"data:"+(t||"")+";base64,"+r.btoa(e)}function c(e){var t=this;y=new Image,y.onerror=function(){m.call(this),t.trigger("error",n.ImageError.WRONG_FORMAT)},y.onload=function(){t.trigger("load")},y.src=/^data:[^;]*;base64,/.test(e)?e:l(e,S.type)}function h(e,t){var r=this,i;return window.FileReader?(i=new FileReader,i.onload=function(){t(this.result)},i.onerror=function(){r.trigger("error",n.ImageError.WRONG_FORMAT)},i.readAsDataURL(e),void 0):t(e.getAsDataURL())}function p(n,r,i,s){var o=this,u,a,f=0,l=0,c,h,p,m;if(T=s,m=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==t.inArray(m,[5,6,7,8])){var g=n;n=r,r=g}return c=e(),i?(n=Math.min(n,c.width),r=Math.min(r,c.height),u=Math.max(n/c.width,r/c.height)):u=Math.min(n/c.width,r/c.height),u>1&&!i&&s?void this.trigger("Resize"):(w||(w=document.createElement("canvas")),h=Math.round(c.width*u),p=Math.round(c.height*u),i?(w.width=n,w.height=r,h>n&&(f=Math.round((h-n)/2)),p>r&&(l=Math.round((p-r)/2))):(w.width=h,w.height=p),T||v(w.width,w.height,m),d.call(this,c,w,-f,-l,h,p),this.width=w.width,this.height=w.height,x=!0,void o.trigger("Resize"))}function d(e,t,n,r,i,s){if("iOS"===a.OS)o.renderTo(e,t,{width:i,height:s,x:n,y:r});else{var u=t.getContext("2d");u.drawImage(e,n,r,i,s)}}function v(e,t,n){switch(n){case 5:case 6:case 7:case 8:w.width=t,w.height=e;break;default:w.width=e,w.height=t}var r=w.getContext("2d");switch(n){case 2:r.translate(e,0),r.scale(-1,1);break;case 3:r.translate(e,t),r.rotate(Math.PI);break;case 4:r.translate(0,t),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-t);break;case 7:r.rotate(.5*Math.PI),r.translate(e,-t),r.scale(-1,1);break;case 8:r.rotate(-0.5*Math.PI),r.translate(-e,0)}}function m(){b&&(b.purge(),b=null),E=y=w=S=null,x=!1}var g=this,y,b,w,E,S,x=!1,T=!0;t.extend(this,{loadFromBlob:function(e){var t=this,r=t.getRuntime(),i=arguments.length>1?arguments[1]:!0;if(!r.can("access_binary"))throw new n.RuntimeError(n.RuntimeError.NOT_SUPPORTED_ERR);return S=e,e.isDetached()?(E=e.getSource(),void c.call(this,E)):void h.call(this,e.getSource(),function(e){i&&(E=f(e)),c.call(t,e)})},loadFromImage:function(e,t){this.meta=e.meta,S=new i(null,{name:e.name,size:e.size,type:e.type}),c.call(this,t?E=e.getAsBinaryString():e.getAsDataURL())},getInfo:function(){var t=this.getRuntime(),n;return!b&&E&&t.can("access_image_binary")&&(b=new s(E)),n={width:e().width||0,height:e().height||0,type:S.type||u.getFileMime(S.name),size:E&&E.length||S.size||0,name:S.name||"",meta:b&&b.meta||this.meta||{}}},downsize:function(){p.apply(this,arguments)},getAsCanvas:function(){return w&&(w.id=this.uid+"_canvas"),w},getAsBlob:function(e,t){return e!==this.type&&p.call(this,this.width,this.height,!1),new i(null,{name:S.name||"",type:e,data:g.getAsBinaryString.call(this,e,t)})},getAsDataURL:function(e){var t=arguments[1]||90;if(!x)return y.src;if("image/jpeg"!==e)return w.toDataURL("image/png");try{return w.toDataURL("image/jpeg",t/100)}catch(n){return w.toDataURL("image/jpeg")}},getAsBinaryString:function(e,t){if(!x)return E||(E=f(g.getAsDataURL(e,t))),E;if("image/jpeg"!==e)E=f(g.getAsDataURL(e,t));else{var n;t||(t=90);try{n=w.toDataURL("image/jpeg",t/100)}catch(r){n=w.toDataURL("image/jpeg")}E=f(n),b&&(E=b.stripHeaders(E),T&&(b.meta&&b.meta.exif&&b.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),E=b.writeHeaders(E)),b.purge(),b=null)}return x=!1,E},destroy:function(){g=null,m.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return e.Image=f}),r(X,[a,c,h,p,m],function(e,t,n,r,i){function s(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1])}function o(o){var f=this,l;o=e.extend({swf_url:t.swf_url},o),i.call(this,o,u,{access_binary:function(e){return e&&"browser"===f.mode},access_image_binary:function(e){return e&&"browser"===f.mode},display_media:i.capTrue,do_cors:i.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===f.mode},resize_image:i.capTrue,return_response_headers:!1,return_response_type:function(t){return"json"===t&&window.JSON?!0:!e.arrayDiff(t,["","text","document"])||"browser"===f.mode},return_status_code:function(t){return"browser"===f.mode||!e.arrayDiff(t,[200,404])},select_file:i.capTrue,select_multiple:i.capTrue,send_binary_string:function(e){return e&&"browser"===f.mode},send_browser_cookies:function(e){return e&&"browser"===f.mode},send_custom_headers:function(e){return e&&"browser"===f.mode},send_multipart:i.capTrue,slice_blob:function(e){return e&&"browser"===f.mode},stream_upload:function(e){return e&&"browser"===f.mode},summon_file_dialog:!1,upload_filesize:function(t){return e.parseSizeStr(t)<=2097152||"client"===f.mode},use_http_method:function(t){return!e.arrayDiff(t,["GET","POST"])}},{access_binary:function(e){return e?"browser":"client"},access_image_binary:function(e){return e?"browser":"client"},report_upload_progress:function(e){return e?"browser":"client"},return_response_type:function(t){return e.arrayDiff(t,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(t){return e.arrayDiff(t,[200,404])?"browser":["client","browser"]},send_binary_string:function(e){return e?"browser":"client"},send_browser_cookies:function(e){return e?"browser":"client"},send_custom_headers:function(e){return e?"browser":"client"},stream_upload:function(e){return e?"client":"browser"},upload_filesize:function(t){return e.parseSizeStr(t)>=2097152?"client":"browser"}},"client"),s()<10&&(this.mode=!1),e.extend(this,{getShim:function(){return n.get(this.uid)},shimExec:function(e,t){var n=[].slice.call(arguments,2);return f.getShim().exec(this.uid,e,t,n)},init:function(){var n,i,s;s=this.getShimContainer(),e.extend(s.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),n='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+o.swf_url+'" ',"IE"===t.browser&&(n+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),n+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+o.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+t.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===t.browser?(i=document.createElement("div"),s.appendChild(i),i.outerHTML=n,i=s=null):s.innerHTML=n,l=setTimeout(function(){f&&!f.initialized&&f.trigger("Error",new r.RuntimeError(r.RuntimeError.NOT_INIT_ERR))},5e3)},destroy:function(e){return function(){e.call(f),clearTimeout(l),o=l=e=f=null}}(this.destroy)},a)}var u="flash",a={};return i.addConstructor(u,o),a}),r(V,[X,y],function(e,t){var n={slice:function(e,n,r,i){var s=this.getRuntime();return 0>n?n=Math.max(e.size+n,0):n>0&&(n=Math.min(n,e.size)),0>r?r=Math.max(e.size+r,0):r>0&&(r=Math.min(r,e.size)),e=s.shimExec.call(this,"Blob","slice",n,r,i||""),e&&(e=new t(s.uid,e)),e}};return e.Blob=n}),r($,[X],function(e){var t={init:function(e){this.getRuntime().shimExec.call(this,"FileInput","init",{name:e.name,accept:e.accept,multiple:e.multiple}),this.trigger("ready")}};return e.FileInput=t}),r(J,[X,v],function(e,t){function n(e,n){switch(n){case"readAsText":return t.atob(e,"utf8");case"readAsBinaryString":return t.atob(e);case"readAsDataURL":return e}return null}var r="",i={read:function(e,t){var i=this,s=i.getRuntime();return"readAsDataURL"===e&&(r="data:"+(t.type||"")+";base64,"),i.bind("Progress",function(t,i){i&&(r+=n(i,e))}),s.shimExec.call(this,"FileReader","readAsBase64",t.uid)},getResult:function(){return r},destroy:function(){r=null}};return e.FileReader=i}),r(K,[X,v],function(e,t){function n(e,n){switch(n){case"readAsText":return t.atob(e,"utf8");case"readAsBinaryString":return t.atob(e);case"readAsDataURL":return e}return null}var r={read:function(e,t){var r,i=this.getRuntime();return(r=i.shimExec.call(this,"FileReaderSync","readAsBase64",t.uid))?("readAsDataURL"===e&&(r="data:"+(t.type||"")+";base64,"+r),n(r,e,t.type)):null}};return e.FileReaderSync=r}),r(Q,[X,a,y,b,N,C,L],function(e,t,n,r,i,s,o){var u={send:function(e,r){function i(){e.transport=l.mode,l.shimExec.call(f,"XMLHttpRequest","send",e,r)}function u(e,t){l.shimExec.call(f,"XMLHttpRequest","appendBlob",e,t.uid),r=null,i()}function a(e,t){var n=new o;n.bind("TransportingComplete",function(){t(this.result)}),n.transport(e.getSource(),e.type,{ruid:l.uid})}var f=this,l=f.getRuntime();if(t.isEmptyObj(e.headers)||t.each(e.headers,function(e,t){l.shimExec.call(f,"XMLHttpRequest","setRequestHeader",t,e.toString())}),r instanceof s){var c;if(r.each(function(e,t){e instanceof n?c=t:l.shimExec.call(f,"XMLHttpRequest","append",t,e)}),r.hasBlob()){var h=r.getBlob();h.isDetached()?a(h,function(e){h.destroy(),u(c,e)}):u(c,h)}else r=null,i()}else r instanceof n?r.isDetached()?a(r,function(e){r.destroy(),r=e.uid,i()}):(r=r.uid,i()):i()},getResponse:function(e){var n,s,o=this.getRuntime();if(s=o.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(s=new r(o.uid,s),"blob"===e)return s;try{if(n=new i,~t.inArray(e,["","text"]))return n.readAsText(s);if("json"===e&&window.JSON)return JSON.parse(n.readAsText(s))}finally{s.destroy()}}return null},abort:function(e){var t=this.getRuntime();t.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return e.XMLHttpRequest=u}),r(G,[X,y],function(e,t){var n={getAsBlob:function(e){var n=this.getRuntime(),r=n.shimExec.call(this,"Transporter","getAsBlob",e);return r?new t(n.uid,r):null}};return e.Transporter=n}),r(Y,[X,a,L,y,N],function(e,t,n,r,i){var s={loadFromBlob:function(e){function t(e){i.shimExec.call(r,"Image","loadFromBlob",e.uid),r=i=null}var r=this,i=r.getRuntime();if(e.isDetached()){var s=new n;s.bind("TransportingComplete",function(){t(s.result.getSource())}),s.transport(e.getSource(),e.type,{ruid:i.uid})}else t(e.getSource())},loadFromImage:function(e){var t=this.getRuntime();return t.shimExec.call(this,"Image","loadFromImage",e.uid)},getAsBlob:function(e,t){var n=this.getRuntime(),i=n.shimExec.call(this,"Image","getAsBlob",e,t);return i?new r(n.uid,i):null},getAsDataURL:function(){var e=this.getRuntime(),t=e.Image.getAsBlob.apply(this,arguments),n;return t?(n=new i,n.readAsDataURL(t)):null}};return e.Image=s}),r(Z,[a,c,h,p,m],function(e,t,n,r,i){function s(e){var t=!1,n=null,r,i,s,o,u,a=0;try{try{n=new ActiveXObject("AgControl.AgControl"),n.IsVersionSupported(e)&&(t=!0),n=null}catch(f){var l=navigator.plugins["Silverlight Plug-In"];if(l){for(r=l.description,"1.0.30226.2"===r&&(r="2.0.30226.2"),i=r.split(".");i.length>3;)i.pop();for(;i.length<4;)i.push(0);for(s=e.split(".");s.length>4;)s.pop();do o=parseInt(s[a],10),u=parseInt(i[a],10),a++;while(a<s.length&&o===u);u>=o&&!isNaN(o)&&(t=!0)}}}catch(c){t=!1}return t}function o(o){var f=this,l;o=e.extend({xap_url:t.xap_url},o),i.call(this,o,u,{access_binary:i.capTrue,access_image_binary:i.capTrue,display_media:i.capTrue,do_cors:i.capTrue,drag_and_drop:!1,report_upload_progress:i.capTrue,resize_image:i.capTrue,return_response_headers:function(e){return e&&"client"===f.mode},return_response_type:function(e){return"json"!==e?!0:!!window.JSON},return_status_code:function(t){return"client"===f.mode||!e.arrayDiff(t,[200,404])},select_file:i.capTrue,select_multiple:i.capTrue,send_binary_string:i.capTrue,send_browser_cookies:function(e){return e&&"browser"===f.mode},send_custom_headers:function(e){return e&&"client"===f.mode},send_multipart:i.capTrue,slice_blob:i.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:i.capTrue,use_http_method:function(t){return"client"===f.mode||!e.arrayDiff(t,["GET","POST"])}},{return_response_headers:function(e){return e?"client":"browser"},return_status_code:function(t){return e.arrayDiff(t,[200,404])?"client":["client","browser"]},send_browser_cookies:function(e){return e?"browser":"client"},send_custom_headers:function(e){return e?"client":"browser"},use_http_method:function(t){return e.arrayDiff(t,["GET","POST"])?"client":["client","browser"]}}),s("2.0.31005.0")&&"Opera"!==t.browser||(this.mode=!1),e.extend(this,{getShim:function(){return n.get(this.uid).content.Moxie},shimExec:function(e,t){var n=[].slice.call(arguments,2);return f.getShim().exec(this.uid,e,t,n)},init:function(){var e;e=this.getShimContainer(),e.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+o.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+t.global_event_dispatcher+'"/></object>',l=setTimeout(function(){f&&!f.initialized&&f.trigger("Error",new r.RuntimeError(r.RuntimeError.NOT_INIT_ERR))},"Windows"!==t.OS?1e4:5e3)},destroy:function(e){return function(){e.call(f),clearTimeout(l),o=l=e=f=null}}(this.destroy)},a)}var u="silverlight",a={};return i.addConstructor(u,o),a}),r(et,[Z,a,V],function(e,t,n){return e.Blob=t.extend({},n)}),r(tt,[Z],function(e){var t={init:function(e){function t(e){for(var t="",n=0;n<e.length;n++)t+=(""!==t?"|":"")+e[n].title+" | *."+e[n].extensions.replace(/,/g,";*.");return t}this.getRuntime().shimExec.call(this,"FileInput","init",t(e.accept),e.name,e.multiple),this.trigger("ready")}};return e.FileInput=t}),r(nt,[Z,h,_],function(e,t,n){var r={init:function(){var e=this,r=e.getRuntime(),i;return i=r.getShimContainer(),n.addEvent(i,"dragover",function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"},e.uid),n.addEvent(i,"dragenter",function(e){e.preventDefault();var n=t.get(r.uid).dragEnter(e);n&&e.stopPropagation()},e.uid),n.addEvent(i,"drop",function(e){e.preventDefault();var n=t.get(r.uid).dragDrop(e);n&&e.stopPropagation()},e.uid),r.shimExec.call(this,"FileDrop","init")}};return e.FileDrop=r}),r(rt,[Z,a,J],function(e,t,n){return e.FileReader=t.extend({},n)}),r(it,[Z,a,K],function(e,t,n){return e.FileReaderSync=t.extend({},n)}),r(st,[Z,a,Q],function(e,t,n){return e.XMLHttpRequest=t.extend({},n)}),r(ot,[Z,a,G],function(e,t,n){return e.Transporter=t.extend({},n)}),r(ut,[Z,a,Y],function(e,t,n){return e.Image=t.extend({},n,{getInfo:function(){var e=this.getRuntime(),n=["tiff","exif","gps"],r={meta:{}},i=e.shimExec.call(this,"Image","getInfo");return i.meta&&t.each(n,function(e){var t=i.meta[e],n,s,o,u;if(t&&t.keys)for(r.meta[e]={},s=0,o=t.keys.length;o>s;s++)n=t.keys[s],u=t[n],u&&(/^(\d|[1-9]\d+)$/.test(u)?u=parseInt(u,10):/^\d*\.\d+$/.test(u)&&(u=parseFloat(u)),r.meta[e][n]=u)}),r.width=parseInt(i.width,10),r.height=parseInt(i.height,10),r.size=parseInt(i.size,10),r.type=i.type,r.name=i.name,r}})}),r(at,[a,p,m,c],function(e,t,n,r){function i(t){var i=this,u=n.capTest,a=n.capTrue;n.call(this,t,s,{access_binary:u(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:u(o.Image&&(r.can("create_canvas")||r.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:u(function(){return"Chrome"===r.browser&&r.version>=28||"IE"===r.browser&&r.version>=10}()),resize_image:function(){return o.Image&&i.can("access_binary")&&r.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(t){return"json"===t&&window.JSON?!0:!!~e.inArray(t,["text","document",""])},return_status_code:function(t){return!e.arrayDiff(t,[200,404])},select_file:function(){return r.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return i.can("select_file")},summon_file_dialog:u(function(){return"Firefox"===r.browser&&r.version>=4||"Opera"===r.browser&&r.version>=12||!!~e.inArray(r.browser,["Chrome","Safari"])}()),upload_filesize:a,use_http_method:function(t){return!e.arrayDiff(t,["GET","POST"])}}),e.extend(this,{init:function(){this.trigger("Init")},destroy:function(e){return function(){e.call(i),e=i=null}}(this.destroy)}),e.extend(this.getShim(),o)}var s="html4",o={};return n.addConstructor(s,i),o}),r(ft,[at,a,h,_,l,c],function(e,t,n,r,i,s){function o(){function e(){var i=this,l=i.getRuntime(),c,h,p,d,v,m;m=t.guid("uid_"),c=l.getShimContainer(),o&&(p=n.get(o+"_form"),p&&t.extend(p.style,{top:"100%"})),d=document.createElement("form"),d.setAttribute("id",m+"_form"),d.setAttribute("method","post"),d.setAttribute("enctype","multipart/form-data"),d.setAttribute("encoding","multipart/form-data"),t.extend(d.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),v=document.createElement("input"),v.setAttribute("id",m),v.setAttribute("type","file"),v.setAttribute("name",f.name||"Filedata"),v.setAttribute("accept",a.join(",")),t.extend(v.style,{fontSize:"999px",opacity:0}),d.appendChild(v),c.appendChild(d),t.extend(v.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===s.browser&&s.version<10&&t.extend(v.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),v.onchange=function(){var t;this.value&&(t=this.files?this.files[0]:{name:this.value},u=[t],this.onchange=function(){},e.call(i),i.bind("change",function r(){var e=n.get(m),t=n.get(m+"_form"),s;i.unbind("change",r),i.files.length&&e&&t&&(s=i.files[0],e.setAttribute("id",s.uid),t.setAttribute("id",s.uid+"_form"),t.setAttribute("target",s.uid+"_iframe")),e=t=null},998),v=d=null,i.trigger("change"))},l.can("summon_file_dialog")&&(h=n.get(f.browse_button),r.removeEvent(h,"click",i.uid),r.addEvent(h,"click",function(e){v&&!v.disabled&&v.click(),e.preventDefault()},i.uid)),o=m,c=p=h=null}var o,u=[],a=[],f;t.extend(this,{init:function(t){var s=this,o=s.getRuntime(),u;f=t,a=t.accept.mimes||i.extList2mimes(t.accept,o.can("filter_by_extension")),u=o.getShimContainer(),function(){var e,i,a;e=n.get(t.browse_button),o.can("summon_file_dialog")&&("static"===n.getStyle(e,"position")&&(e.style.position="relative"),i=parseInt(n.getStyle(e,"z-index"),10)||1,e.style.zIndex=i,u.style.zIndex=i-1),a=o.can("summon_file_dialog")?e:u,r.addEvent(a,"mouseover",function(){s.trigger("mouseenter")},s.uid),r.addEvent(a,"mouseout",function(){s.trigger("mouseleave")},s.uid),r.addEvent(a,"mousedown",function(){s.trigger("mousedown")},s.uid),r.addEvent(n.get(t.container),"mouseup",function(){s.trigger("mouseup")},s.uid),e=null}(),e.call(this),u=null,s.trigger({type:"ready",async:!0})},getFiles:function(){return u},disable:function(e){var t;(t=n.get(o))&&(t.disabled=!!e)},destroy:function(){var e=this.getRuntime(),t=e.getShim(),i=e.getShimContainer();r.removeAllEvents(i,this.uid),r.removeAllEvents(f&&n.get(f.container),this.uid),r.removeAllEvents(f&&n.get(f.browse_button),this.uid),i&&(i.innerHTML=""),t.removeInstance(this.uid),o=u=a=f=i=t=null}})}return e.FileInput=o}),r(lt,[at,H],function(e,t){return e.FileReader=t}),r(ct,[at,a,h,T,p,_,y,C],function(e,t,n,r,i,s,o,u){function a(){function e(e){var t=this,r,i,o,u,a=!1;if(l){if(r=l.id.replace(/_iframe$/,""),i=n.get(r+"_form")){for(o=i.getElementsByTagName("input"),u=o.length;u--;)switch(o[u].getAttribute("type")){case"hidden":o[u].parentNode.removeChild(o[u]);break;case"file":a=!0}o=[],a||i.parentNode.removeChild(i),i=null}setTimeout(function(){s.removeEvent(l,"load",t.uid),l.parentNode&&l.parentNode.removeChild(l);var n=t.getRuntime().getShimContainer();n.children.length||n.parentNode.removeChild(n),n=l=null,e()},1)}}var a,f,l;t.extend(this,{send:function(c,h){function p(){var n=v.getShimContainer()||document.body,i=document.createElement("div");i.innerHTML='<iframe id="'+m+'_iframe" name="'+m+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',l=i.firstChild,n.appendChild(l),s.addEvent(l,"load",function(){var n;try{n=l.contentWindow.document||l.contentDocument||window.frames[l.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(n.title)?a=n.title.replace(/^(\d+).*$/,"$1"):(a=200,f=t.trim(n.body.innerHTML),d.trigger({type:"progress",loaded:f.length,total:f.length}),b&&d.trigger({type:"uploadprogress",loaded:b.size||1025,total:b.size||1025}))}catch(i){if(!r.hasSameOrigin(c.url))return void e.call(d,function(){d.trigger("error")});a=404}e.call(d,function(){d.trigger("load")})},d.uid)}var d=this,v=d.getRuntime(),m,g,y,b;if(a=f=null,h instanceof u&&h.hasBlob()){if(b=h.getBlob(),m=b.uid,y=n.get(m),g=n.get(m+"_form"),!g)throw new i.DOMException(i.DOMException.NOT_FOUND_ERR)}else m=t.guid("uid_"),g=document.createElement("form"),g.setAttribute("id",m+"_form"),g.setAttribute("method",c.method),g.setAttribute("enctype","multipart/form-data"),g.setAttribute("encoding","multipart/form-data"),g.setAttribute("target",m+"_iframe"),v.getShimContainer().appendChild(g);h instanceof u&&h.each(function(e,n){if(e instanceof o)y&&y.setAttribute("name",n);else{var r=document.createElement("input");t.extend(r,{type:"hidden",name:n,value:e}),y?g.insertBefore(r,y):g.appendChild(r)}}),g.setAttribute("action",c.url),p(),g.submit(),d.trigger("loadstart")},getStatus:function(){return a},getResponse:function(e){if("json"===e&&"string"===t.typeOf(f)&&window.JSON)try{return JSON.parse(f.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(n){return null}return f},abort:function(){var t=this;l&&l.contentWindow&&(l.contentWindow.stop?l.contentWindow.stop():l.contentWindow.document.execCommand?l.contentWindow.document.execCommand("Stop"):l.src="about:blank"),e.call(this,function(){t.dispatchEvent("abort")})}})}return e.XMLHttpRequest=a}),r(ht,[at,W],function(e,t){return e.Image=t}),o([a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,_])}(this),function(e){var t={},n=e.moxie.core.utils.Basic.inArray;return function r(e){var i,s;for(i in e)s=typeof e[i],s==="object"&&!~n(i,["Exceptions","Env","Mime"])?r(e[i]):s==="function"&&(t[i]=e[i])}(e.moxie),t.Env=e.moxie.core.utils.Env,t.Mime=e.moxie.core.utils.Mime,t.Exceptions=e.moxie.core.Exceptions,e.mOxie=t,e.o||(e.o=t),t}(this),function(e,t,n){function r(e){function t(e,t,n){var i={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};i[e]?r[i[e]]=t:n||(r[e]=t)}var n=e.required_features,r={};if(typeof n=="string")o.each(n.split(/\s*,\s*/),function(e){t(e,!0)});else if(typeof n=="object")o.each(n,function(e,n){t(n,e)});else if(n===!0){e.chunk_size>0&&(r.slice_blob=!0);if(e.resize.enabled||!e.multipart)r.send_binary_string=!0;o.each(e,function(e,n){t(n,!!e,!0)})}return r}var i=e.setTimeout,s={},o={VERSION:"2.1.2",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:t.mimes,ua:t.ua,typeOf:t.typeOf,extend:t.extend,guid:t.guid,get:function(e){var n=[],r;t.typeOf(e)!=="array"&&(e=[e]);var i=e.length;while(i--)r=t.get(e[i]),r&&n.push(r);return n.length?n:null},each:t.each,getPos:t.getPos,getSize:t.getSize,xmlEncode:function(e){var t={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},n=/[<>&\"\']/g;return e?(""+e).replace(n,function(e){return t[e]?"&"+t[e]+";":e}):e},toArray:t.toArray,inArray:t.inArray,addI18n:t.addI18n,translate:t.translate,isEmptyObj:t.isEmptyObj,hasClass:t.hasClass,addClass:t.addClass,removeClass:t.removeClass,getStyle:t.getStyle,addEvent:t.addEvent,removeEvent:t.removeEvent,removeAllEvents:t.removeAllEvents,cleanName:function(e){var t,n;n=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(t=0;t<n.length;t+=2)e=e.replace(n[t],n[t+1]);return e=e.replace(/\s+/g,"_"),e=e.replace(/[^a-z0-9_\-\.]+/gi,""),e},buildUrl:function(e,t){var n="";return o.each(t,function(e,t){n+=(n?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),n&&(e+=(e.indexOf("?")>0?"&":"?")+n),e},formatSize:function(e){function t(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}if(e===n||/\D/.test(e))return o.translate("N/A");var r=Math.pow(1024,4);return e>r?t(e/r,1)+" "+o.translate("tb"):e>(r/=1024)?t(e/r,1)+" "+o.translate("gb"):e>(r/=1024)?t(e/r,1)+" "+o.translate("mb"):e>1024?Math.round(e/1024)+" "+o.translate("kb"):e+" "+o.translate("b")},parseSize:t.parseSizeStr,predictRuntime:function(e,n){var r,i;return r=new o.Uploader(e),i=t.Runtime.thatCan(r.getOption().required_features,n||e.runtimes),r.destroy(),i},addFileFilter:function(e,t){s[e]=t}};o.addFileFilter("mime_types",function(e,t,n){e.length&&!e.regexp.test(t.name)?(this.trigger("Error",{code:o.FILE_EXTENSION_ERROR,message:o.translate("File extension error."),file:t}),n(!1)):n(!0)}),o.addFileFilter("max_file_size",function(e,t,n){var r;e=o.parseSize(e),t.size!==r&&e&&t.size>e?(this.trigger("Error",{code:o.FILE_SIZE_ERROR,message:o.translate("File size error."),file:t}),n(!1)):n(!0)}),o.addFileFilter("prevent_duplicates",function(e,t,n){if(e){var r=this.files.length;while(r--)if(t.name===this.files[r].name&&t.size===this.files[r].size){this.trigger("Error",{code:o.FILE_DUPLICATE_ERROR,message:o.translate("Duplicate file error."),file:t}),n(!1);return}}n(!0)}),o.Uploader=function(e){function u(){var e,t=0,n;if(this.state==o.STARTED){for(n=0;n<C.length;n++)!e&&C[n].status==o.QUEUED?(e=C[n],this.trigger("BeforeUpload",e)&&(e.status=o.UPLOADING,this.trigger("UploadFile",e))):t++;t==C.length&&(this.state!==o.STOPPED&&(this.state=o.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",C))}}function a(e){e.percent=e.size>0?Math.ceil(e.loaded/e.size*100):100,f()}function f(){var e,t;M.reset();for(e=0;e<C.length;e++)t=C[e],t.size!==n?(M.size+=t.origSize,M.loaded+=t.loaded*t.origSize/t.size):M.size=n,t.status==o.DONE?M.uploaded++:t.status==o.FAILED?M.failed++:M.queued++;M.size===n?M.percent=C.length>0?Math.ceil(M.uploaded/C.length*100):0:(M.bytesPerSec=Math.ceil(M.loaded/((+(new Date)-O||1)/1e3)),M.percent=M.size>0?Math.ceil(M.loaded/M.size*100):0)}function l(){var e=L[0]||A[0];return e?e.getRuntime().uid:!1}function c(e,n){if(e.ruid){var r=t.Runtime.getInfo(e.ruid);if(r)return r.can(n)}return!1}function h(){this.bind("FilesAdded FilesRemoved",function(e){e.trigger("QueueChanged"),e.refresh()}),this.bind("CancelUpload",w),this.bind("BeforeUpload",m),this.bind("UploadFile",g),this.bind("UploadProgress",y),this.bind("StateChanged",b),this.bind("QueueChanged",f),this.bind("Error",S),this.bind("FileUploaded",E),this.bind("Destroy",x)}function p(e,n){var r=this,i=0,s=[],u={runtime_order:e.runtimes,required_caps:e.required_features,preferred_caps:k,swf_url:e.flash_swf_url,xap_url:e.silverlight_xap_url};o.each(e.runtimes.split(/\s*,\s*/),function(t){e[t]&&(u[t]=e[t])}),e.browse_button&&o.each(e.browse_button,function(n){s.push(function(s){var a=new t.FileInput(o.extend({},u,{accept:e.filters.mime_types,name:e.file_data_name,multiple:e.multi_selection,container:e.container,browse_button:n}));a.onready=function(){var e=t.Runtime.getInfo(this.ruid);t.extend(r.features,{chunks:e.can("slice_blob"),multipart:e.can("send_multipart"),multi_selection:e.can("select_multiple")}),i++,L.push(this),s()},a.onchange=function(){r.addFile(this.files)},a.bind("mouseenter mouseleave mousedown mouseup",function(r){_||(e.browse_button_hover&&("mouseenter"===r.type?t.addClass(n,e.browse_button_hover):"mouseleave"===r.type&&t.removeClass(n,e.browse_button_hover)),e.browse_button_active&&("mousedown"===r.type?t.addClass(n,e.browse_button_active):"mouseup"===r.type&&t.removeClass(n,e.browse_button_active)))}),a.bind("mousedown",function(){r.trigger("Browse")}),a.bind("error runtimeerror",function(){a=null,s()}),a.init()})}),e.drop_element&&o.each(e.drop_element,function(e){s.push(function(n){var s=new t.FileDrop(o.extend({},u,{drop_zone:e}));s.onready=function(){var e=t.Runtime.getInfo(this.ruid);r.features.dragdrop=e.can("drag_and_drop"),i++,A.push(this),n()},s.ondrop=function(){r.addFile(this.files)},s.bind("error runtimeerror",function(){s=null,n()}),s.init()})}),t.inSeries(s,function(){typeof n=="function"&&n(i)})}function d(e,r,i){var s=new t.Image;try{s.onload=function(){if(r.width>this.width&&r.height>this.height&&r.quality===n&&r.preserve_headers&&!r.crop)return this.destroy(),i(e);s.downsize(r.width,r.height,r.crop,r.preserve_headers)},s.onresize=function(){i(this.getAsBlob(e.type,r.quality)),this.destroy()},s.onerror=function(){i(e)},s.load(e)}catch(o){i(e)}}function v(e,n,i){function s(e,t,n){var r=N[e];switch(e){case"max_file_size":e==="max_file_size"&&(N.max_file_size=N.filters.max_file_size=t);break;case"chunk_size":if(t=o.parseSize(t))N[e]=t,N.send_file_name=!0;break;case"multipart":N[e]=t,t||(N.send_file_name=!0);break;case"unique_names":N[e]=t,t&&(N.send_file_name=!0);break;case"filters":o.typeOf(t)==="array"&&(t={mime_types:t}),n?o.extend(N.filters,t):N.filters=t,t.mime_types&&(N.filters.mime_types.regexp=function(e){var t=[];return o.each(e,function(e){o.each(e.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?t.push("\\.*"):t.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+t.join("|")+")$","i")}(N.filters.mime_types));break;case"resize":n?o.extend(N.resize,t,{enabled:!0}):N.resize=t;break;case"prevent_duplicates":N.prevent_duplicates=N.filters.prevent_duplicates=!!t;break;case"browse_button":case"drop_element":t=o.get(t);case"container":case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":N[e]=t,n||(a=!0);break;default:N[e]=t}n||u.trigger("OptionChanged",e,t,r)}var u=this,a=!1;typeof e=="object"?o.each(e,function(e,t){s(t,e,i)}):s(e,n,i),i?(N.required_features=r(o.extend({},N)),k=r(o.extend({},N,{required_features:!0}))):a&&(u.trigger("Destroy"),p.call(u,N,function(e){e?(u.runtime=t.Runtime.getInfo(l()).type,u.trigger("Init",{runtime:u.runtime}),u.trigger("PostInit")):u.trigger("Error",{code:o.INIT_ERROR,message:o.translate("Init error.")})}))}function m(e,t){if(e.settings.unique_names){var n=t.name.match(/\.([^.]+)$/),r="part";n&&(r=n[1]),t.target_name=t.id+"."+r}}function g(e,n){function r(){f-->0?i(s,1e3):(n.loaded=h,e.trigger("Error",{code:o.HTTP_ERROR,message:o.translate("HTTP Error."),file:n,response:D.responseText,status:D.status,responseHeaders:D.getAllResponseHeaders()}))}function s(){var c,d,v={},m;if(n.status!==o.UPLOADING||e.state===o.STOPPED)return;e.settings.send_file_name&&(v.name=n.target_name||n.name),a&&l.chunks&&p.size>a?(m=Math.min(a,p.size-h),c=p.slice(h,h+m)):(m=p.size,c=p),a&&l.chunks&&(e.settings.send_chunk_number?(v.chunk=Math.ceil(h/a),v.chunks=Math.ceil(p.size/a)):(v.offset=h,v.total=p.size)),D=new t.XMLHttpRequest,D.upload&&(D.upload.onprogress=function(t){n.loaded=Math.min(n.size,h+t.loaded),e.trigger("UploadProgress",n)}),D.onload=function(){if(D.status>=400){r();return}f=e.settings.max_retries,m<p.size?(c.destroy(),h+=m,n.loaded=Math.min(h,p.size),e.trigger("ChunkUploaded",n,{offset:n.loaded,total:p.size,response:D.responseText,status:D.status,responseHeaders:D.getAllResponseHeaders()}),t.Env.browser==="Android Browser"&&e.trigger("UploadProgress",n)):n.loaded=n.size,c=d=null,!h||h>=p.size?(n.size!=n.origSize&&(p.destroy(),p=null),e.trigger("UploadProgress",n),n.status=o.DONE,e.trigger("FileUploaded",n,{response:D.responseText,status:D.status,responseHeaders:D.getAllResponseHeaders()})):i(s,1)},D.onerror=function(){r()},D.onloadend=function(){this.destroy(),D=null},e.settings.multipart&&l.multipart?(D.open("post",u,!0),o.each(e.settings.headers,function(e,t){D.setRequestHeader(t,e)}),d=new t.FormData,o.each(o.extend(v,e.settings.multipart_params),function(e,t){d.append(t,e)}),d.append(e.settings.file_data_name,c),D.send(d,{runtime_order:e.settings.runtimes,required_caps:e.settings.required_features,preferred_caps:k,swf_url:e.settings.flash_swf_url,xap_url:e.settings.silverlight_xap_url})):(u=o.buildUrl(e.settings.url,o.extend(v,e.settings.multipart_params)),D.open("post",u,!0),D.setRequestHeader("Content-Type","application/octet-stream"),o.each(e.settings.headers,function(e,t){D.setRequestHeader(t,e)}),D.send(c,{runtime_order:e.settings.runtimes,required_caps:e.settings.required_features,preferred_caps:k,swf_url:e.settings.flash_swf_url,xap_url:e.settings.silverlight_xap_url}))}var u=e.settings.url,a=e.settings.chunk_size,f=e.settings.max_retries,l=e.features,h=0,p;n.loaded&&(h=n.loaded=a?a*Math.floor(n.loaded/a):0),p=n.getSource(),e.settings.resize.enabled&&c(p,"send_binary_string")&&!!~t.inArray(p.type,["image/jpeg","image/png"])?d.call(this,p,e.settings.resize,function(e){p=e,n.size=e.size,s()}):s()}function y(e,t){a(t)}function b(e){if(e.state==o.STARTED)O=+(new Date);else if(e.state==o.STOPPED)for(var t=e.files.length-1;t>=0;t--)e.files[t].status==o.UPLOADING&&(e.files[t].status=o.QUEUED,f())}function w(){D&&D.abort()}function E(e){f(),i(function(){u.call(e)},1)}function S(e,t){t.code===o.INIT_ERROR?e.destroy():t.file&&(t.file.status=o.FAILED,a(t.file),e.state==o.STARTED&&(e.trigger("CancelUpload"),i(function(){u.call(e)},1)))}function x(e){e.stop(),o.each(C,function(e){e.destroy()}),C=[],L.length&&(o.each(L,function(e){e.destroy()}),L=[]),A.length&&(o.each(A,function(e){e.destroy()}),A=[]),k={},_=!1,O=D=null,M.reset()}var T=o.guid(),N,C=[],k={},L=[],A=[],O,M,_=!1,D;N={runtimes:t.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_file_name:!0,send_chunk_number:!0},v.call(this,e,null,!0),M=new o.QueueProgress,o.extend(this,{id:T,uid:T,state:o.STOPPED,features:{},runtime:null,files:C,settings:N,total:M,init:function(){var e=this;typeof N.preinit=="function"?N.preinit(e):o.each(N.preinit,function(t,n){e.bind(n,t)}),h.call(this);if(!N.browse_button||!N.url){this.trigger("Error",{code:o.INIT_ERROR,message:o.translate("Init error.")});return}p.call(this,N,function(n){typeof N.init=="function"?N.init(e):o.each(N.init,function(t,n){e.bind(n,t)}),n?(e.runtime=t.Runtime.getInfo(l()).type,e.trigger("Init",{runtime:e.runtime}),e.trigger("PostInit")):e.trigger("Error",{code:o.INIT_ERROR,message:o.translate("Init error.")})})},setOption:function(e,t){v.call(this,e,t,!this.runtime)},getOption:function(e){return e?N[e]:N},refresh:function(){L.length&&o.each(L,function(e){e.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=o.STARTED&&(this.state=o.STARTED,this.trigger("StateChanged"),u.call(this))},stop:function(){this.state!=o.STOPPED&&(this.state=o.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){_=arguments[0]!==n?arguments[0]:!0,L.length&&o.each(L,function(e){e.disable(_)}),this.trigger("DisableBrowse",_)},getFile:function(e){var t;for(t=C.length-1;t>=0;t--)if(C[t].id===e)return C[t]},addFile:function(e,n){function r(e,n){var r=[];t.each(a.settings.filters,function(t,n){s[n]&&r.push(function(r){s[n].call(a,t,e,function(e){r(!e)})})}),t.inSeries(r,n)}function u(e){var s=t.typeOf(e);if(e instanceof t.File){if(!e.ruid&&!e.isDetached()){if(!h)return!1;e.ruid=h,e.connectRuntime(h)}u(new o.File(e))}else e instanceof t.Blob?(u(e.getSource()),e.destroy()):e instanceof o.File?(n&&(e.name=n),f.push(function(t){r(e,function(n){n||(C.push(e),c.push(e),a.trigger("FileFiltered",e)),i(t,1)})})):t.inArray(s,["file","blob"])!==-1?u(new t.File(null,e)):s==="node"&&t.typeOf(e.files)==="filelist"?t.each(e.files,u):s==="array"&&(n=null,t.each(e,u))}var a=this,f=[],c=[],h;h=l(),u(e),f.length&&t.inSeries(f,function(){c.length&&a.trigger("FilesAdded",c)})},removeFile:function(e){var t=typeof e=="string"?e:e.id;for(var n=C.length-1;n>=0;n--)if(C[n].id===t)return this.splice(n,1)[0]},splice:function(e,t){var r=C.splice(e===n?0:e,t===n?C.length:t),i=!1;return this.state==o.STARTED&&(o.each(r,function(e){if(e.status===o.UPLOADING)return i=!0,!1}),i&&this.stop()),this.trigger("FilesRemoved",r),o.each(r,function(e){e.destroy()}),i&&this.start(),r},bind:function(e,t,n){var r=this;o.Uploader.prototype.bind.call(this,e,function(){var e=[].slice.call(arguments);return e.splice(0,1,r),t.apply(this,e)},0,n)},destroy:function(){this.trigger("Destroy"),N=M=null,this.unbindAll()}})},o.Uploader.prototype=t.EventTarget.instance,o.File=function(){function e(e){o.extend(this,{id:o.guid(),name:e.name||e.fileName,type:e.type||"",size:e.size||e.fileSize,origSize:e.size||e.fileSize,loaded:0,percent:0,status:o.QUEUED,lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var e=this.getSource().getSource();return t.inArray(t.typeOf(e),["blob","file"])!==-1?e:null},getSource:function(){return n[this.id]?n[this.id]:null},destroy:function(){var e=this.getSource();e&&(e.destroy(),delete n[this.id])}}),n[this.id]=e}var n={};return e}(),o.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},e.plupload=o}(window,mOxie),define("plupload",function(e){return function(){var t,n;return t||e.plupload}}(this));var Qiniu=new QiniuJsSDK;define("qiniusdk",function(e){return function(){var t,n;return t||e.qiniusdk}}(this)),define("modules/mkeditor",["utils","marked","bootstrap","plupload","qiniusdk"],function(e,t){function d(t){$.post(n.qiniuTokenUrl,{doc_edit:"True"}).done(function(r){if(r.status=="success"){var i="http://simplecloud.qiniudn.com/";Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:t.find(".mkeditor-btn-img").attr("id"),uptoken:r.token,domain:i,bucket:"simplecloud",max_file_size:"1mb",max_retries:5,drop_element:t.find(".mkeditor-btn-img").attr("id"),dragdrop:!0,chunk_size:"1mb",auto_start:!1,init:{FilesAdded:function(e,t){plupload.each(t,function(t){e.start()})},UploadProgress:function(e,t){var n=$('<div class="loader"><i class="fa fa-spinner fa-pulse fa-3x"></i></div>');n.css({position:"fixed",top:0,left:0,width:"100%",height:"100%","padding-top":"25%",color:"#fff",background:"rgba(0,0,0,0.5)","text-align":"center","z-index":1100}),$("body").append(n)},FileUploaded:function(e,n,r){var r=typeof r=="string"?$.parseJSON(r):r;v(t.find("textarea"),"\n![图片描述]("+i+r.key+")\n"),setTimeout(function(){$(".loader").remove()},1e3)},Error:function(t,n,r){e.flashMessage("error","插入图片失败，请刷新后重试")},Key:function(e,t){var r=(new Date).getTime(),i="question/"+n.userid+"/"+r+".png";return i}}})}else e.flashMessage(r.status,r.message)}).fail(function(){e.flashMessage("error","加载上传图片插件失败，请刷新页面后重试")})}function v(e,t){jQuery&&e instanceof jQuery&&(e=e.get(0)),e.focus();if(document.selection){var n=document.selection.creatRange();n.text=t}else if(typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"){var r=e.selectionStart,i=e.selectionEnd,s=r,o=e.value;e.value=o.substring(0,r)+t+o.substring(i,o.length),s+=t.length,e.selectionStart=e.selectionEnd=s}else e.value+=t}var n=$("#jinja-data").data(),r=$(".mkeditor-editor textarea"),i=$(".mkeditor-viewer div"),s=$(".mkeditor-btn-bold"),o=$(".mkeditor-btn-italic"),u=$(".mkeditor-btn-link"),a=$(".mkeditor-btn-quote"),f=$(".mkeditor-btn-code"),l=$(".mkeditor-btn-listol"),c=$(".mkeditor-btn-listul"),h=$(".mkeditor-btn-img"),p=$(".mkeditor-btn-view");$(".mkeditor").on("mouseenter",function(){r=$("textarea",this)}).each(function(e){n.isAuthenticated&&d($(this))}),s.on("click",function(){v(r,"**加粗文字**\n")}),o.on("click",function(){v(r,"*斜体文字*\n")}),u.on("click",function(){v(r,"[链接描述](http://www.shiyanlou.com/)\n")}),a.on("click",function(){v(r,"> 引用文字\n")}),f.on("click",function(){v(r,"```\n输入代码\n```\n")}),l.on("click",function(){v(r," 1. 列表项目\n")}),c.on("click",function(){v(r," - 列表项目\n")}),p.on("click",function(){var e=r.val();e=t(e),i.html(e)})}),define("question/base",["jquery"],function(e){(function(e){e.fn.serializeJSON=function(){var t={},n=this.serializeArray(),r=this.serialize();return e(n).each(function(){t[this.name]?e.isArray(t[this.name])?t[this.name].push(this.value):t[this.name]=[t[this.name],this.value]:t[this.name]=this.value}),t}})(e)}),define("question/askQuestion",["utils","modules/mkeditor","question/base"],function(e){var t=$("#jinja-data").data(),n=$("#askquestion");t.isAuthenticated||$("a[data-target=#askquestion]").on("click",function(e){window.location.href=t.loginUrl}),n.on("show.bs.modal",function(){var r=$("#askquestion .qatags");$.get(t.questionForm).done(function(e){var t='<input type="hidden" name="csrf_token" value="'+e.csrf_token+'">',i="";for(var s=0,o=e.tags.length;s<o;s++)i+='<span class="label label-default" value="'+e.tags[s].name+'">'+e.tags[s].name+"</span> ";n.find("form input[name=csrf_token]").remove(),n.find("form").append(t),r.html(i),r.off("click","span").on("click","span",function(){var e="label-default",t="label-success",n=e;if($(this).hasClass(t))e=t,t=n;else if($("span.label-success",r).length==3)return!1;$(this).removeClass(e).addClass(t)})}).fail(function(){e.flashMessage("error","获取标签失败，请刷新页面后重试")})}),n.on("click",".submit-question",function(){var n=$("#askquestion form"),r=n.attr("action"),i=n.serializeJSON(),s=$("#askquestion .qatags .label-success");s=$.makeArray(s),s.map(function(e,t,n){i["tag-"+(t+1)]=$(e).attr("value")}),t.labid&&(i.lab_id=t.labid),t.courseId&&(i.course_id=t.courseId),$.post(r,i).done(function(r){console.log(i);if(r.status=="success"){if(t.labid||t.courseId){$("input",n).val(""),$("textarea",n).val("");return}window.location.href=r.next}else e.flashMessage(r.status,r.message)}).fail(function(){e.flashMessage("error","提问失败，请刷新页面后重试")})})}),define("course/console/shareVm",["utils","course/console/connectVm"],function(e,t){function u(t,n,r){$.post(t,n).done(function(t){t.status=="error"&&e.flashMessage(t.status,t.message),t.status=="success"&&$(i[r]).val(o+t.key)}).fail(function(){e.flashMessage("error","获取共享连接失败，请重试")})}var n=$("#jinja-data").data(),r=$("#sharevm"),i=r.find("input"),s=n.shareVmRequrl,o=window.location.origin+n.shareVmUrl;r.on("show.bs.modal",function(e){t.keyboard.onkeydown=null,t.keyboard.onkeyup=null;var r={lab_id:n.labid,readonly:0},i={lab_id:n.labid,readonly:1};u(s,r,1),u(s,i,0)}).on("hide.bs.modal",function(e){t.keyboard.onkeydown=t.keydownEvent,t.keyboard.onkeyup=t.keyupEvent})}),define("course/console/codeDownload",["utils"],function(e){var t=$("#jinja-data").data(),n=t.downloadCodeUrl,r=$(".code-download"),i=$("#code-download"),s=i.find(".confirm-download");r.on("click",function(){i.on("show.bs.modal",function(){$.get(n).done(function(t){t.status=="error"&&(i.modal("hide"),e.flashMessage(t.status,t.message))}).fail(function(){i.modal("hide"),e.flashMessage("error","下载代码出错，请刷新页面后重试")})}),s.off("click").on("click",function(){window.open(n,"_blank")})})}),define("course/console/studyTime",["utils"],function(e){function f(){i.on("click",function(){var e=a.eyeon;o=!o,o||(e=a.eyeoff),$(this).find("img").attr("src",e)}),$(document).on("keyup",function(e){s=!0,o&&u.length<100&&u.push(e.keyCode)}),setInterval(l,18e4)}function l(){s&&($.post(t.studyTimeUrl).done(function(t){(t.modal==="True"||t.modal===!0)&&e.modalMessage(t.status,t.message,"提示"),t.status&&t.status=="error"&&e.flashMessage(t.status,"记录学习时间失败，请刷新页面！"),s=!1}).fail(function(){e.flashMessage(data.status,"记录学习时间失败，请刷新页面！")}),o&&$.post(r,{lab_id:t.labid,data:u.join(",")}).done(function(e){e.status&&e.status=="error"&&console.error(e.status,e.message),u.length=0}))}var t=$("#jinja-data").data(),n=t.studyTimeUrl,r=t.userInputUrl,i=$("#toolbar .record-switch"),s=!1,o=!0,u=[],a={eyeon:t.eyeon,eyeoff:t.eyeoff};f()}),function(e){var t=e.jsBase64,n="2.1.5",r;typeof module!="undefined"&&module.exports&&(r=require("buffer").Buffer);var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){var t={};for(var n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(i),o=String.fromCharCode,u=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?o(192|t>>>6)+o(128|t&63):o(224|t>>>12&15)+o(128|t>>>6&63)+o(128|t&63)}var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return o(240|t>>>18&7)+o(128|t>>>12&63)+o(128|t>>>6&63)+o(128|t&63)},a=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=function(e){return e.replace(a,u)},l=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[i.charAt(n>>>18),i.charAt(n>>>12&63),t>=2?"=":i.charAt(n>>>6&63),t>=1?"=":i.charAt(n&63)];return r.join("")},c=e.btoa?function(t){return e.btoa(t)}:function(e){return e.replace(/[\s\S]{1,3}/g,l)},h=r?function(e){return(new r(e)).toString("base64")}:function(e){return c(f(e))},p=function(e,t){return t?h(e).replace(/[+\/]/g,function(e){return e=="+"?"-":"_"}).replace(/=/g,""):h(e)},d=function(e){return p(e,!0)},v=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),m=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return o((n>>>10)+55296)+o((n&1023)+56320);case 3:return o((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return o((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},g=function(e){return e.replace(v,m)},y=function(e){var t=e.length,n=t%4,r=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),i=[o(r>>>16),o(r>>>8&255),o(r&255)];return i.length-=[0,0,2,1][n],i.join("")},b=e.atob?function(t){return e.atob(t)}:function(e){return e.replace(/[\s\S]{1,4}/g,y)},w=r?function(e){return(new r(e,"base64")).toString()}:function(e){return g(b(e))},E=function(e){return w(e.replace(/[-_]/g,function(e){return e=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},S=function(){var n=e.jsBase64;return e.jsBase64=t,n};e.jsBase64={VERSION:n,atob:b,btoa:c,fromjsBase64:E,tojsBase64:p,utob:f,encode:p,encodeURI:d,btou:g,decode:E,noConflict:S};if(typeof Object.defineProperty=="function"){var x=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};e.jsBase64.extendString=function(){Object.defineProperty(String.prototype,"fromjsBase64",x(function(){return E(this)})),Object.defineProperty(String.prototype,"tojsBase64",x(function(e){return p(this,e)})),Object.defineProperty(String.prototype,"tojsBase64URI",x(function(){return p(this,!0)}))}}}(this),this.Meteor&&(jsBase64=global.jsBase64),define("base64",function(e){return function(){var t,n;return t||e.base64}}(this));var hexcase=0,b64pad="",chrsz=8;define("hash",function(e){return function(){var t,n;return t||e.hash}}(this)),!function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t){var n=e("./core");n.apiLoader=function(e,t){return n.apiLoader.services[e][t]},n.apiLoader.services={},n.XML.Parser=e("./xml/browser_parser"),e("./http/xhr"),"undefined"!=typeof window&&(window.AWS=n),"undefined"!=typeof t&&(t.exports=n),n.apiLoader.services.cloudwatch={},n.CloudWatch=n.Service.defineService("cloudwatch",["2010-08-01"]),n.apiLoader.services.cloudwatch["2010-08-01"]={metadata:{apiVersion:"2010-08-01",endpointPrefix:"monitoring",serviceAbbreviation:"CloudWatch",serviceFullName:"Amazon CloudWatch",signatureVersion:"v4",xmlNamespace:"http://monitoring.amazonaws.com/doc/2010-08-01/",protocol:"query"},operations:{DeleteAlarms:{input:{type:"structure",required:["AlarmNames"],members:{AlarmNames:{shape:"S2"}}},http:{}},DescribeAlarmHistory:{input:{type:"structure",members:{AlarmName:{},HistoryItemType:{},StartDate:{type:"timestamp"},EndDate:{type:"timestamp"},MaxRecords:{type:"integer"},NextToken:{}}},output:{resultWrapper:"DescribeAlarmHistoryResult",type:"structure",members:{AlarmHistoryItems:{type:"list",member:{type:"structure",members:{AlarmName:{},Timestamp:{type:"timestamp"},HistoryItemType:{},HistorySummary:{},HistoryData:{}}}},NextToken:{}}},http:{}},DescribeAlarms:{input:{type:"structure",members:{AlarmNames:{shape:"S2"},AlarmNamePrefix:{},StateValue:{},ActionPrefix:{},MaxRecords:{type:"integer"},NextToken:{}}},output:{resultWrapper:"DescribeAlarmsResult",type:"structure",members:{MetricAlarms:{shape:"Sj"},NextToken:{}}},http:{}},DescribeAlarmsForMetric:{input:{type:"structure",required:["MetricName","Namespace"],members:{MetricName:{},Namespace:{},Statistic:{},Dimensions:{shape:"Sv"},Period:{type:"integer"},Unit:{}}},output:{resultWrapper:"DescribeAlarmsForMetricResult",type:"structure",members:{MetricAlarms:{shape:"Sj"}}},http:{}},DisableAlarmActions:{input:{type:"structure",required:["AlarmNames"],members:{AlarmNames:{shape:"S2"}}},http:{}},EnableAlarmActions:{input:{type:"structure",required:["AlarmNames"],members:{AlarmNames:{shape:"S2"}}},http:{}},GetMetricStatistics:{input:{type:"structure",required:["Namespace","MetricName","StartTime","EndTime","Period","Statistics"],members:{Namespace:{},MetricName:{},Dimensions:{shape:"Sv"},StartTime:{type:"timestamp"},EndTime:{type:"timestamp"},Period:{type:"integer"},Statistics:{type:"list",member:{}},Unit:{}}},output:{resultWrapper:"GetMetricStatisticsResult",type:"structure",members:{Label:{},Datapoints:{type:"list",member:{type:"structure",members:{Timestamp:{type:"timestamp"},SampleCount:{type:"double"},Average:{type:"double"},Sum:{type:"double"},Minimum:{type:"double"},Maximum:{type:"double"},Unit:{}},xmlOrder:["Timestamp","SampleCount","Average","Sum","Minimum","Maximum","Unit"]}}}},http:{}},ListMetrics:{input:{type:"structure",members:{Namespace:{},MetricName:{},Dimensions:{type:"list",member:{type:"structure",required:["Name"],members:{Name:{},Value:{}}}},NextToken:{}}},output:{xmlOrder:["Metrics","NextToken"],resultWrapper:"ListMetricsResult",type:"structure",members:{Metrics:{type:"list",member:{type:"structure",members:{Namespace:{},MetricName:{},Dimensions:{shape:"Sv"}},xmlOrder:["Namespace","MetricName","Dimensions"]}},NextToken:{}}},http:{}},PutMetricAlarm:{input:{type:"structure",required:["AlarmName","MetricName","Namespace","Statistic","Period","EvaluationPeriods","Threshold","ComparisonOperator"],members:{AlarmName:{},AlarmDescription:{},ActionsEnabled:{type:"boolean"},OKActions:{shape:"So"},AlarmActions:{shape:"So"},InsufficientDataActions:{shape:"So"},MetricName:{},Namespace:{},Statistic:{},Dimensions:{shape:"Sv"},Period:{type:"integer"},Unit:{},EvaluationPeriods:{type:"integer"},Threshold:{type:"double"},ComparisonOperator:{}}},http:{}},PutMetricData:{input:{type:"structure",required:["Namespace","MetricData"],members:{Namespace:{},MetricData:{type:"list",member:{type:"structure",required:["MetricName"],members:{MetricName:{},Dimensions:{shape:"Sv"},Timestamp:{type:"timestamp"},Value:{type:"double"},StatisticValues:{type:"structure",required:["SampleCount","Sum","Minimum","Maximum"],members:{SampleCount:{type:"double"},Sum:{type:"double"},Minimum:{type:"double"},Maximum:{type:"double"}}},Unit:{}}}}}},http:{}},SetAlarmState:{input:{type:"structure",required:["AlarmName","StateValue","StateReason"],members:{AlarmName:{},StateValue:{},StateReason:{},StateReasonData:{}}},http:{}}},shapes:{S2:{type:"list",member:{}},Sj:{type:"list",member:{type:"structure",members:{AlarmName:{},AlarmArn:{},AlarmDescription:{},AlarmConfigurationUpdatedTimestamp:{type:"timestamp"},ActionsEnabled:{type:"boolean"},OKActions:{shape:"So"},AlarmActions:{shape:"So"},InsufficientDataActions:{shape:"So"},StateValue:{},StateReason:{},StateReasonData:{},StateUpdatedTimestamp:{type:"timestamp"},MetricName:{},Namespace:{},Statistic:{},Dimensions:{shape:"Sv"},Period:{type:"integer"},Unit:{},EvaluationPeriods:{type:"integer"},Threshold:{type:"double"},ComparisonOperator:{}},xmlOrder:["AlarmName","AlarmArn","AlarmDescription","AlarmConfigurationUpdatedTimestamp","ActionsEnabled","OKActions","AlarmActions","InsufficientDataActions","StateValue","StateReason","StateReasonData","StateUpdatedTimestamp","MetricName","Namespace","Statistic","Dimensions","Period","Unit","EvaluationPeriods","Threshold","ComparisonOperator"]}},So:{type:"list",member:{}},Sv:{type:"list",member:{type:"structure",required:["Name","Value"],members:{Name:{},Value:{}},xmlOrder:["Name","Value"]}}},paginators:{DescribeAlarmHistory:{input_token:"NextToken",output_token:"NextToken",limit_key:"MaxRecords",result_key:"AlarmHistoryItems"},DescribeAlarms:{input_token:"NextToken",output_token:"NextToken",limit_key:"MaxRecords",result_key:"MetricAlarms"},DescribeAlarmsForMetric:{result_key:"MetricAlarms"},ListMetrics:{input_token:"NextToken",output_token:"NextToken",result_key:"Metrics"}}},n.apiLoader.services.cognitoidentity={},n.CognitoIdentity=n.Service.defineService("cognitoidentity",["2014-06-30"]),e("./services/cognitoidentity"),n.apiLoader.services.cognitoidentity["2014-06-30"]={metadata:{apiVersion:"2014-06-30",endpointPrefix:"cognito-identity",jsonVersion:"1.1",serviceFullName:"Amazon Cognito Identity",signatureVersion:"v4",targetPrefix:"AWSCognitoIdentityService",protocol:"json"},operations:{CreateIdentityPool:{input:{type:"structure",required:["IdentityPoolName","AllowUnauthenticatedIdentities"],members:{IdentityPoolName:{},AllowUnauthenticatedIdentities:{type:"boolean"},SupportedLoginProviders:{shape:"S4"},DeveloperProviderName:{},OpenIdConnectProviderARNs:{shape:"S8"}}},output:{shape:"Sa"},http:{}},DeleteIdentityPool:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{}}},http:{}},DescribeIdentity:{input:{type:"structure",required:["IdentityId"],members:{IdentityId:{}}},output:{shape:"Sf"},http:{}},DescribeIdentityPool:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{}}},output:{shape:"Sa"},http:{}},GetCredentialsForIdentity:{input:{type:"structure",required:["IdentityId"],members:{IdentityId:{},Logins:{shape:"Sk"}}},output:{type:"structure",members:{IdentityId:{},Credentials:{type:"structure",members:{AccessKeyId:{},SecretKey:{},SessionToken:{},Expiration:{type:"timestamp"}}}}},http:{}},GetId:{input:{type:"structure",required:["IdentityPoolId"],members:{AccountId:{},IdentityPoolId:{},Logins:{shape:"Sk"}}},output:{type:"structure",members:{IdentityId:{}}},http:{}},GetIdentityPoolRoles:{input:{type:"structure",members:{IdentityPoolId:{}}},output:{type:"structure",members:{IdentityPoolId:{},Roles:{shape:"Sw"}}},http:{}},GetOpenIdToken:{input:{type:"structure",required:["IdentityId"],members:{IdentityId:{},Logins:{shape:"Sk"}}},output:{type:"structure",members:{IdentityId:{},Token:{}}},http:{}},GetOpenIdTokenForDeveloperIdentity:{input:{type:"structure",required:["IdentityPoolId","Logins"],members:{IdentityPoolId:{},IdentityId:{},Logins:{shape:"Sk"},TokenDuration:{type:"long"}}},output:{type:"structure",members:{IdentityId:{},Token:{}}},http:{}},ListIdentities:{input:{type:"structure",required:["IdentityPoolId","MaxResults"],members:{IdentityPoolId:{},MaxResults:{type:"integer"},NextToken:{}}},output:{type:"structure",members:{IdentityPoolId:{},Identities:{type:"list",member:{shape:"Sf"}},NextToken:{}}},http:{}},ListIdentityPools:{input:{type:"structure",required:["MaxResults"],members:{MaxResults:{type:"integer"},NextToken:{}}},output:{type:"structure",members:{IdentityPools:{type:"list",member:{type:"structure",members:{IdentityPoolId:{},IdentityPoolName:{}}}},NextToken:{}}},http:{}},LookupDeveloperIdentity:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{},IdentityId:{},DeveloperUserIdentifier:{},MaxResults:{type:"integer"},NextToken:{}}},output:{type:"structure",members:{IdentityId:{},DeveloperUserIdentifierList:{type:"list",member:{}},NextToken:{}}},http:{}},MergeDeveloperIdentities:{input:{type:"structure",required:["SourceUserIdentifier","DestinationUserIdentifier","DeveloperProviderName","IdentityPoolId"],members:{SourceUserIdentifier:{},DestinationUserIdentifier:{},DeveloperProviderName:{},IdentityPoolId:{}}},output:{type:"structure",members:{IdentityId:{}}},http:{}},SetIdentityPoolRoles:{input:{type:"structure",required:["IdentityPoolId","Roles"],members:{IdentityPoolId:{},Roles:{shape:"Sw"}}},http:{}},UnlinkDeveloperIdentity:{input:{type:"structure",required:["IdentityId","IdentityPoolId","DeveloperProviderName","DeveloperUserIdentifier"],members:{IdentityId:{},IdentityPoolId:{},DeveloperProviderName:{},DeveloperUserIdentifier:{}}},http:{}},UnlinkIdentity:{input:{type:"structure",required:["IdentityId","Logins","LoginsToRemove"],members:{IdentityId:{},Logins:{shape:"Sk"},LoginsToRemove:{shape:"Sg"}}},http:{}},UpdateIdentityPool:{input:{shape:"Sa"},output:{shape:"Sa"},http:{}}},shapes:{S4:{type:"map",key:{},value:{}},S8:{type:"list",member:{}},Sa:{type:"structure",required:["IdentityPoolId","IdentityPoolName","AllowUnauthenticatedIdentities"],members:{IdentityPoolId:{},IdentityPoolName:{},AllowUnauthenticatedIdentities:{type:"boolean"},SupportedLoginProviders:{shape:"S4"},DeveloperProviderName:{},OpenIdConnectProviderARNs:{shape:"S8"}}},Sf:{type:"structure",members:{IdentityId:{},Logins:{shape:"Sg"},CreationDate:{type:"timestamp"},LastModifiedDate:{type:"timestamp"}}},Sg:{type:"list",member:{}},Sk:{type:"map",key:{},value:{}},Sw:{type:"map",key:{},value:{}}}},n.apiLoader.services.cognitosync={},n.CognitoSync=n.Service.defineService("cognitosync",["2014-06-30"]),n.apiLoader.services.cognitosync["2014-06-30"]={version:"2.0",metadata:{apiVersion:"2014-06-30",endpointPrefix:"cognito-sync",jsonVersion:"1.1",serviceFullName:"Amazon Cognito Sync",signatureVersion:"v4",protocol:"rest-json"},operations:{BulkPublish:{http:{requestUri:"/identitypools/{IdentityPoolId}/bulkpublish",responseCode:200},input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"}}},output:{type:"structure",members:{IdentityPoolId:{}}}},DeleteDataset:{http:{method:"DELETE",requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets/{DatasetName}",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","DatasetName"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},DatasetName:{location:"uri",locationName:"DatasetName"}}},output:{type:"structure",members:{Dataset:{shape:"S8"}}}},DescribeDataset:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets/{DatasetName}",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","DatasetName"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},DatasetName:{location:"uri",locationName:"DatasetName"}}},output:{type:"structure",members:{Dataset:{shape:"S8"}}}},DescribeIdentityPoolUsage:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}",responseCode:200},input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"}}},output:{type:"structure",members:{IdentityPoolUsage:{shape:"Sg"}}}},DescribeIdentityUsage:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"}}},output:{type:"structure",members:{IdentityUsage:{type:"structure",members:{IdentityId:{},IdentityPoolId:{},LastModifiedDate:{type:"timestamp"},DatasetCount:{type:"integer"},DataStorage:{type:"long"}}}}}},GetBulkPublishDetails:{http:{requestUri:"/identitypools/{IdentityPoolId}/getBulkPublishDetails",responseCode:200},input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"}}},output:{type:"structure",members:{IdentityPoolId:{},BulkPublishStartTime:{type:"timestamp"},BulkPublishCompleteTime:{type:"timestamp"},BulkPublishStatus:{},FailureMessage:{}}}},GetCognitoEvents:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}/events",responseCode:200},input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"}}},output:{type:"structure",members:{Events:{shape:"Sq"}}}},GetIdentityPoolConfiguration:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}/configuration",responseCode:200},input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"}}},output:{type:"structure",members:{IdentityPoolId:{},PushSync:{shape:"Sv"},CognitoStreams:{shape:"Sz"}}}},ListDatasets:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets",responseCode:200},input:{type:"structure",required:["IdentityId","IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},NextToken:{location:"querystring",locationName:"nextToken"},MaxResults:{location:"querystring",locationName:"maxResults",type:"integer"}}},output:{type:"structure",members:{Datasets:{type:"list",member:{shape:"S8"}},Count:{type:"integer"},NextToken:{}}}},ListIdentityPoolUsage:{http:{method:"GET",requestUri:"/identitypools",responseCode:200},input:{type:"structure",members:{NextToken:{location:"querystring",locationName:"nextToken"},MaxResults:{location:"querystring",locationName:"maxResults",type:"integer"}}},output:{type:"structure",members:{IdentityPoolUsages:{type:"list",member:{shape:"Sg"}},MaxResults:{type:"integer"},Count:{type:"integer"},NextToken:{}}}},ListRecords:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets/{DatasetName}/records",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","DatasetName"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},DatasetName:{location:"uri",locationName:"DatasetName"},LastSyncCount:{location:"querystring",locationName:"lastSyncCount",type:"long"},NextToken:{location:"querystring",locationName:"nextToken"},MaxResults:{location:"querystring",locationName:"maxResults",type:"integer"},SyncSessionToken:{location:"querystring",locationName:"syncSessionToken"}}},output:{type:"structure",members:{Records:{shape:"S1c"},NextToken:{},Count:{type:"integer"},DatasetSyncCount:{type:"long"},LastModifiedBy:{},MergedDatasetNames:{type:"list",member:{}},DatasetExists:{type:"boolean"},DatasetDeletedAfterRequestedSyncCount:{type:"boolean"},SyncSessionToken:{}}}},RegisterDevice:{http:{requestUri:"/identitypools/{IdentityPoolId}/identity/{IdentityId}/device",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","Platform","Token"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},Platform:{},Token:{}}},output:{type:"structure",members:{DeviceId:{}}}},SetCognitoEvents:{http:{requestUri:"/identitypools/{IdentityPoolId}/events",responseCode:200},input:{type:"structure",required:["IdentityPoolId","Events"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},Events:{shape:"Sq"}}}},SetIdentityPoolConfiguration:{http:{requestUri:"/identitypools/{IdentityPoolId}/configuration",responseCode:200},input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},PushSync:{shape:"Sv"},CognitoStreams:{shape:"Sz"}}},output:{type:"structure",members:{IdentityPoolId:{},PushSync:{shape:"Sv"},CognitoStreams:{shape:"Sz"}}}},SubscribeToDataset:{http:{requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets/{DatasetName}/subscriptions/{DeviceId}",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","DatasetName","DeviceId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},DatasetName:{location:"uri",locationName:"DatasetName"},DeviceId:{location:"uri",locationName:"DeviceId"}}},output:{type:"structure",members:{}}},UnsubscribeFromDataset:{http:{method:"DELETE",requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets/{DatasetName}/subscriptions/{DeviceId}",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","DatasetName","DeviceId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},DatasetName:{location:"uri",locationName:"DatasetName"},DeviceId:{location:"uri",locationName:"DeviceId"}}},output:{type:"structure",members:{}}},UpdateRecords:{http:{requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets/{DatasetName}",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","DatasetName","SyncSessionToken"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},DatasetName:{location:"uri",locationName:"DatasetName"},DeviceId:{},RecordPatches:{type:"list",member:{type:"structure",required:["Op","Key","SyncCount"],members:{Op:{},Key:{},Value:{},SyncCount:{type:"long"},DeviceLastModifiedDate:{type:"timestamp"}}}},SyncSessionToken:{},ClientContext:{location:"header",locationName:"x-amz-Client-Context"}}},output:{type:"structure",members:{Records:{shape:"S1c"}}}}},shapes:{S8:{type:"structure",members:{IdentityId:{},DatasetName:{},CreationDate:{type:"timestamp"},LastModifiedDate:{type:"timestamp"},LastModifiedBy:{},DataStorage:{type:"long"},NumRecords:{type:"long"}}},Sg:{type:"structure",members:{IdentityPoolId:{},SyncSessionsCount:{type:"long"},DataStorage:{type:"long"},LastModifiedDate:{type:"timestamp"}}},Sq:{type:"map",key:{},value:{}},Sv:{type:"structure",members:{ApplicationArns:{type:"list",member:{}},RoleArn:{}}},Sz:{type:"structure",members:{StreamName:{},RoleArn:{},StreamingStatus:{}}},S1c:{type:"list",member:{type:"structure",members:{Key:{},Value:{},SyncCount:{type:"long"},LastModifiedDate:{type:"timestamp"},LastModifiedBy:{},DeviceLastModifiedDate:{type:"timestamp"}}}}}},n.apiLoader.services.dynamodb={},n.DynamoDB=n.Service.defineService("dynamodb",["2011-12-05","2012-08-10"]),e("./services/dynamodb"),n.apiLoader.services.dynamodb["2012-08-10"]={metadata:{apiVersion:"2012-08-10",endpointPrefix:"dynamodb",jsonVersion:"1.0",serviceAbbreviation:"DynamoDB",serviceFullName:"Amazon DynamoDB",signatureVersion:"v4",targetPrefix:"DynamoDB_20120810",protocol:"json"},operations:{BatchGetItem:{input:{type:"structure",required:["RequestItems"],members:{RequestItems:{shape:"S2"},ReturnConsumedCapacity:{}}},output:{type:"structure",members:{Responses:{type:"map",key:{},value:{shape:"Sr"}},UnprocessedKeys:{shape:"S2"},ConsumedCapacity:{shape:"St"}}},http:{}},BatchWriteItem:{input:{type:"structure",required:["RequestItems"],members:{RequestItems:{shape:"S10"},ReturnConsumedCapacity:{},ReturnItemCollectionMetrics:{}}},output:{type:"structure",members:{UnprocessedItems:{shape:"S10"},ItemCollectionMetrics:{type:"map",key:{},value:{type:"list",member:{shape:"S1a"}}},ConsumedCapacity:{shape:"St"}}},http:{}},CreateTable:{input:{type:"structure",required:["AttributeDefinitions","TableName","KeySchema","ProvisionedThroughput"],members:{AttributeDefinitions:{shape:"S1f"},TableName:{},KeySchema:{shape:"S1j"},LocalSecondaryIndexes:{type:"list",member:{type:"structure",required:["IndexName","KeySchema","Projection"],members:{IndexName:{},KeySchema:{shape:"S1j"},Projection:{shape:"S1o"}}}},GlobalSecondaryIndexes:{type:"list",member:{type:"structure",required:["IndexName","KeySchema","Projection","ProvisionedThroughput"],members:{IndexName:{},KeySchema:{shape:"S1j"},Projection:{shape:"S1o"},ProvisionedThroughput:{shape:"S1u"}}}},ProvisionedThroughput:{shape:"S1u"}}},output:{type:"structure",members:{TableDescription:{shape:"S1x"}}},http:{}},DeleteItem:{input:{type:"structure",required:["TableName","Key"],members:{TableName:{},Key:{shape:"S6"},Expected:{shape:"S29"},ConditionalOperator:{},ReturnValues:{},ReturnConsumedCapacity:{},ReturnItemCollectionMetrics:{},ConditionExpression:{},ExpressionAttributeNames:{shape:"Sm"},ExpressionAttributeValues:{shape:"S2h"}}},output:{type:"structure",members:{Attributes:{shape:"Ss"},ConsumedCapacity:{shape:"Su"},ItemCollectionMetrics:{shape:"S1a"}}},http:{}},DeleteTable:{input:{type:"structure",required:["TableName"],members:{TableName:{}}},output:{type:"structure",members:{TableDescription:{shape:"S1x"}}},http:{}},DescribeTable:{input:{type:"structure",required:["TableName"],members:{TableName:{}}},output:{type:"structure",members:{Table:{shape:"S1x"}}},http:{}},GetItem:{input:{type:"structure",required:["TableName","Key"],members:{TableName:{},Key:{shape:"S6"},AttributesToGet:{shape:"Sj"},ConsistentRead:{type:"boolean"},ReturnConsumedCapacity:{},ProjectionExpression:{},ExpressionAttributeNames:{shape:"Sm"}}},output:{type:"structure",members:{Item:{shape:"Ss"},ConsumedCapacity:{shape:"Su"}}},http:{}},ListTables:{input:{type:"structure",members:{ExclusiveStartTableName:{},Limit:{type:"integer"}}},output:{type:"structure",members:{TableNames:{type:"list",member:{}},LastEvaluatedTableName:{}}},http:{}},PutItem:{input:{type:"structure",required:["TableName","Item"],members:{TableName:{},Item:{shape:"S14"},Expected:{shape:"S29"},ReturnValues:{},ReturnConsumedCapacity:{},ReturnItemCollectionMetrics:{},ConditionalOperator:{},ConditionExpression:{},ExpressionAttributeNames:{shape:"Sm"},ExpressionAttributeValues:{shape:"S2h"}}},output:{type:"structure",members:{Attributes:{shape:"Ss"},ConsumedCapacity:{shape:"Su"},ItemCollectionMetrics:{shape:"S1a"}}},http:{}},Query:{input:{type:"structure",required:["TableName","KeyConditions"],members:{TableName:{},IndexName:{},Select:{},AttributesToGet:{shape:"Sj"},Limit:{type:"integer"},ConsistentRead:{type:"boolean"},KeyConditions:{type:"map",key:{},value:{shape:"S30"}},QueryFilter:{shape:"S31"},ConditionalOperator:{},ScanIndexForward:{type:"boolean"},ExclusiveStartKey:{shape:"S6"},ReturnConsumedCapacity:{},ProjectionExpression:{},FilterExpression:{},ExpressionAttributeNames:{shape:"Sm"},ExpressionAttributeValues:{shape:"S2h"}}},output:{type:"structure",members:{Items:{shape:"Sr"},Count:{type:"integer"},ScannedCount:{type:"integer"},LastEvaluatedKey:{shape:"S6"},ConsumedCapacity:{shape:"Su"}}},http:{}},Scan:{input:{type:"structure",required:["TableName"],members:{TableName:{},IndexName:{},AttributesToGet:{shape:"Sj"},Limit:{type:"integer"},Select:{},ScanFilter:{shape:"S31"},ConditionalOperator:{},ExclusiveStartKey:{shape:"S6"},ReturnConsumedCapacity:{},TotalSegments:{type:"integer"},Segment:{type:"integer"},ProjectionExpression:{},FilterExpression:{},ExpressionAttributeNames:{shape:"Sm"},ExpressionAttributeValues:{shape:"S2h"}}},output:{type:"structure",members:{Items:{shape:"Sr"},Count:{type:"integer"},ScannedCount:{type:"integer"},LastEvaluatedKey:{shape:"S6"},ConsumedCapacity:{shape:"Su"}}},http:{}},UpdateItem:{input:{type:"structure",required:["TableName","Key"],members:{TableName:{},Key:{shape:"S6"},AttributeUpdates:{type:"map",key:{},value:{type:"structure",members:{Value:{shape:"S8"},Action:{}}}},Expected:{shape:"S29"},ConditionalOperator:{},ReturnValues:{},ReturnConsumedCapacity:{},ReturnItemCollectionMetrics:{},UpdateExpression:{},ConditionExpression:{},ExpressionAttributeNames:{shape:"Sm"},ExpressionAttributeValues:{shape:"S2h"}}},output:{type:"structure",members:{Attributes:{shape:"Ss"},ConsumedCapacity:{shape:"Su"},ItemCollectionMetrics:{shape:"S1a"}}},http:{}},UpdateTable:{input:{type:"structure",required:["TableName"],members:{AttributeDefinitions:{shape:"S1f"},TableName:{},ProvisionedThroughput:{shape:"S1u"},GlobalSecondaryIndexUpdates:{type:"list",member:{type:"structure",members:{Update:{type:"structure",required:["IndexName","ProvisionedThroughput"],members:{IndexName:{},ProvisionedThroughput:{shape:"S1u"}}},Create:{type:"structure",required:["IndexName","KeySchema","Projection","ProvisionedThroughput"],members:{IndexName:{},KeySchema:{shape:"S1j"},Projection:{shape:"S1o"},ProvisionedThroughput:{shape:"S1u"}}},Delete:{type:"structure",required:["IndexName"],members:{IndexName:{}}}}}}}},output:{type:"structure",members:{TableDescription:{shape:"S1x"}}},http:{}}},shapes:{S2:{type:"map",key:{},value:{type:"structure",required:["Keys"],members:{Keys:{type:"list",member:{shape:"S6"}},AttributesToGet:{shape:"Sj"},ConsistentRead:{type:"boolean"},ProjectionExpression:{},ExpressionAttributeNames:{shape:"Sm"}}}},S6:{type:"map",key:{},value:{shape:"S8"}},S8:{type:"structure",members:{S:{},N:{},B:{type:"blob"},SS:{type:"list",member:{}},NS:{type:"list",member:{}},BS:{type:"list",member:{type:"blob"}},M:{type:"map",key:{},value:{shape:"S8"}},L:{type:"list",member:{shape:"S8"}},NULL:{type:"boolean"},BOOL:{type:"boolean"}}},Sj:{type:"list",member:{}},Sm:{type:"map",key:{},value:{}},Sr:{type:"list",member:{shape:"Ss"}},Ss:{type:"map",key:{},value:{shape:"S8"}},St:{type:"list",member:{shape:"Su"}},Su:{type:"structure",members:{TableName:{},CapacityUnits:{type:"double"},Table:{shape:"Sw"},LocalSecondaryIndexes:{shape:"Sx"},GlobalSecondaryIndexes:{shape:"Sx"}}},Sw:{type:"structure",members:{CapacityUnits:{type:"double"}}},Sx:{type:"map",key:{},value:{shape:"Sw"}},S10:{type:"map",key:{},value:{type:"list",member:{type:"structure",members:{PutRequest:{type:"structure",required:["Item"],members:{Item:{shape:"S14"}}},DeleteRequest:{type:"structure",required:["Key"],members:{Key:{shape:"S6"}}}}}}},S14:{type:"map",key:{},value:{shape:"S8"}},S1a:{type:"structure",members:{ItemCollectionKey:{type:"map",key:{},value:{shape:"S8"}},SizeEstimateRangeGB:{type:"list",member:{type:"double"}}}},S1f:{type:"list",member:{type:"structure",required:["AttributeName","AttributeType"],members:{AttributeName:{},AttributeType:{}}}},S1j:{type:"list",member:{type:"structure",required:["AttributeName","KeyType"],members:{AttributeName:{},KeyType:{}}}},S1o:{type:"structure",members:{ProjectionType:{},NonKeyAttributes:{type:"list",member:{}}}},S1u:{type:"structure",required:["ReadCapacityUnits","WriteCapacityUnits"],members:{ReadCapacityUnits:{type:"long"},WriteCapacityUnits:{type:"long"}}},S1x:{type:"structure",members:{AttributeDefinitions:{shape:"S1f"},TableName:{},KeySchema:{shape:"S1j"},TableStatus:{},CreationDateTime:{type:"timestamp"},ProvisionedThroughput:{shape:"S20"},TableSizeBytes:{type:"long"},ItemCount:{type:"long"},LocalSecondaryIndexes:{type:"list",member:{type:"structure",members:{IndexName:{},KeySchema:{shape:"S1j"},Projection:{shape:"S1o"},IndexSizeBytes:{type:"long"},ItemCount:{type:"long"}}}},GlobalSecondaryIndexes:{type:"list",member:{type:"structure",members:{IndexName:{},KeySchema:{shape:"S1j"},Projection:{shape:"S1o"},IndexStatus:{},Backfilling:{type:"boolean"},ProvisionedThroughput:{shape:"S20"},IndexSizeBytes:{type:"long"},ItemCount:{type:"long"}}}}}},S20:{type:"structure",members:{LastIncreaseDateTime:{type:"timestamp"},LastDecreaseDateTime:{type:"timestamp"},NumberOfDecreasesToday:{type:"long"},ReadCapacityUnits:{type:"long"},WriteCapacityUnits:{type:"long"}}},S29:{type:"map",key:{},value:{type:"structure",members:{Value:{shape:"S8"},Exists:{type:"boolean"},ComparisonOperator:{},AttributeValueList:{shape:"S2d"}}}},S2d:{type:"list",member:{shape:"S8"}},S2h:{type:"map",key:{},value:{shape:"S8"}},S30:{type:"structure",required:["ComparisonOperator"],members:{AttributeValueList:{shape:"S2d"},ComparisonOperator:{}}},S31:{type:"map",key:{},value:{shape:"S30"}}},paginators:{BatchGetItem:{input_token:"RequestItems",output_token:"UnprocessedKeys"},ListTables:{input_token:"ExclusiveStartTableName",output_token:"LastEvaluatedTableName",limit_key:"Limit",result_key:"TableNames"},Query:{input_token:"ExclusiveStartKey",output_token:"LastEvaluatedKey",limit_key:"Limit",result_key:"Items"},Scan:{input_token:"ExclusiveStartKey",output_token:"LastEvaluatedKey",limit_key:"Limit",result_key:"Items"}},waiters:{__default__:{interval:20,max_attempts:25},__TableState:{operation:"DescribeTable"},TableExists:{"extends":"__TableState",ignore_errors:["ResourceNotFoundException"],success_type:"output",success_path:"Table.TableStatus",success_value:"ACTIVE"},TableNotExists:{"extends":"__TableState",success_type:"error",success_value:"ResourceNotFoundException"}}},n.apiLoader.services.elastictranscoder={},n.ElasticTranscoder=n.Service.defineService("elastictranscoder",["2012-09-25"]),n.apiLoader.services.elastictranscoder["2012-09-25"]={version:"2.0",metadata:{apiVersion:"2012-09-25",endpointPrefix:"elastictranscoder",serviceFullName:"Amazon Elastic Transcoder",signatureVersion:"v4",protocol:"rest-json"},operations:{CancelJob:{http:{method:"DELETE",requestUri:"/2012-09-25/jobs/{Id}",responseCode:202},input:{type:"structure",required:["Id"],members:{Id:{location:"uri",locationName:"Id"}}},output:{type:"structure",members:{}}},CreateJob:{http:{requestUri:"/2012-09-25/jobs",responseCode:201},input:{type:"structure",required:["PipelineId","Input"],members:{PipelineId:{},Input:{shape:"S5"},Output:{shape:"Sk"},Outputs:{type:"list",member:{shape:"Sk"}},OutputKeyPrefix:{},Playlists:{type:"list",member:{type:"structure",members:{Name:{},Format:{},OutputKeys:{shape:"S1i"},HlsContentProtection:{shape:"S1j"},PlayReadyDrm:{shape:"S1n"}}}},UserMetadata:{shape:"S1s"}}},output:{type:"structure",members:{Job:{shape:"S1v"}}}},CreatePipeline:{http:{requestUri:"/2012-09-25/pipelines",responseCode:201},input:{type:"structure",required:["Name","InputBucket","Role"],members:{Name:{},InputBucket:{},OutputBucket:{},Role:{},AwsKmsKeyArn:{},Notifications:{shape:"S27"},ContentConfig:{shape:"S29"},ThumbnailConfig:{shape:"S29"}}},output:{type:"structure",members:{Pipeline:{shape:"S2i"},Warnings:{shape:"S2k"}}}},CreatePreset:{http:{requestUri:"/2012-09-25/presets",responseCode:201},input:{type:"structure",required:["Name","Container"],members:{Name:{},Description:{},Container:{},Video:{shape:"S2o"},Audio:{shape:"S34"},Thumbnails:{shape:"S3b"}}},output:{type:"structure",members:{Preset:{shape:"S3f"},Warning:{}}}},DeletePipeline:{http:{method:"DELETE",requestUri:"/2012-09-25/pipelines/{Id}",responseCode:202},input:{type:"structure",required:["Id"],members:{Id:{location:"uri",locationName:"Id"}}},output:{type:"structure",members:{}}},DeletePreset:{http:{method:"DELETE",requestUri:"/2012-09-25/presets/{Id}",responseCode:202},input:{type:"structure",required:["Id"],members:{Id:{location:"uri",locationName:"Id"}}},output:{type:"structure",members:{}}},ListJobsByPipeline:{http:{method:"GET",requestUri:"/2012-09-25/jobsByPipeline/{PipelineId}"},input:{type:"structure",required:["PipelineId"],members:{PipelineId:{location:"uri",locationName:"PipelineId"},Ascending:{location:"querystring",locationName:"Ascending"},PageToken:{location:"querystring",locationName:"PageToken"}}},output:{type:"structure",members:{Jobs:{shape:"S3o"},NextPageToken:{}}}},ListJobsByStatus:{http:{method:"GET",requestUri:"/2012-09-25/jobsByStatus/{Status}"},input:{type:"structure",required:["Status"],members:{Status:{location:"uri",locationName:"Status"},Ascending:{location:"querystring",locationName:"Ascending"},PageToken:{location:"querystring",locationName:"PageToken"}}},output:{type:"structure",members:{Jobs:{shape:"S3o"},NextPageToken:{}}}},ListPipelines:{http:{method:"GET",requestUri:"/2012-09-25/pipelines"},input:{type:"structure",members:{Ascending:{location:"querystring",locationName:"Ascending"},PageToken:{location:"querystring",locationName:"PageToken"}}},output:{type:"structure",members:{Pipelines:{type:"list",member:{shape:"S2i"}},NextPageToken:{}}}},ListPresets:{http:{method:"GET",requestUri:"/2012-09-25/presets"},input:{type:"structure",members:{Ascending:{location:"querystring",locationName:"Ascending"},PageToken:{location:"querystring",locationName:"PageToken"}}},output:{type:"structure",members:{Presets:{type:"list",member:{shape:"S3f"}},NextPageToken:{}}}},ReadJob:{http:{method:"GET",requestUri:"/2012-09-25/jobs/{Id}"},input:{type:"structure",required:["Id"],members:{Id:{location:"uri",locationName:"Id"}}},output:{type:"structure",members:{Job:{shape:"S1v"}}}},ReadPipeline:{http:{method:"GET",requestUri:"/2012-09-25/pipelines/{Id}"},input:{type:"structure",required:["Id"],members:{Id:{location:"uri",locationName:"Id"}}},output:{type:"structure",members:{Pipeline:{shape:"S2i"},Warnings:{shape:"S2k"}}}},ReadPreset:{http:{method:"GET",requestUri:"/2012-09-25/presets/{Id}"},input:{type:"structure",required:["Id"],members:{Id:{location:"uri",locationName:"Id"}}},output:{type:"structure",members:{Preset:{shape:"S3f"}}}},TestRole:{http:{requestUri:"/2012-09-25/roleTests",responseCode:200},input:{type:"structure",required:["Role","InputBucket","OutputBucket","Topics"],members:{Role:{},InputBucket:{},OutputBucket:{},Topics:{type:"list",member:{}}}},output:{type:"structure",members:{Success:{},Messages:{type:"list",member:{}}}}},UpdatePipeline:{http:{method:"PUT",requestUri:"/2012-09-25/pipelines/{Id}",responseCode:200},input:{type:"structure",required:["Id"],members:{Id:{location:"uri",locationName:"Id"},Name:{},InputBucket:{},Role:{},AwsKmsKeyArn:{},Notifications:{shape:"S27"},ContentConfig:{shape:"S29"},ThumbnailConfig:{shape:"S29"}}},output:{type:"structure",members:{Pipeline:{shape:"S2i"},Warnings:{shape:"S2k"}}}},UpdatePipelineNotifications:{http:{requestUri:"/2012-09-25/pipelines/{Id}/notifications"},input:{type:"structure",required:["Id","Notifications"],members:{Id:{location:"uri",locationName:"Id"},Notifications:{shape:"S27"}}},output:{type:"structure",members:{Pipeline:{shape:"S2i"}}}},UpdatePipelineStatus:{http:{requestUri:"/2012-09-25/pipelines/{Id}/status"},input:{type:"structure",required:["Id","Status"],members:{Id:{location:"uri",locationName:"Id"},Status:{}}},output:{type:"structure",members:{Pipeline:{shape:"S2i"}}}}},shapes:{S5:{type:"structure",members:{Key:{},FrameRate:{},Resolution:{},AspectRatio:{},Interlaced:{},Container:{},Encryption:{shape:"Sc"},DetectedProperties:{type:"structure",members:{Width:{type:"integer"},Height:{type:"integer"},FrameRate:{},FileSize:{type:"long"},DurationMillis:{type:"long"}}}}},Sc:{type:"structure",members:{Mode:{},Key:{},KeyMd5:{},InitializationVector:{}}},Sk:{type:"structure",members:{Key:{},ThumbnailPattern:{},ThumbnailEncryption:{shape:"Sc"},Rotate:{},PresetId:{},SegmentDuration:{},Watermarks:{shape:"Sn"},AlbumArt:{shape:"Sr"},Composition:{shape:"Sz"},Captions:{shape:"S13"},Encryption:{shape:"Sc"}}},Sn:{type:"list",member:{type:"structure",members:{PresetWatermarkId:{},InputKey:{},Encryption:{shape:"Sc"}}}},Sr:{type:"structure",members:{MergePolicy:{},Artwork:{type:"list",member:{type:"structure",members:{InputKey:{},MaxWidth:{},MaxHeight:{},SizingPolicy:{},PaddingPolicy:{},AlbumArtFormat:{},Encryption:{shape:"Sc"}}}}}},Sz:{type:"list",member:{type:"structure",members:{TimeSpan:{type:"structure",members:{StartTime:{},Duration:{}}}}}},S13:{type:"structure",members:{MergePolicy:{},CaptionSources:{type:"list",member:{type:"structure",members:{Key:{},Language:{},TimeOffset:{},Label:{},Encryption:{shape:"Sc"}}}},CaptionFormats:{type:"list",member:{type:"structure",members:{Format:{},Pattern:{},Encryption:{shape:"Sc"}}}}}},S1i:{type:"list",member:{}},S1j:{type:"structure",members:{Method:{},Key:{},KeyMd5:{},InitializationVector:{},LicenseAcquisitionUrl:{},KeyStoragePolicy:{}}},S1n:{type:"structure",members:{Format:{},Key:{},KeyMd5:{},KeyId:{},InitializationVector:{},LicenseAcquisitionUrl:{}}},S1s:{type:"map",key:{},value:{}},S1v:{type:"structure",members:{Id:{},Arn:{},PipelineId:{},Input:{shape:"S5"},Output:{shape:"S1w"},Outputs:{type:"list",member:{shape:"S1w"}},OutputKeyPrefix:{},Playlists:{type:"list",member:{type:"structure",members:{Name:{},Format:{},OutputKeys:{shape:"S1i"},HlsContentProtection:{shape:"S1j"},PlayReadyDrm:{shape:"S1n"},Status:{},StatusDetail:{}}}},Status:{},UserMetadata:{shape:"S1s"},Timing:{type:"structure",members:{SubmitTimeMillis:{type:"long"},StartTimeMillis:{type:"long"},FinishTimeMillis:{type:"long"}}}}},S1w:{type:"structure",members:{Id:{},Key:{},ThumbnailPattern:{},ThumbnailEncryption:{shape:"Sc"},Rotate:{},PresetId:{},SegmentDuration:{},Status:{},StatusDetail:{},Duration:{type:"long"},Width:{type:"integer"},Height:{type:"integer"},FrameRate:{},FileSize:{type:"long"},DurationMillis:{type:"long"},Watermarks:{shape:"Sn"},AlbumArt:{shape:"Sr"},Composition:{shape:"Sz"},Captions:{shape:"S13"},Encryption:{shape:"Sc"},AppliedColorSpaceConversion:{}}},S27:{type:"structure",members:{Progressing:{},Completed:{},Warning:{},Error:{}}},S29:{type:"structure",members:{Bucket:{},StorageClass:{},Permissions:{type:"list",member:{type:"structure",members:{GranteeType:{},Grantee:{},Access:{type:"list",member:{}}}}}}},S2i:{type:"structure",members:{Id:{},Arn:{},Name:{},Status:{},InputBucket:{},OutputBucket:{},Role:{},AwsKmsKeyArn:{},Notifications:{shape:"S27"},ContentConfig:{shape:"S29"},ThumbnailConfig:{shape:"S29"}}},S2k:{type:"list",member:{type:"structure",members:{Code:{},Message:{}}}},S2o:{type:"structure",members:{Codec:{},CodecOptions:{type:"map",key:{},value:{}},KeyframesMaxDist:{},FixedGOP:{},BitRate:{},FrameRate:{},MaxFrameRate:{},Resolution:{},AspectRatio:{},MaxWidth:{},MaxHeight:{},DisplayAspectRatio:{},SizingPolicy:{},PaddingPolicy:{},Watermarks:{type:"list",member:{type:"structure",members:{Id:{},MaxWidth:{},MaxHeight:{},SizingPolicy:{},HorizontalAlign:{},HorizontalOffset:{},VerticalAlign:{},VerticalOffset:{},Opacity:{},Target:{}}}}}},S34:{type:"structure",members:{Codec:{},SampleRate:{},BitRate:{},Channels:{},CodecOptions:{type:"structure",members:{Profile:{}}}}},S3b:{type:"structure",members:{Format:{},Interval:{},Resolution:{},AspectRatio:{},MaxWidth:{},MaxHeight:{},SizingPolicy:{},PaddingPolicy:{}}},S3f:{type:"structure",members:{Id:{},Arn:{},Name:{},Description:{},Container:{},Audio:{shape:"S34"},Video:{shape:"S2o"},Thumbnails:{shape:"S3b"},Type:{}}},S3o:{type:"list",member:{shape:"S1v"}}},paginators:{ListJobsByPipeline:{input_token:"PageToken",output_token:"NextPageToken",result_key:"Jobs"},ListJobsByStatus:{input_token:"PageToken",output_token:"NextPageToken",result_key:"Jobs"},ListPipelines:{input_token:"PageToken",output_token:"NextPageToken",result_key:"Pipelines"},ListPresets:{input_token:"PageToken",output_token:"NextPageToken",result_key:"Presets"}},waiters:{JobComplete:{operation:"ReadJob",success_type:"output",success_path:"Job.Status",interval:30,max_attempts:120,success_value:"Complete",failure_value:["Canceled","Error"]}}},n.apiLoader.services.kinesis={},n.Kinesis=n.Service.defineService("kinesis",["2013-12-02"]),n.apiLoader.services.kinesis["2013-12-02"]={metadata:{apiVersion:"2013-12-02",endpointPrefix:"kinesis",jsonVersion:"1.1",serviceAbbreviation:"Kinesis",serviceFullName:"Amazon Kinesis",signatureVersion:"v4",targetPrefix:"Kinesis_20131202",protocol:"json"},operations:{AddTagsToStream:{input:{type:"structure",required:["StreamName","Tags"],members:{StreamName:{},Tags:{type:"map",key:{},value:{}}}},http:{}},CreateStream:{input:{type:"structure",required:["StreamName","ShardCount"],members:{StreamName:{},ShardCount:{type:"integer"}}},http:{}},DeleteStream:{input:{type:"structure",required:["StreamName"],members:{StreamName:{}}},http:{}},DescribeStream:{input:{type:"structure",required:["StreamName"],members:{StreamName:{},Limit:{type:"integer"},ExclusiveStartShardId:{}}},output:{type:"structure",required:["StreamDescription"],members:{StreamDescription:{type:"structure",required:["StreamName","StreamARN","StreamStatus","Shards","HasMoreShards"],members:{StreamName:{},StreamARN:{},StreamStatus:{},Shards:{type:"list",member:{type:"structure",required:["ShardId","HashKeyRange","SequenceNumberRange"],members:{ShardId:{},ParentShardId:{},AdjacentParentShardId:{},HashKeyRange:{type:"structure",required:["StartingHashKey","EndingHashKey"],members:{StartingHashKey:{},EndingHashKey:{}}},SequenceNumberRange:{type:"structure",required:["StartingSequenceNumber"],members:{StartingSequenceNumber:{},EndingSequenceNumber:{}}}}}},HasMoreShards:{type:"boolean"}}}}},http:{}},GetRecords:{input:{type:"structure",required:["ShardIterator"],members:{ShardIterator:{},Limit:{type:"integer"}}},output:{type:"structure",required:["Records"],members:{Records:{type:"list",member:{type:"structure",required:["SequenceNumber","Data","PartitionKey"],members:{SequenceNumber:{},Data:{type:"blob"},PartitionKey:{}}}},NextShardIterator:{}}},http:{}},GetShardIterator:{input:{type:"structure",required:["StreamName","ShardId","ShardIteratorType"],members:{StreamName:{},ShardId:{},ShardIteratorType:{},StartingSequenceNumber:{}}},output:{type:"structure",members:{ShardIterator:{}}},http:{}},ListStreams:{input:{type:"structure",members:{Limit:{type:"integer"},ExclusiveStartStreamName:{}}},output:{type:"structure",required:["StreamNames","HasMoreStreams"],members:{StreamNames:{type:"list",member:{}},HasMoreStreams:{type:"boolean"}}},http:{}},ListTagsForStream:{input:{type:"structure",required:["StreamName"],members:{StreamName:{},ExclusiveStartTagKey:{},Limit:{type:"integer"}}},output:{type:"structure",required:["Tags","HasMoreTags"],members:{Tags:{type:"list",member:{type:"structure",required:["Key"],members:{Key:{},Value:{}}}},HasMoreTags:{type:"boolean"}}},http:{}},MergeShards:{input:{type:"structure",required:["StreamName","ShardToMerge","AdjacentShardToMerge"],members:{StreamName:{},ShardToMerge:{},AdjacentShardToMerge:{}}},http:{}},PutRecord:{input:{type:"structure",required:["StreamName","Data","PartitionKey"],members:{StreamName:{},Data:{type:"blob"},PartitionKey:{},ExplicitHashKey:{},SequenceNumberForOrdering:{}}},output:{type:"structure",required:["ShardId","SequenceNumber"],members:{ShardId:{},SequenceNumber:{}}},http:{}},PutRecords:{input:{type:"structure",required:["Records","StreamName"],members:{Records:{type:"list",member:{type:"structure",required:["Data","PartitionKey"],members:{Data:{type:"blob"},ExplicitHashKey:{},PartitionKey:{}}}},StreamName:{}}},output:{type:"structure",required:["Records"],members:{FailedRecordCount:{type:"integer"},Records:{type:"list",member:{type:"structure",members:{SequenceNumber:{},ShardId:{},ErrorCode:{},ErrorMessage:{}}}}}},http:{}},RemoveTagsFromStream:{input:{type:"structure",required:["StreamName","TagKeys"],members:{StreamName:{},TagKeys:{type:"list",member:{}}}},http:{}},SplitShard:{input:{type:"structure",required:["StreamName","ShardToSplit","NewStartingHashKey"],members:{StreamName:{},ShardToSplit:{},NewStartingHashKey:{}}},http:{}}},shapes:{},paginators:{DescribeStream:{input_token:"ExclusiveStartShardId",limit_key:"Limit",more_results:"StreamDescription.HasMoreShards",output_token:"StreamDescription.Shards[-1].ShardId",result_key:"StreamDescription.Shards"},ListStreams:{input_token:"ExclusiveStartStreamName",limit_key:"Limit",more_results:"HasMoreStreams",output_token:"StreamNames[-1]",result_key:"StreamNames"}}},n.apiLoader.services.lambda={},n.Lambda=n.Service.defineService("lambda",["2014-11-11","2015-03-31"]),n.apiLoader.services.lambda["2015-03-31"]={version:"2.0",metadata:{apiVersion:"2015-03-31",endpointPrefix:"lambda",serviceFullName:"AWS Lambda",signatureVersion:"v4",protocol:"rest-json"},operations:{AddPermission:{http:{requestUri:"/2015-03-31/functions/{FunctionName}/versions/HEAD/policy",responseCode:201},input:{type:"structure",required:["FunctionName","StatementId","Action","Principal"],members:{FunctionName:{location:"uri",locationName:"FunctionName"},StatementId:{},Action:{},Principal:{},SourceArn:{},SourceAccount:{}}},output:{type:"structure",members:{Statement:{}}}},CreateEventSourceMapping:{http:{requestUri:"/2015-03-31/event-source-mappings/",responseCode:202},input:{type:"structure",required:["EventSourceArn","FunctionName","StartingPosition"],members:{EventSourceArn:{},FunctionName:{},Enabled:{type:"boolean"},BatchSize:{type:"integer"},StartingPosition:{}}},output:{shape:"Se"}},CreateFunction:{http:{requestUri:"/2015-03-31/functions",responseCode:201},input:{type:"structure",required:["FunctionName","Runtime","Role","Handler","Code"],members:{FunctionName:{},Runtime:{},Role:{},Handler:{},Description:{},Timeout:{type:"integer"},MemorySize:{type:"integer"},Code:{type:"structure",members:{ZipFile:{type:"blob"}}}}},output:{shape:"Sq"}},DeleteEventSourceMapping:{http:{method:"DELETE",requestUri:"/2015-03-31/event-source-mappings/{UUID}",responseCode:202},input:{type:"structure",required:["UUID"],members:{UUID:{location:"uri",locationName:"UUID"}}},output:{shape:"Se"}},DeleteFunction:{http:{method:"DELETE",requestUri:"/2015-03-31/functions/{FunctionName}",responseCode:204},input:{type:"structure",required:["FunctionName"],members:{FunctionName:{location:"uri",locationName:"FunctionName"}}}},GetEventSourceMapping:{http:{method:"GET",requestUri:"/2015-03-31/event-source-mappings/{UUID}",responseCode:200},input:{type:"structure",required:["UUID"],members:{UUID:{location:"uri",locationName:"UUID"}}},output:{shape:"Se"}},GetFunction:{http:{method:"GET",requestUri:"/2015-03-31/functions/{FunctionName}/versions/HEAD",responseCode:200},input:{type:"structure",required:["FunctionName"],members:{FunctionName:{location:"uri",locationName:"FunctionName"}}},output:{type:"structure",members:{Configuration:{shape:"Sq"},Code:{type:"structure",members:{RepositoryType:{},Location:{}}}}}},GetFunctionConfiguration:{http:{method:"GET",requestUri:"/2015-03-31/functions/{FunctionName}/versions/HEAD/configuration",responseCode:200},input:{type:"structure",required:["FunctionName"],members:{FunctionName:{location:"uri",locationName:"FunctionName"}}},output:{shape:"Sq"}},GetPolicy:{http:{method:"GET",requestUri:"/2015-03-31/functions/{FunctionName}/versions/HEAD/policy",responseCode:200},input:{type:"structure",required:["FunctionName"],members:{FunctionName:{location:"uri",locationName:"FunctionName"}}},output:{type:"structure",members:{Policy:{}}}},Invoke:{http:{requestUri:"/2015-03-31/functions/{FunctionName}/invocations"},input:{type:"structure",required:["FunctionName"],members:{FunctionName:{location:"uri",locationName:"FunctionName"},InvocationType:{location:"header",locationName:"X-Amz-Invocation-Type"},LogType:{location:"header",locationName:"X-Amz-Log-Type"},ClientContext:{location:"header",locationName:"X-Amz-Client-Context"},Payload:{type:"blob"}},payload:"Payload"},output:{type:"structure",members:{StatusCode:{location:"statusCode",type:"integer"},FunctionError:{location:"header",locationName:"X-Amz-Function-Error"},LogResult:{location:"header",locationName:"X-Amz-Log-Result"},Payload:{type:"blob"}},payload:"Payload"}},InvokeAsync:{http:{requestUri:"/2014-11-13/functions/{FunctionName}/invoke-async/",responseCode:202},input:{deprecated:!0,type:"structure",required:["FunctionName","InvokeArgs"],members:{FunctionName:{location:"uri",locationName:"FunctionName"},InvokeArgs:{type:"blob",streaming:!0}},payload:"InvokeArgs"},output:{deprecated:!0,type:"structure",members:{Status:{location:"statusCode",type:"integer"}}},deprecated:!0},ListEventSourceMappings:{http:{method:"GET",requestUri:"/2015-03-31/event-source-mappings/",responseCode:200},input:{type:"structure",members:{EventSourceArn:{location:"querystring",locationName:"EventSourceArn"},FunctionName:{location:"querystring",locationName:"FunctionName"},Marker:{location:"querystring",locationName:"Marker"},MaxItems:{location:"querystring",locationName:"MaxItems",type:"integer"}}},output:{type:"structure",members:{NextMarker:{},EventSourceMappings:{type:"list",member:{shape:"Se"}}}}},ListFunctions:{http:{method:"GET",requestUri:"/2015-03-31/functions/",responseCode:200},input:{type:"structure",members:{Marker:{location:"querystring",locationName:"Marker"},MaxItems:{location:"querystring",locationName:"MaxItems",type:"integer"}}},output:{type:"structure",members:{NextMarker:{},Functions:{type:"list",member:{shape:"Sq"}}}}},RemovePermission:{http:{method:"DELETE",requestUri:"/2015-03-31/functions/{FunctionName}/versions/HEAD/policy/{StatementId}",responseCode:204},input:{type:"structure",required:["FunctionName","StatementId"],members:{FunctionName:{location:"uri",locationName:"FunctionName"},StatementId:{location:"uri",locationName:"StatementId"}}}},UpdateEventSourceMapping:{http:{method:"PUT",requestUri:"/2015-03-31/event-source-mappings/{UUID}",responseCode:202},input:{type:"structure",required:["UUID"],members:{UUID:{location:"uri",locationName:"UUID"},FunctionName:{},Enabled:{type:"boolean"},BatchSize:{type:"integer"}}},output:{shape:"Se"}},UpdateFunctionCode:{http:{method:"PUT",requestUri:"/2015-03-31/functions/{FunctionName}/versions/HEAD/code",responseCode:200},input:{type:"structure",required:["FunctionName","ZipFile"],members:{FunctionName:{location:"uri",locationName:"FunctionName"},ZipFile:{type:"blob"}}},output:{shape:"Sq"}},UpdateFunctionConfiguration:{http:{method:"PUT",requestUri:"/2015-03-31/functions/{FunctionName}/versions/HEAD/configuration",responseCode:200},input:{type:"structure",required:["FunctionName"],members:{FunctionName:{location:"uri",locationName:"FunctionName"},Role:{},Handler:{},Description:{},Timeout:{type:"integer"},MemorySize:{type:"integer"}}},output:{shape:"Sq"}}},shapes:{Se:{type:"structure",members:{UUID:{},BatchSize:{type:"integer"},EventSourceArn:{},FunctionArn:{},LastModified:{type:"timestamp"},LastProcessingResult:{},State:{},StateTransitionReason:{}}},Sq:{type:"structure",members:{FunctionName:{},FunctionArn:{},Runtime:{},Role:{},Handler:{},CodeSize:{type:"long"},Description:{},Timeout:{type:"integer"},MemorySize:{type:"integer"},LastModified:{}}}},paginators:{ListEventSourceMappings:{input_token:"Marker",output_token:"NextMarker",limit_key:"MaxItems",result_key:"EventSourceMappings"},ListFunctions:{input_token:"Marker",output_token:"NextMarker",limit_key:"MaxItems",result_key:"Functions"}}},n.apiLoader.services.mobileanalytics={},n.MobileAnalytics=n.Service.defineService("mobileanalytics",["2014-06-05"]),n.apiLoader.services.mobileanalytics["2014-06-05"]={version:"2.0",metadata:{apiVersion:"2014-06-05",endpointPrefix:"mobileanalytics",serviceFullName:"Amazon Mobile Analytics",signatureVersion:"v4",protocol:"rest-json"},operations:{PutEvents:{http:{requestUri:"/2014-06-05/events",responseCode:202},input:{type:"structure",required:["events","clientContext"],members:{events:{type:"list",member:{type:"structure",required:["eventType","timestamp"],members:{eventType:{},timestamp:{},session:{type:"structure",members:{id:{},duration:{type:"long"},startTimestamp:{},stopTimestamp:{}}},version:{},attributes:{type:"map",key:{},value:{}},metrics:{type:"map",key:{},value:{type:"double"}}}}},clientContext:{location:"header",locationName:"x-amz-Client-Context"},clientContextEncoding:{location:"header",locationName:"x-amz-Client-Context-Encoding"}}}}},shapes:{}},n.apiLoader.services.s3={},n.S3=n.Service.defineService("s3",["2006-03-01"]),e("./services/s3"),n.apiLoader.services.s3["2006-03-01"]={version:"2.0",metadata:{apiVersion:"2006-03-01",checksumFormat:"md5",endpointPrefix:"s3",globalEndpoint:"s3.amazonaws.com",serviceAbbreviation:"Amazon S3",serviceFullName:"Amazon Simple Storage Service",signatureVersion:"s3",timestampFormat:"rfc822",protocol:"rest-xml"},operations:{AbortMultipartUpload:{http:{method:"DELETE",requestUri:"/{Bucket}/{Key+}"},input:{type:"structure",required:["Bucket","Key","UploadId"],members:{Bucket:{location:"uri",locationName:"Bucket"},Key:{location:"uri",locationName:"Key"},UploadId:{location:"querystring",locationName:"uploadId"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}}},output:{type:"structure",members:{RequestCharged:{location:"header",locationName:"x-amz-request-charged"}}}},CompleteMultipartUpload:{http:{requestUri:"/{Bucket}/{Key+}"},input:{type:"structure",required:["Bucket","Key","UploadId"],members:{Bucket:{location:"uri",locationName:"Bucket"},Key:{location:"uri",locationName:"Key"},MultipartUpload:{locationName:"CompleteMultipartUpload",xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},type:"structure",members:{Parts:{locationName:"Part",type:"list",member:{type:"structure",members:{ETag:{},PartNumber:{type:"integer"}}},flattened:!0}}},UploadId:{location:"querystring",locationName:"uploadId"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}},payload:"MultipartUpload"},output:{type:"structure",members:{Location:{},Bucket:{},Key:{},Expiration:{location:"header",locationName:"x-amz-expiration"},ETag:{},ServerSideEncryption:{location:"header",locationName:"x-amz-server-side-encryption"},VersionId:{location:"header",locationName:"x-amz-version-id"},SSEKMSKeyId:{shape:"Sj",location:"header",locationName:"x-amz-server-side-encryption-aws-kms-key-id"},RequestCharged:{location:"header",locationName:"x-amz-request-charged"}}}},CopyObject:{http:{method:"PUT",requestUri:"/{Bucket}/{Key+}"},input:{type:"structure",required:["Bucket","CopySource","Key"],members:{ACL:{location:"header",locationName:"x-amz-acl"},Bucket:{location:"uri",locationName:"Bucket"},CacheControl:{location:"header",locationName:"Cache-Control"},ContentDisposition:{location:"header",locationName:"Content-Disposition"},ContentEncoding:{location:"header",locationName:"Content-Encoding"},ContentLanguage:{location:"header",locationName:"Content-Language"},ContentType:{location:"header",locationName:"Content-Type"},CopySource:{location:"header",locationName:"x-amz-copy-source"},CopySourceIfMatch:{location:"header",locationName:"x-amz-copy-source-if-match"},CopySourceIfModifiedSince:{location:"header",locationName:"x-amz-copy-source-if-modified-since",type:"timestamp"},CopySourceIfNoneMatch:{location:"header",locationName:"x-amz-copy-source-if-none-match"},CopySourceIfUnmodifiedSince:{location:"header",locationName:"x-amz-copy-source-if-unmodified-since",type:"timestamp"},Expires:{location:"header",locationName:"Expires",type:"timestamp"},GrantFullControl:{location:"header",locationName:"x-amz-grant-full-control"},GrantRead:{location:"header",locationName:"x-amz-grant-read"},GrantReadACP:{location:"header",locationName:"x-amz-grant-read-acp"},GrantWriteACP:{location:"header",locationName:"x-amz-grant-write-acp"},Key:{location:"uri",locationName:"Key"},Metadata:{shape:"S11",location:"headers",locationName:"x-amz-meta-"},MetadataDirective:{location:"header",locationName:"x-amz-metadata-directive"},ServerSideEncryption:{location:"header",locationName:"x-amz-server-side-encryption"},StorageClass:{location:"header",locationName:"x-amz-storage-class"},WebsiteRedirectLocation:{location:"header",locationName:"x-amz-website-redirect-location"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKey:{shape:"S18",location:"header",locationName:"x-amz-server-side-encryption-customer-key"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},SSEKMSKeyId:{shape:"Sj",location:"header",locationName:"x-amz-server-side-encryption-aws-kms-key-id"},CopySourceSSECustomerAlgorithm:{location:"header",locationName:"x-amz-copy-source-server-side-encryption-customer-algorithm"},CopySourceSSECustomerKey:{shape:"S1b",location:"header",locationName:"x-amz-copy-source-server-side-encryption-customer-key"},CopySourceSSECustomerKeyMD5:{location:"header",locationName:"x-amz-copy-source-server-side-encryption-customer-key-MD5"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}}},output:{type:"structure",members:{CopyObjectResult:{type:"structure",members:{ETag:{},LastModified:{type:"timestamp"}}},Expiration:{location:"header",locationName:"x-amz-expiration"},CopySourceVersionId:{location:"header",locationName:"x-amz-copy-source-version-id"},ServerSideEncryption:{location:"header",locationName:"x-amz-server-side-encryption"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},SSEKMSKeyId:{shape:"Sj",location:"header",locationName:"x-amz-server-side-encryption-aws-kms-key-id"},RequestCharged:{location:"header",locationName:"x-amz-request-charged"}},payload:"CopyObjectResult"},alias:"PutObjectCopy"},CreateBucket:{http:{method:"PUT",requestUri:"/{Bucket}"},input:{type:"structure",required:["Bucket"],members:{ACL:{location:"header",locationName:"x-amz-acl"},Bucket:{location:"uri",locationName:"Bucket"},CreateBucketConfiguration:{xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"CreateBucketConfiguration",type:"structure",members:{LocationConstraint:{}}},GrantFullControl:{location:"header",locationName:"x-amz-grant-full-control"},GrantRead:{location:"header",locationName:"x-amz-grant-read"},GrantReadACP:{location:"header",locationName:"x-amz-grant-read-acp"},GrantWrite:{location:"header",locationName:"x-amz-grant-write"},GrantWriteACP:{location:"header",locationName:"x-amz-grant-write-acp"}},payload:"CreateBucketConfiguration"},output:{type:"structure",members:{Location:{location:"header",locationName:"Location"}}},alias:"PutBucket"},CreateMultipartUpload:{http:{requestUri:"/{Bucket}/{Key+}?uploads"},input:{type:"structure",required:["Bucket","Key"],members:{ACL:{location:"header",locationName:"x-amz-acl"},Bucket:{location:"uri",locationName:"Bucket"},CacheControl:{location:"header",locationName:"Cache-Control"},ContentDisposition:{location:"header",locationName:"Content-Disposition"},ContentEncoding:{location:"header",locationName:"Content-Encoding"},ContentLanguage:{location:"header",locationName:"Content-Language"},ContentType:{location:"header",locationName:"Content-Type"},Expires:{location:"header",locationName:"Expires",type:"timestamp"},GrantFullControl:{location:"header",locationName:"x-amz-grant-full-control"},GrantRead:{location:"header",locationName:"x-amz-grant-read"},GrantReadACP:{location:"header",locationName:"x-amz-grant-read-acp"},GrantWriteACP:{location:"header",locationName:"x-amz-grant-write-acp"},Key:{location:"uri",locationName:"Key"},Metadata:{shape:"S11",location:"headers",locationName:"x-amz-meta-"},ServerSideEncryption:{location:"header",locationName:"x-amz-server-side-encryption"},StorageClass:{location:"header",locationName:"x-amz-storage-class"},WebsiteRedirectLocation:{location:"header",locationName:"x-amz-website-redirect-location"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKey:{shape:"S18",location:"header",locationName:"x-amz-server-side-encryption-customer-key"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},SSEKMSKeyId:{shape:"Sj",location:"header",locationName:"x-amz-server-side-encryption-aws-kms-key-id"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}}},output:{type:"structure",members:{Bucket:{locationName:"Bucket"},Key:{},UploadId:{},ServerSideEncryption:{location:"header",locationName:"x-amz-server-side-encryption"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},SSEKMSKeyId:{shape:"Sj",location:"header",locationName:"x-amz-server-side-encryption-aws-kms-key-id"},RequestCharged:{location:"header",locationName:"x-amz-request-charged"}}},alias:"InitiateMultipartUpload"},DeleteBucket:{http:{method:"DELETE",requestUri:"/{Bucket}"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}}},DeleteBucketCors:{http:{method:"DELETE",requestUri:"/{Bucket}?cors"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}}},DeleteBucketLifecycle:{http:{method:"DELETE",requestUri:"/{Bucket}?lifecycle"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}}},DeleteBucketPolicy:{http:{method:"DELETE",requestUri:"/{Bucket}?policy"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}}},DeleteBucketReplication:{http:{method:"DELETE",requestUri:"/{Bucket}?replication"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}}},DeleteBucketTagging:{http:{method:"DELETE",requestUri:"/{Bucket}?tagging"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}}},DeleteBucketWebsite:{http:{method:"DELETE",requestUri:"/{Bucket}?website"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}}},DeleteObject:{http:{method:"DELETE",requestUri:"/{Bucket}/{Key+}"},input:{type:"structure",required:["Bucket","Key"],members:{Bucket:{location:"uri",locationName:"Bucket"},Key:{location:"uri",locationName:"Key"},MFA:{location:"header",locationName:"x-amz-mfa"},VersionId:{location:"querystring",locationName:"versionId"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}}},output:{type:"structure",members:{DeleteMarker:{location:"header",locationName:"x-amz-delete-marker",type:"boolean"},VersionId:{location:"header",locationName:"x-amz-version-id"},RequestCharged:{location:"header",locationName:"x-amz-request-charged"}}}},DeleteObjects:{http:{requestUri:"/{Bucket}?delete"},input:{type:"structure",required:["Bucket","Delete"],members:{Bucket:{location:"uri",locationName:"Bucket"},Delete:{xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"Delete",type:"structure",required:["Objects"],members:{Objects:{locationName:"Object",type:"list",member:{type:"structure",required:["Key"],members:{Key:{},VersionId:{}}},flattened:!0},Quiet:{type:"boolean"}}},MFA:{location:"header",locationName:"x-amz-mfa"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}},payload:"Delete"},output:{type:"structure",members:{Deleted:{type:"list",member:{type:"structure",members:{Key:{},VersionId:{},DeleteMarker:{type:"boolean"},DeleteMarkerVersionId:{}}},flattened:!0},RequestCharged:{location:"header",locationName:"x-amz-request-charged"},Errors:{locationName:"Error",type:"list",member:{type:"structure",members:{Key:{},VersionId:{},Code:{},Message:{}}},flattened:!0}}},alias:"DeleteMultipleObjects"},GetBucketAcl:{http:{method:"GET",requestUri:"/{Bucket}?acl"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}},output:{type:"structure",members:{Owner:{shape:"S2f"},Grants:{shape:"S2i",locationName:"AccessControlList"}}}},GetBucketCors:{http:{method:"GET",requestUri:"/{Bucket}?cors"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}},output:{type:"structure",members:{CORSRules:{shape:"S2r",locationName:"CORSRule"}}}},GetBucketLifecycle:{http:{method:"GET",requestUri:"/{Bucket}?lifecycle"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}},output:{type:"structure",members:{Rules:{shape:"S34",locationName:"Rule"}}}},GetBucketLocation:{http:{method:"GET",requestUri:"/{Bucket}?location"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}},output:{type:"structure",members:{LocationConstraint:{}}}},GetBucketLogging:{http:{method:"GET",requestUri:"/{Bucket}?logging"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}},output:{type:"structure",members:{LoggingEnabled:{shape:"S3j"}}}},GetBucketNotification:{http:{method:"GET",requestUri:"/{Bucket}?notification"},input:{shape:"S3p"},output:{shape:"S3q"},deprecated:!0},GetBucketNotificationConfiguration:{http:{method:"GET",requestUri:"/{Bucket}?notification"},input:{shape:"S3p"},output:{shape:"S41"}},GetBucketPolicy:{http:{method:"GET",requestUri:"/{Bucket}?policy"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}},output:{type:"structure",members:{Policy:{}},payload:"Policy"}},GetBucketReplication:{http:{method:"GET",requestUri:"/{Bucket}?replication"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}},output:{type:"structure",members:{ReplicationConfiguration:{shape:"S4e"}},payload:"ReplicationConfiguration"}},GetBucketRequestPayment:{http:{method:"GET",requestUri:"/{Bucket}?requestPayment"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}},output:{type:"structure",members:{Payer:{}}}},GetBucketTagging:{http:{method:"GET",requestUri:"/{Bucket}?tagging"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}},output:{type:"structure",required:["TagSet"],members:{TagSet:{shape:"S4p"}}}},GetBucketVersioning:{http:{method:"GET",requestUri:"/{Bucket}?versioning"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}},output:{type:"structure",members:{Status:{},MFADelete:{locationName:"MfaDelete"}}}},GetBucketWebsite:{http:{method:"GET",requestUri:"/{Bucket}?website"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}},output:{type:"structure",members:{RedirectAllRequestsTo:{shape:"S4y"},IndexDocument:{shape:"S51"},ErrorDocument:{shape:"S53"},RoutingRules:{shape:"S54"}}}},GetObject:{http:{method:"GET",requestUri:"/{Bucket}/{Key+}"},input:{type:"structure",required:["Bucket","Key"],members:{Bucket:{location:"uri",locationName:"Bucket"},IfMatch:{location:"header",locationName:"If-Match"},IfModifiedSince:{location:"header",locationName:"If-Modified-Since",type:"timestamp"},IfNoneMatch:{location:"header",locationName:"If-None-Match"},IfUnmodifiedSince:{location:"header",locationName:"If-Unmodified-Since",type:"timestamp"},Key:{location:"uri",locationName:"Key"},Range:{location:"header",locationName:"Range"},ResponseCacheControl:{location:"querystring",locationName:"response-cache-control"},ResponseContentDisposition:{location:"querystring",locationName:"response-content-disposition"},ResponseContentEncoding:{location:"querystring",locationName:"response-content-encoding"},ResponseContentLanguage:{location:"querystring",locationName:"response-content-language"},ResponseContentType:{location:"querystring",locationName:"response-content-type"},ResponseExpires:{location:"querystring",locationName:"response-expires",type:"timestamp"},VersionId:{location:"querystring",locationName:"versionId"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKey:{shape:"S18",location:"header",locationName:"x-amz-server-side-encryption-customer-key"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}}},output:{type:"structure",members:{Body:{streaming:!0,type:"blob"},DeleteMarker:{location:"header",locationName:"x-amz-delete-marker",type:"boolean"},AcceptRanges:{location:"header",locationName:"accept-ranges"},Expiration:{location:"header",locationName:"x-amz-expiration"},Restore:{location:"header",locationName:"x-amz-restore"},LastModified:{location:"header",locationName:"Last-Modified",type:"timestamp"},ContentLength:{location:"header",locationName:"Content-Length",type:"integer"},ETag:{location:"header",locationName:"ETag"},MissingMeta:{location:"header",locationName:"x-amz-missing-meta",type:"integer"},VersionId:{location:"header",locationName:"x-amz-version-id"},CacheControl:{location:"header",locationName:"Cache-Control"},ContentDisposition:{location:"header",locationName:"Content-Disposition"},ContentEncoding:{location:"header",locationName:"Content-Encoding"},ContentLanguage:{location:"header",locationName:"Content-Language"},ContentType:{location:"header",locationName:"Content-Type"},Expires:{location:"header",locationName:"Expires",type:"timestamp"},WebsiteRedirectLocation:{location:"header",locationName:"x-amz-website-redirect-location"},ServerSideEncryption:{location:"header",locationName:"x-amz-server-side-encryption"},Metadata:{shape:"S11",location:"headers",locationName:"x-amz-meta-"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},SSEKMSKeyId:{shape:"Sj",location:"header",locationName:"x-amz-server-side-encryption-aws-kms-key-id"},RequestCharged:{location:"header",locationName:"x-amz-request-charged"},ReplicationStatus:{location:"header",locationName:"x-amz-replication-status"}},payload:"Body"}},GetObjectAcl:{http:{method:"GET",requestUri:"/{Bucket}/{Key+}?acl"},input:{type:"structure",required:["Bucket","Key"],members:{Bucket:{location:"uri",locationName:"Bucket"},Key:{location:"uri",locationName:"Key"},VersionId:{location:"querystring",locationName:"versionId"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}}},output:{type:"structure",members:{Owner:{shape:"S2f"},Grants:{shape:"S2i",locationName:"AccessControlList"},RequestCharged:{location:"header",locationName:"x-amz-request-charged"}}}},GetObjectTorrent:{http:{method:"GET",requestUri:"/{Bucket}/{Key+}?torrent"},input:{type:"structure",required:["Bucket","Key"],members:{Bucket:{location:"uri",locationName:"Bucket"},Key:{location:"uri",locationName:"Key"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}}},output:{type:"structure",members:{Body:{streaming:!0,type:"blob"},RequestCharged:{location:"header",locationName:"x-amz-request-charged"}},payload:"Body"}},HeadBucket:{http:{method:"HEAD",requestUri:"/{Bucket}"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}}},HeadObject:{http:{method:"HEAD",requestUri:"/{Bucket}/{Key+}"},input:{type:"structure",required:["Bucket","Key"],members:{Bucket:{location:"uri",locationName:"Bucket"},IfMatch:{location:"header",locationName:"If-Match"},IfModifiedSince:{location:"header",locationName:"If-Modified-Since",type:"timestamp"},IfNoneMatch:{location:"header",locationName:"If-None-Match"},IfUnmodifiedSince:{location:"header",locationName:"If-Unmodified-Since",type:"timestamp"},Key:{location:"uri",locationName:"Key"},Range:{location:"header",locationName:"Range"},VersionId:{location:"querystring",locationName:"versionId"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKey:{shape:"S18",location:"header",locationName:"x-amz-server-side-encryption-customer-key"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}}},output:{type:"structure",members:{DeleteMarker:{location:"header",locationName:"x-amz-delete-marker",type:"boolean"},AcceptRanges:{location:"header",locationName:"accept-ranges"},Expiration:{location:"header",locationName:"x-amz-expiration"},Restore:{location:"header",locationName:"x-amz-restore"},LastModified:{location:"header",locationName:"Last-Modified",type:"timestamp"},ContentLength:{location:"header",locationName:"Content-Length",type:"integer"},ETag:{location:"header",locationName:"ETag"},MissingMeta:{location:"header",locationName:"x-amz-missing-meta",type:"integer"},VersionId:{location:"header",locationName:"x-amz-version-id"},CacheControl:{location:"header",locationName:"Cache-Control"},ContentDisposition:{location:"header",locationName:"Content-Disposition"},ContentEncoding:{location:"header",locationName:"Content-Encoding"},ContentLanguage:{location:"header",locationName:"Content-Language"},ContentType:{location:"header",locationName:"Content-Type"},Expires:{location:"header",locationName:"Expires",type:"timestamp"},WebsiteRedirectLocation:{location:"header",locationName:"x-amz-website-redirect-location"},ServerSideEncryption:{location:"header",locationName:"x-amz-server-side-encryption"},Metadata:{shape:"S11",location:"headers",locationName:"x-amz-meta-"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},SSEKMSKeyId:{shape:"Sj",location:"header",locationName:"x-amz-server-side-encryption-aws-kms-key-id"},RequestCharged:{location:"header",locationName:"x-amz-request-charged"},ReplicationStatus:{location:"header",locationName:"x-amz-replication-status"}}}},ListBuckets:{http:{method:"GET"},output:{type:"structure",members:{Buckets:{type:"list",member:{locationName:"Bucket",type:"structure",members:{Name:{},CreationDate:{type:"timestamp"}}}},Owner:{shape:"S2f"}}},alias:"GetService"},ListMultipartUploads:{http:{method:"GET",requestUri:"/{Bucket}?uploads"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"},Delimiter:{location:"querystring",locationName:"delimiter"},EncodingType:{location:"querystring",locationName:"encoding-type"},KeyMarker:{location:"querystring",locationName:"key-marker"},MaxUploads:{location:"querystring",locationName:"max-uploads",type:"integer"},Prefix:{location:"querystring",locationName:"prefix"},UploadIdMarker:{location:"querystring",locationName:"upload-id-marker"}}},output:{type:"structure",members:{Bucket:{},KeyMarker:{},UploadIdMarker:{},NextKeyMarker:{},Prefix:{},Delimiter:{},NextUploadIdMarker:{},MaxUploads:{type:"integer"},IsTruncated:{type:"boolean"},Uploads:{locationName:"Upload",type:"list",member:{type:"structure",members:{UploadId:{},Key:{},Initiated:{type:"timestamp"},StorageClass:{},Owner:{shape:"S2f"},Initiator:{shape:"S6k"}}},flattened:!0},CommonPrefixes:{shape:"S6l"},EncodingType:{}}}},ListObjectVersions:{http:{method:"GET",requestUri:"/{Bucket}?versions"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"},Delimiter:{location:"querystring",locationName:"delimiter"},EncodingType:{location:"querystring",locationName:"encoding-type"},KeyMarker:{location:"querystring",locationName:"key-marker"},MaxKeys:{location:"querystring",locationName:"max-keys",type:"integer"},Prefix:{location:"querystring",locationName:"prefix"},VersionIdMarker:{location:"querystring",locationName:"version-id-marker"}}},output:{type:"structure",members:{IsTruncated:{type:"boolean"},KeyMarker:{},VersionIdMarker:{},NextKeyMarker:{},NextVersionIdMarker:{},Versions:{locationName:"Version",type:"list",member:{type:"structure",members:{ETag:{},Size:{type:"integer"},StorageClass:{},Key:{},VersionId:{},IsLatest:{type:"boolean"},LastModified:{type:"timestamp"},Owner:{shape:"S2f"}}},flattened:!0},DeleteMarkers:{locationName:"DeleteMarker",type:"list",member:{type:"structure",members:{Owner:{shape:"S2f"},Key:{},VersionId:{},IsLatest:{type:"boolean"},LastModified:{type:"timestamp"}}},flattened:!0},Name:{},Prefix:{},Delimiter:{},MaxKeys:{type:"integer"},CommonPrefixes:{shape:"S6l"},EncodingType:{}}},alias:"GetBucketObjectVersions"},ListObjects:{http:{method:"GET",requestUri:"/{Bucket}"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"},Delimiter:{location:"querystring",locationName:"delimiter"},EncodingType:{location:"querystring",locationName:"encoding-type"},Marker:{location:"querystring",locationName:"marker"},MaxKeys:{location:"querystring",locationName:"max-keys",type:"integer"},Prefix:{location:"querystring",locationName:"prefix"}}},output:{type:"structure",members:{IsTruncated:{type:"boolean"},Marker:{},NextMarker:{},Contents:{type:"list",member:{type:"structure",members:{Key:{},LastModified:{type:"timestamp"},ETag:{},Size:{type:"integer"},StorageClass:{},Owner:{shape:"S2f"}}},flattened:!0},Name:{},Prefix:{},Delimiter:{},MaxKeys:{type:"integer"},CommonPrefixes:{shape:"S6l"},EncodingType:{}}},alias:"GetBucket"},ListParts:{http:{method:"GET",requestUri:"/{Bucket}/{Key+}"},input:{type:"structure",required:["Bucket","Key","UploadId"],members:{Bucket:{location:"uri",locationName:"Bucket"},Key:{location:"uri",locationName:"Key"},MaxParts:{location:"querystring",locationName:"max-parts",type:"integer"},PartNumberMarker:{location:"querystring",locationName:"part-number-marker",type:"integer"},UploadId:{location:"querystring",locationName:"uploadId"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}}},output:{type:"structure",members:{Bucket:{},Key:{},UploadId:{},PartNumberMarker:{type:"integer"},NextPartNumberMarker:{type:"integer"},MaxParts:{type:"integer"},IsTruncated:{type:"boolean"},Parts:{locationName:"Part",type:"list",member:{type:"structure",members:{PartNumber:{type:"integer"},LastModified:{type:"timestamp"},ETag:{},Size:{type:"integer"}}},flattened:!0},Initiator:{shape:"S6k"},Owner:{shape:"S2f"},StorageClass:{},RequestCharged:{location:"header",locationName:"x-amz-request-charged"}}}},PutBucketAcl:{http:{method:"PUT",requestUri:"/{Bucket}?acl"},input:{type:"structure",required:["Bucket"],members:{ACL:{location:"header",locationName:"x-amz-acl"},AccessControlPolicy:{shape:"S7e",xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"AccessControlPolicy"},Bucket:{location:"uri",locationName:"Bucket"},ContentMD5:{location:"header",locationName:"Content-MD5"},GrantFullControl:{location:"header",locationName:"x-amz-grant-full-control"},GrantRead:{location:"header",locationName:"x-amz-grant-read"},GrantReadACP:{location:"header",locationName:"x-amz-grant-read-acp"},GrantWrite:{location:"header",locationName:"x-amz-grant-write"},GrantWriteACP:{location:"header",locationName:"x-amz-grant-write-acp"}},payload:"AccessControlPolicy"}},PutBucketCors:{http:{method:"PUT",requestUri:"/{Bucket}?cors"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"},CORSConfiguration:{xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"CORSConfiguration",type:"structure",members:{CORSRules:{shape:"S2r",locationName:"CORSRule"}}},ContentMD5:{location:"header",locationName:"Content-MD5"}},payload:"CORSConfiguration"}},PutBucketLifecycle:{http:{method:"PUT",requestUri:"/{Bucket}?lifecycle"},input:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"},ContentMD5:{location:"header",locationName:"Content-MD5"},LifecycleConfiguration:{xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"LifecycleConfiguration",type:"structure",required:["Rules"],members:{Rules:{shape:"S34",locationName:"Rule"}}}},payload:"LifecycleConfiguration"}},PutBucketLogging:{http:{method:"PUT",requestUri:"/{Bucket}?logging"},input:{type:"structure",required:["Bucket","BucketLoggingStatus"],members:{Bucket:{location:"uri",locationName:"Bucket"},BucketLoggingStatus:{xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"BucketLoggingStatus",type:"structure",members:{LoggingEnabled:{shape:"S3j"}}},ContentMD5:{location:"header",locationName:"Content-MD5"}},payload:"BucketLoggingStatus"}},PutBucketNotification:{http:{method:"PUT",requestUri:"/{Bucket}?notification"},input:{type:"structure",required:["Bucket","NotificationConfiguration"],members:{Bucket:{location:"uri",locationName:"Bucket"},ContentMD5:{location:"header",locationName:"Content-MD5"},NotificationConfiguration:{shape:"S3q",xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"NotificationConfiguration"}},payload:"NotificationConfiguration"},deprecated:!0},PutBucketNotificationConfiguration:{http:{method:"PUT",requestUri:"/{Bucket}?notification"},input:{type:"structure",required:["Bucket","NotificationConfiguration"],members:{Bucket:{location:"uri",locationName:"Bucket"},NotificationConfiguration:{shape:"S41",xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"NotificationConfiguration"}},payload:"NotificationConfiguration"}},PutBucketPolicy:{http:{method:"PUT",requestUri:"/{Bucket}?policy"},input:{type:"structure",required:["Bucket","Policy"],members:{Bucket:{location:"uri",locationName:"Bucket"},ContentMD5:{location:"header",locationName:"Content-MD5"},Policy:{}},payload:"Policy"}},PutBucketReplication:{http:{method:"PUT",requestUri:"/{Bucket}?replication"},input:{type:"structure",required:["Bucket","ReplicationConfiguration"],members:{Bucket:{location:"uri",locationName:"Bucket"},ContentMD5:{location:"header",locationName:"Content-MD5"},ReplicationConfiguration:{shape:"S4e",xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"ReplicationConfiguration"}},payload:"ReplicationConfiguration"}},PutBucketRequestPayment:{http:{method:"PUT",requestUri:"/{Bucket}?requestPayment"},input:{type:"structure",required:["Bucket","RequestPaymentConfiguration"],members:{Bucket:{location:"uri",locationName:"Bucket"},ContentMD5:{location:"header",locationName:"Content-MD5"},RequestPaymentConfiguration:{xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"RequestPaymentConfiguration",type:"structure",required:["Payer"],members:{Payer:{}}}},payload:"RequestPaymentConfiguration"}},PutBucketTagging:{http:{method:"PUT",requestUri:"/{Bucket}?tagging"},input:{type:"structure",required:["Bucket","Tagging"],members:{Bucket:{location:"uri",locationName:"Bucket"},ContentMD5:{location:"header",locationName:"Content-MD5"},Tagging:{xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"Tagging",type:"structure",required:["TagSet"],members:{TagSet:{shape:"S4p"}}}},payload:"Tagging"}},PutBucketVersioning:{http:{method:"PUT",requestUri:"/{Bucket}?versioning"},input:{type:"structure",required:["Bucket","VersioningConfiguration"],members:{Bucket:{location:"uri",locationName:"Bucket"},ContentMD5:{location:"header",locationName:"Content-MD5"},MFA:{location:"header",locationName:"x-amz-mfa"},VersioningConfiguration:{xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"VersioningConfiguration",type:"structure",members:{MFADelete:{locationName:"MfaDelete"},Status:{}}}},payload:"VersioningConfiguration"}},PutBucketWebsite:{http:{method:"PUT",requestUri:"/{Bucket}?website"},input:{type:"structure",required:["Bucket","WebsiteConfiguration"],members:{Bucket:{location:"uri",locationName:"Bucket"},ContentMD5:{location:"header",locationName:"Content-MD5"},WebsiteConfiguration:{xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"WebsiteConfiguration",type:"structure",members:{ErrorDocument:{shape:"S53"},IndexDocument:{shape:"S51"},RedirectAllRequestsTo:{shape:"S4y"},RoutingRules:{shape:"S54"}}}},payload:"WebsiteConfiguration"}},PutObject:{http:{method:"PUT",requestUri:"/{Bucket}/{Key+}"},input:{type:"structure",required:["Bucket","Key"],members:{ACL:{location:"header",locationName:"x-amz-acl"},Body:{streaming:!0,type:"blob"},Bucket:{location:"uri",locationName:"Bucket"},CacheControl:{location:"header",locationName:"Cache-Control"},ContentDisposition:{location:"header",locationName:"Content-Disposition"},ContentEncoding:{location:"header",locationName:"Content-Encoding"},ContentLanguage:{location:"header",locationName:"Content-Language"},ContentLength:{location:"header",locationName:"Content-Length",type:"integer"},ContentMD5:{location:"header",locationName:"Content-MD5"},ContentType:{location:"header",locationName:"Content-Type"},Expires:{location:"header",locationName:"Expires",type:"timestamp"},GrantFullControl:{location:"header",locationName:"x-amz-grant-full-control"},GrantRead:{location:"header",locationName:"x-amz-grant-read"},GrantReadACP:{location:"header",locationName:"x-amz-grant-read-acp"},GrantWriteACP:{location:"header",locationName:"x-amz-grant-write-acp"},Key:{location:"uri",locationName:"Key"},Metadata:{shape:"S11",location:"headers",locationName:"x-amz-meta-"},ServerSideEncryption:{location:"header",locationName:"x-amz-server-side-encryption"},StorageClass:{location:"header",locationName:"x-amz-storage-class"},WebsiteRedirectLocation:{location:"header",locationName:"x-amz-website-redirect-location"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKey:{shape:"S18",location:"header",locationName:"x-amz-server-side-encryption-customer-key"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},SSEKMSKeyId:{shape:"Sj",location:"header",locationName:"x-amz-server-side-encryption-aws-kms-key-id"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}},payload:"Body"},output:{type:"structure",members:{Expiration:{location:"header",locationName:"x-amz-expiration"},ETag:{location:"header",locationName:"ETag"},ServerSideEncryption:{location:"header",locationName:"x-amz-server-side-encryption"},VersionId:{location:"header",locationName:"x-amz-version-id"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},SSEKMSKeyId:{shape:"Sj",location:"header",locationName:"x-amz-server-side-encryption-aws-kms-key-id"},RequestCharged:{location:"header",locationName:"x-amz-request-charged"}}}},PutObjectAcl:{http:{method:"PUT",requestUri:"/{Bucket}/{Key+}?acl"},input:{type:"structure",required:["Bucket","Key"],members:{ACL:{location:"header",locationName:"x-amz-acl"},AccessControlPolicy:{shape:"S7e",xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"AccessControlPolicy"},Bucket:{location:"uri",locationName:"Bucket"},ContentMD5:{location:"header",locationName:"Content-MD5"},GrantFullControl:{location:"header",locationName:"x-amz-grant-full-control"},GrantRead:{location:"header",locationName:"x-amz-grant-read"},GrantReadACP:{location:"header",locationName:"x-amz-grant-read-acp"},GrantWrite:{location:"header",locationName:"x-amz-grant-write"},GrantWriteACP:{location:"header",locationName:"x-amz-grant-write-acp"},Key:{location:"uri",locationName:"Key"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}},payload:"AccessControlPolicy"},output:{type:"structure",members:{RequestCharged:{location:"header",locationName:"x-amz-request-charged"}}}},RestoreObject:{http:{requestUri:"/{Bucket}/{Key+}?restore"},input:{type:"structure",required:["Bucket","Key"],members:{Bucket:{location:"uri",locationName:"Bucket"},Key:{location:"uri",locationName:"Key"},VersionId:{location:"querystring",locationName:"versionId"},RestoreRequest:{xmlNamespace:{uri:"http://s3.amazonaws.com/doc/2006-03-01/"},locationName:"RestoreRequest",type:"structure",required:["Days"],members:{Days:{type:"integer"}}},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}},payload:"RestoreRequest"},output:{type:"structure",members:{RequestCharged:{location:"header",locationName:"x-amz-request-charged"}}},alias:"PostObjectRestore"},UploadPart:{http:{method:"PUT",requestUri:"/{Bucket}/{Key+}"},input:{type:"structure",required:["Bucket","Key","PartNumber","UploadId"],members:{Body:{streaming:!0,type:"blob"},Bucket:{location:"uri",locationName:"Bucket"},ContentLength:{location:"header",locationName:"Content-Length",type:"integer"},ContentMD5:{location:"header",locationName:"Content-MD5"},Key:{location:"uri",locationName:"Key"},PartNumber:{location:"querystring",locationName:"partNumber",type:"integer"},UploadId:{location:"querystring",locationName:"uploadId"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKey:{shape:"S18",location:"header",locationName:"x-amz-server-side-encryption-customer-key"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}},payload:"Body"},output:{type:"structure",members:{ServerSideEncryption:{location:"header",locationName:"x-amz-server-side-encryption"},ETag:{location:"header",locationName:"ETag"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},SSEKMSKeyId:{shape:"Sj",location:"header",locationName:"x-amz-server-side-encryption-aws-kms-key-id"},RequestCharged:{location:"header",locationName:"x-amz-request-charged"}}}},UploadPartCopy:{http:{method:"PUT",requestUri:"/{Bucket}/{Key+}"},input:{type:"structure",required:["Bucket","CopySource","Key","PartNumber","UploadId"],members:{Bucket:{location:"uri",locationName:"Bucket"},CopySource:{location:"header",locationName:"x-amz-copy-source"},CopySourceIfMatch:{location:"header",locationName:"x-amz-copy-source-if-match"},CopySourceIfModifiedSince:{location:"header",locationName:"x-amz-copy-source-if-modified-since",type:"timestamp"},CopySourceIfNoneMatch:{location:"header",locationName:"x-amz-copy-source-if-none-match"},CopySourceIfUnmodifiedSince:{location:"header",locationName:"x-amz-copy-source-if-unmodified-since",type:"timestamp"},CopySourceRange:{location:"header",locationName:"x-amz-copy-source-range"},Key:{location:"uri",locationName:"Key"},PartNumber:{location:"querystring",locationName:"partNumber",type:"integer"},UploadId:{location:"querystring",locationName:"uploadId"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKey:{shape:"S18",location:"header",locationName:"x-amz-server-side-encryption-customer-key"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},CopySourceSSECustomerAlgorithm:{location:"header",locationName:"x-amz-copy-source-server-side-encryption-customer-algorithm"},CopySourceSSECustomerKey:{shape:"S1b",location:"header",locationName:"x-amz-copy-source-server-side-encryption-customer-key"},CopySourceSSECustomerKeyMD5:{location:"header",locationName:"x-amz-copy-source-server-side-encryption-customer-key-MD5"},RequestPayer:{location:"header",locationName:"x-amz-request-payer"}}},output:{type:"structure",members:{CopySourceVersionId:{location:"header",locationName:"x-amz-copy-source-version-id"},CopyPartResult:{type:"structure",members:{ETag:{},LastModified:{type:"timestamp"}}},ServerSideEncryption:{location:"header",locationName:"x-amz-server-side-encryption"},SSECustomerAlgorithm:{location:"header",locationName:"x-amz-server-side-encryption-customer-algorithm"},SSECustomerKeyMD5:{location:"header",locationName:"x-amz-server-side-encryption-customer-key-MD5"},SSEKMSKeyId:{shape:"Sj",location:"header",locationName:"x-amz-server-side-encryption-aws-kms-key-id"},RequestCharged:{location:"header",locationName:"x-amz-request-charged"}},payload:"CopyPartResult"}}},shapes:{Sj:{type:"string",sensitive:!0},S11:{type:"map",key:{},value:{}},S18:{type:"string",sensitive:!0},S1b:{type:"string",sensitive:!0},S2f:{type:"structure",members:{DisplayName:{},ID:{}}},S2i:{type:"list",member:{locationName:"Grant",type:"structure",members:{Grantee:{shape:"S2k"},Permission:{}}}},S2k:{type:"structure",required:["Type"],members:{DisplayName:{},EmailAddress:{},ID:{},Type:{xmlAttribute:!0,locationName:"xsi:type"},URI:{}},xmlNamespace:{prefix:"xsi",uri:"http://www.w3.org/2001/XMLSchema-instance"}},S2r:{type:"list",member:{type:"structure",members:{AllowedHeaders:{locationName:"AllowedHeader",type:"list",member:{},flattened:!0},AllowedMethods:{locationName:"AllowedMethod",type:"list",member:{},flattened:!0},AllowedOrigins:{locationName:"AllowedOrigin",type:"list",member:{},flattened:!0},ExposeHeaders:{locationName:"ExposeHeader",type:"list",member:{},flattened:!0},MaxAgeSeconds:{type:"integer"}}},flattened:!0},S34:{type:"list",member:{type:"structure",required:["Prefix","Status"],members:{Expiration:{type:"structure",members:{Date:{shape:"S37"},Days:{type:"integer"}}},ID:{},Prefix:{},Status:{},Transition:{type:"structure",members:{Date:{shape:"S37"},Days:{type:"integer"},StorageClass:{}}},NoncurrentVersionTransition:{type:"structure",members:{NoncurrentDays:{type:"integer"},StorageClass:{}}},NoncurrentVersionExpiration:{type:"structure",members:{NoncurrentDays:{type:"integer"}}}}},flattened:!0},S37:{type:"timestamp",timestampFormat:"iso8601"},S3j:{type:"structure",members:{TargetBucket:{},TargetGrants:{type:"list",member:{locationName:"Grant",type:"structure",members:{Grantee:{shape:"S2k"},Permission:{}}}},TargetPrefix:{}}},S3p:{type:"structure",required:["Bucket"],members:{Bucket:{location:"uri",locationName:"Bucket"}}},S3q:{type:"structure",members:{TopicConfiguration:{type:"structure",members:{Id:{},Events:{shape:"S3t",locationName:"Event"},Event:{deprecated:!0},Topic:{}}},QueueConfiguration:{type:"structure",members:{Id:{},Event:{deprecated:!0},Events:{shape:"S3t",locationName:"Event"},Queue:{}}},CloudFunctionConfiguration:{type:"structure",members:{Id:{},Event:{deprecated:!0},Events:{shape:"S3t",locationName:"Event"},CloudFunction:{},InvocationRole:{}}}}},S3t:{type:"list",member:{},flattened:!0},S41:{type:"structure",members:{TopicConfigurations:{locationName:"TopicConfiguration",type:"list",member:{type:"structure",required:["TopicArn","Events"],members:{Id:{},TopicArn:{locationName:"Topic"},Events:{shape:"S3t",locationName:"Event"}}},flattened:!0},QueueConfigurations:{locationName:"QueueConfiguration",type:"list",member:{type:"structure",required:["QueueArn","Events"],members:{Id:{},QueueArn:{locationName:"Queue"},Events:{shape:"S3t",locationName:"Event"}}},flattened:!0},LambdaFunctionConfigurations:{locationName:"CloudFunctionConfiguration",type:"list",member:{type:"structure",required:["LambdaFunctionArn","Events"],members:{Id:{},LambdaFunctionArn:{locationName:"CloudFunction"},Events:{shape:"S3t",locationName:"Event"}}},flattened:!0}}},S4e:{type:"structure",required:["Role","Rules"],members:{Role:{},Rules:{locationName:"Rule",type:"list",member:{type:"structure",required:["Prefix","Status","Destination"],members:{ID:{},Prefix:{},Status:{},Destination:{type:"structure",required:["Bucket"],members:{Bucket:{}}}}},flattened:!0}}},S4p:{type:"list",member:{locationName:"Tag",type:"structure",required:["Key","Value"],members:{Key:{},Value:{}}}},S4y:{type:"structure",required:["HostName"],members:{HostName:{},Protocol:{}}},S51:{type:"structure",required:["Suffix"],members:{Suffix:{}}},S53:{type:"structure",required:["Key"],members:{Key:{}}},S54:{type:"list",member:{locationName:"RoutingRule",type:"structure",required:["Redirect"],members:{Condition:{type:"structure",members:{HttpErrorCodeReturnedEquals:{},KeyPrefixEquals:{}}},Redirect:{type:"structure",members:{HostName:{},HttpRedirectCode:{},Protocol:{},ReplaceKeyPrefixWith:{},ReplaceKeyWith:{}}}}}},S6k:{type:"structure",members:{ID:{},DisplayName:{}}},S6l:{type:"list",member:{type:"structure",members:{Prefix:{}}},flattened:!0},S7e:{type:"structure",members:{Grants:{shape:"S2i",locationName:"AccessControlList"},Owner:{shape:"S2f"}}}},paginators:{ListBuckets:{result_key:"Buckets"},ListMultipartUploads:{limit_key:"MaxUploads",more_results:"IsTruncated",output_token:["NextKeyMarker","NextUploadIdMarker"],input_token:["KeyMarker","UploadIdMarker"],result_key:["Uploads","CommonPrefixes"]},ListObjectVersions:{more_results:"IsTruncated",limit_key:"MaxKeys",output_token:["NextKeyMarker","NextVersionIdMarker"],input_token:["KeyMarker","VersionIdMarker"],result_key:["Versions","DeleteMarkers","CommonPrefixes"]},ListObjects:{more_results:"IsTruncated",limit_key:"MaxKeys",output_token:"NextMarker || Contents[-1].Key",input_token:"Marker",result_key:["Contents","CommonPrefixes"]},ListParts:{more_results:"IsTruncated",limit_key:"MaxParts",output_token:"NextPartNumberMarker",input_token:"PartNumberMarker",result_key:"Parts"}},waiters:{__default__:{interval:5,max_attempts:20},BucketExists:{operation:"HeadBucket",ignore_errors:[404],success_type:"output"},BucketNotExists:{operation:"HeadBucket",success_type:"error",success_value:404},ObjectExists:{operation:"HeadObject",ignore_errors:[404],success_type:"output"},ObjectNotExists:{operation:"HeadObject",success_type:"error",success_value:404}}},n.apiLoader.services.sns={},n.SNS=n.Service.defineService("sns",["2010-03-31"]),n.apiLoader.services.sns["2010-03-31"]={metadata:{apiVersion:"2010-03-31",endpointPrefix:"sns",serviceAbbreviation:"Amazon SNS",serviceFullName:"Amazon Simple Notification Service",signatureVersion:"v4",xmlNamespace:"http://sns.amazonaws.com/doc/2010-03-31/",protocol:"query"},operations:{AddPermission:{input:{type:"structure",required:["TopicArn","Label","AWSAccountId","ActionName"],members:{TopicArn:{},Label:{},AWSAccountId:{type:"list",member:{}},ActionName:{type:"list",member:{}}}},http:{}},ConfirmSubscription:{input:{type:"structure",required:["TopicArn","Token"],members:{TopicArn:{},Token:{},AuthenticateOnUnsubscribe:{}}},output:{resultWrapper:"ConfirmSubscriptionResult",type:"structure",members:{SubscriptionArn:{}}},http:{}},CreatePlatformApplication:{input:{type:"structure",required:["Name","Platform","Attributes"],members:{Name:{},Platform:{},Attributes:{shape:"Sf"}}},output:{resultWrapper:"CreatePlatformApplicationResult",type:"structure",members:{PlatformApplicationArn:{}}},http:{}},CreatePlatformEndpoint:{input:{type:"structure",required:["PlatformApplicationArn","Token"],members:{PlatformApplicationArn:{},Token:{},CustomUserData:{},Attributes:{shape:"Sf"}}},output:{resultWrapper:"CreatePlatformEndpointResult",type:"structure",members:{EndpointArn:{}}},http:{}},CreateTopic:{input:{type:"structure",required:["Name"],members:{Name:{}}},output:{resultWrapper:"CreateTopicResult",type:"structure",members:{TopicArn:{}}},http:{}},DeleteEndpoint:{input:{type:"structure",required:["EndpointArn"],members:{EndpointArn:{}}},http:{}},DeletePlatformApplication:{input:{type:"structure",required:["PlatformApplicationArn"],members:{PlatformApplicationArn:{}}},http:{}},DeleteTopic:{input:{type:"structure",required:["TopicArn"],members:{TopicArn:{}}},http:{}},GetEndpointAttributes:{input:{type:"structure",required:["EndpointArn"],members:{EndpointArn:{}}},output:{resultWrapper:"GetEndpointAttributesResult",type:"structure",members:{Attributes:{shape:"Sf"}}},http:{}},GetPlatformApplicationAttributes:{input:{type:"structure",required:["PlatformApplicationArn"],members:{PlatformApplicationArn:{}}},output:{resultWrapper:"GetPlatformApplicationAttributesResult",type:"structure",members:{Attributes:{shape:"Sf"}}},http:{}},GetSubscriptionAttributes:{input:{type:"structure",required:["SubscriptionArn"],members:{SubscriptionArn:{}}},output:{resultWrapper:"GetSubscriptionAttributesResult",type:"structure",members:{Attributes:{type:"map",key:{},value:{}}}},http:{}},GetTopicAttributes:{input:{type:"structure",required:["TopicArn"],members:{TopicArn:{}}},output:{resultWrapper:"GetTopicAttributesResult",type:"structure",members:{Attributes:{type:"map",key:{},value:{}}}},http:{}},ListEndpointsByPlatformApplication:{input:{type:"structure",required:["PlatformApplicationArn"],members:{PlatformApplicationArn:{},NextToken:{}}},output:{resultWrapper:"ListEndpointsByPlatformApplicationResult",type:"structure",members:{Endpoints:{type:"list",member:{type:"structure",members:{EndpointArn:{},Attributes:{shape:"Sf"}}}},NextToken:{}}},http:{}},ListPlatformApplications:{input:{type:"structure",members:{NextToken:{}}},output:{resultWrapper:"ListPlatformApplicationsResult",type:"structure",members:{PlatformApplications:{type:"list",member:{type:"structure",members:{PlatformApplicationArn:{},Attributes:{shape:"Sf"}}}},NextToken:{}}},http:{}},ListSubscriptions:{input:{type:"structure",members:{NextToken:{}}},output:{resultWrapper:"ListSubscriptionsResult",type:"structure",members:{Subscriptions:{shape:"S1c"},NextToken:{}}},http:{}},ListSubscriptionsByTopic:{input:{type:"structure",required:["TopicArn"],members:{TopicArn:{},NextToken:{}}},output:{resultWrapper:"ListSubscriptionsByTopicResult",type:"structure",members:{Subscriptions:{shape:"S1c"},NextToken:{}}},http:{}},ListTopics:{input:{type:"structure",members:{NextToken:{}}},output:{resultWrapper:"ListTopicsResult",type:"structure",members:{Topics:{type:"list",member:{type:"structure",members:{TopicArn:{}}}},NextToken:{}}},http:{}},Publish:{input:{type:"structure",required:["Message"],members:{TopicArn:{},TargetArn:{},Message:{},Subject:{},MessageStructure:{},MessageAttributes:{type:"map",key:{locationName:"Name"},value:{locationName:"Value",type:"structure",required:["DataType"],members:{DataType:{},StringValue:{},BinaryValue:{type:"blob"}}}}}},output:{resultWrapper:"PublishResult",type:"structure",members:{MessageId:{}}},http:{}},RemovePermission:{input:{type:"structure",required:["TopicArn","Label"],members:{TopicArn:{},Label:{}}},http:{}},SetEndpointAttributes:{input:{type:"structure",required:["EndpointArn","Attributes"],members:{EndpointArn:{},Attributes:{shape:"Sf"}}},http:{}},SetPlatformApplicationAttributes:{input:{type:"structure",required:["PlatformApplicationArn","Attributes"],members:{PlatformApplicationArn:{},Attributes:{shape:"Sf"}}},http:{}},SetSubscriptionAttributes:{input:{type:"structure",required:["SubscriptionArn","AttributeName"],members:{SubscriptionArn:{},AttributeName:{},AttributeValue:{}}},http:{}},SetTopicAttributes:{input:{type:"structure",required:["TopicArn","AttributeName"],members:{TopicArn:{},AttributeName:{},AttributeValue:{}}},http:{}},Subscribe:{input:{type:"structure",required:["TopicArn","Protocol"],members:{TopicArn:{},Protocol:{},Endpoint:{}}},output:{resultWrapper:"SubscribeResult",type:"structure",members:{SubscriptionArn:{}}},http:{}},Unsubscribe:{input:{type:"structure",required:["SubscriptionArn"],members:{SubscriptionArn:{}}},http:{}}},shapes:{Sf:{type:"map",key:{},value:{}},S1c:{type:"list",member:{type:"structure",members:{SubscriptionArn:{},Owner:{},Protocol:{},Endpoint:{},TopicArn:{}}}}},paginators:{ListEndpointsByPlatformApplication:{input_token:"NextToken",output_token:"NextToken",result_key:"Endpoints"},ListPlatformApplications:{input_token:"NextToken",output_token:"NextToken",result_key:"PlatformApplications"},ListSubscriptions:{input_token:"NextToken",output_token:"NextToken",result_key:"Subscriptions"},ListSubscriptionsByTopic:{input_token:"NextToken",output_token:"NextToken",result_key:"Subscriptions"},ListTopics:{input_token:"NextToken",output_token:"NextToken",result_key:"Topics"}}},n.apiLoader.services.sqs={},n.SQS=n.Service.defineService("sqs",["2012-11-05"]),e("./services/sqs"),n.apiLoader.services.sqs["2012-11-05"]={metadata:{apiVersion:"2012-11-05",endpointPrefix:"sqs",serviceAbbreviation:"Amazon SQS",serviceFullName:"Amazon Simple Queue Service",signatureVersion:"v4",xmlNamespace:"http://queue.amazonaws.com/doc/2012-11-05/",protocol:"query"},operations:{AddPermission:{input:{type:"structure",required:["QueueUrl","Label","AWSAccountIds","Actions"],members:{QueueUrl:{},Label:{},AWSAccountIds:{type:"list",member:{locationName:"AWSAccountId"},flattened:!0},Actions:{type:"list",member:{locationName:"ActionName"},flattened:!0}}},http:{}},ChangeMessageVisibility:{input:{type:"structure",required:["QueueUrl","ReceiptHandle","VisibilityTimeout"],members:{QueueUrl:{},ReceiptHandle:{},VisibilityTimeout:{type:"integer"}}},http:{}},ChangeMessageVisibilityBatch:{input:{type:"structure",required:["QueueUrl","Entries"],members:{QueueUrl:{},Entries:{type:"list",member:{locationName:"ChangeMessageVisibilityBatchRequestEntry",type:"structure",required:["Id","ReceiptHandle"],members:{Id:{},ReceiptHandle:{},VisibilityTimeout:{type:"integer"}}},flattened:!0}}},output:{resultWrapper:"ChangeMessageVisibilityBatchResult",type:"structure",required:["Successful","Failed"],members:{Successful:{type:"list",member:{locationName:"ChangeMessageVisibilityBatchResultEntry",type:"structure",required:["Id"],members:{Id:{}}},flattened:!0},Failed:{shape:"Sd"}}},http:{}},CreateQueue:{input:{type:"structure",required:["QueueName"],members:{QueueName:{},Attributes:{shape:"Sh",locationName:"Attribute"}}},output:{resultWrapper:"CreateQueueResult",type:"structure",members:{QueueUrl:{}}},http:{}},DeleteMessage:{input:{type:"structure",required:["QueueUrl","ReceiptHandle"],members:{QueueUrl:{},ReceiptHandle:{}}},http:{}},DeleteMessageBatch:{input:{type:"structure",required:["QueueUrl","Entries"],members:{QueueUrl:{},Entries:{type:"list",member:{locationName:"DeleteMessageBatchRequestEntry",type:"structure",required:["Id","ReceiptHandle"],members:{Id:{},ReceiptHandle:{}}},flattened:!0}}},output:{resultWrapper:"DeleteMessageBatchResult",type:"structure",required:["Successful","Failed"],members:{Successful:{type:"list",member:{locationName:"DeleteMessageBatchResultEntry",type:"structure",required:["Id"],members:{Id:{}}},flattened:!0},Failed:{shape:"Sd"}}},http:{}},DeleteQueue:{input:{type:"structure",required:["QueueUrl"],members:{QueueUrl:{}}},http:{}},GetQueueAttributes:{input:{type:"structure",required:["QueueUrl"],members:{QueueUrl:{},AttributeNames:{shape:"St"}}},output:{resultWrapper:"GetQueueAttributesResult",type:"structure",members:{Attributes:{shape:"Sh",locationName:"Attribute"}}},http:{}},GetQueueUrl:{input:{type:"structure",required:["QueueName"],members:{QueueName:{},QueueOwnerAWSAccountId:{}}},output:{resultWrapper:"GetQueueUrlResult",type:"structure",members:{QueueUrl:{}}},http:{}},ListDeadLetterSourceQueues:{input:{type:"structure",required:["QueueUrl"],members:{QueueUrl:{}}},output:{resultWrapper:"ListDeadLetterSourceQueuesResult",type:"structure",required:["queueUrls"],members:{queueUrls:{shape:"Sz"}}},http:{}},ListQueues:{input:{type:"structure",members:{QueueNamePrefix:{}}},output:{resultWrapper:"ListQueuesResult",type:"structure",members:{QueueUrls:{shape:"Sz"}}},http:{}},PurgeQueue:{input:{type:"structure",required:["QueueUrl"],members:{QueueUrl:{}}},http:{}},ReceiveMessage:{input:{type:"structure",required:["QueueUrl"],members:{QueueUrl:{},AttributeNames:{shape:"St"},MessageAttributeNames:{type:"list",member:{locationName:"MessageAttributeName"},flattened:!0},MaxNumberOfMessages:{type:"integer"},VisibilityTimeout:{type:"integer"},WaitTimeSeconds:{type:"integer"}}},output:{resultWrapper:"ReceiveMessageResult",type:"structure",members:{Messages:{type:"list",member:{locationName:"Message",type:"structure",members:{MessageId:{},ReceiptHandle:{},MD5OfBody:{},Body:{},Attributes:{shape:"Sh",locationName:"Attribute"},MD5OfMessageAttributes:{},MessageAttributes:{shape:"S19",locationName:"MessageAttribute"}}},flattened:!0}}},http:{}},RemovePermission:{input:{type:"structure",required:["QueueUrl","Label"],members:{QueueUrl:{},Label:{}}},http:{}},SendMessage:{input:{type:"structure",required:["QueueUrl","MessageBody"],members:{QueueUrl:{},MessageBody:{},DelaySeconds:{type:"integer"},MessageAttributes:{shape:"S19",locationName:"MessageAttribute"}}},output:{resultWrapper:"SendMessageResult",type:"structure",members:{MD5OfMessageBody:{},MD5OfMessageAttributes:{},MessageId:{}}},http:{}},SendMessageBatch:{input:{type:"structure",required:["QueueUrl","Entries"],members:{QueueUrl:{},Entries:{type:"list",member:{locationName:"SendMessageBatchRequestEntry",type:"structure",required:["Id","MessageBody"],members:{Id:{},MessageBody:{},DelaySeconds:{type:"integer"},MessageAttributes:{shape:"S19",locationName:"MessageAttribute"}}},flattened:!0}}},output:{resultWrapper:"SendMessageBatchResult",type:"structure",required:["Successful","Failed"],members:{Successful:{type:"list",member:{locationName:"SendMessageBatchResultEntry",type:"structure",required:["Id","MessageId","MD5OfMessageBody"],members:{Id:{},MessageId:{},MD5OfMessageBody:{},MD5OfMessageAttributes:{}}},flattened:!0},Failed:{shape:"Sd"}}},http:{}},SetQueueAttributes:{input:{type:"structure",required:["QueueUrl","Attributes"],members:{QueueUrl:{},Attributes:{shape:"Sh",locationName:"Attribute"}}},http:{}}},shapes:{Sd:{type:"list",member:{locationName:"BatchResultErrorEntry",type:"structure",required:["Id","SenderFault","Code"],members:{Id:{},SenderFault:{type:"boolean"},Code:{},Message:{}}},flattened:!0},Sh:{type:"map",key:{locationName:"Name"},value:{locationName:"Value"},flattened:!0,locationName:"Attribute"},St:{type:"list",member:{locationName:"AttributeName"},flattened:!0},Sz:{type:"list",member:{locationName:"QueueUrl"},flattened:!0},S19:{type:"map",key:{locationName:"Name"},value:{locationName:"Value",type:"structure",required:["DataType"],members:{StringValue:{},BinaryValue:{type:"blob"},StringListValues:{flattened:!0,locationName:"StringListValue",type:"list",member:{locationName:"StringListValue"}},BinaryListValues:{flattened:!0,locationName:"BinaryListValue",type:"list",member:{locationName:"BinaryListValue",type:"blob"}},DataType:{}}},flattened:!0}},paginators:{ListQueues:{result_key:"QueueUrls"}}},n.apiLoader.services.sts={},n.STS=n.Service.defineService("sts",["2011-06-15"]),e("./services/sts"),n.apiLoader.services.sts["2011-06-15"]={version:"2.0",metadata:{apiVersion:"2011-06-15",endpointPrefix:"sts",globalEndpoint:"sts.amazonaws.com",serviceAbbreviation:"AWS STS",serviceFullName:"AWS Security Token Service",signatureVersion:"v4",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",protocol:"query"},operations:{AssumeRole:{input:{type:"structure",required:["RoleArn","RoleSessionName"],members:{RoleArn:{},RoleSessionName:{},Policy:{},DurationSeconds:{type:"integer"},ExternalId:{},SerialNumber:{},TokenCode:{}}},output:{resultWrapper:"AssumeRoleResult",type:"structure",members:{Credentials:{shape:"Sa"},AssumedRoleUser:{shape:"Sf"},PackedPolicySize:{type:"integer"}}},http:{}},AssumeRoleWithSAML:{input:{type:"structure",required:["RoleArn","PrincipalArn","SAMLAssertion"],members:{RoleArn:{},PrincipalArn:{},SAMLAssertion:{},Policy:{},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"AssumeRoleWithSAMLResult",type:"structure",members:{Credentials:{shape:"Sa"},AssumedRoleUser:{shape:"Sf"},PackedPolicySize:{type:"integer"},Subject:{},SubjectType:{},Issuer:{},Audience:{},NameQualifier:{}}},http:{}},AssumeRoleWithWebIdentity:{input:{type:"structure",required:["RoleArn","RoleSessionName","WebIdentityToken"],members:{RoleArn:{},RoleSessionName:{},WebIdentityToken:{},ProviderId:{},Policy:{},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"AssumeRoleWithWebIdentityResult",type:"structure",members:{Credentials:{shape:"Sa"},SubjectFromWebIdentityToken:{},AssumedRoleUser:{shape:"Sf"},PackedPolicySize:{type:"integer"},Provider:{},Audience:{}}},http:{}},DecodeAuthorizationMessage:{input:{type:"structure",required:["EncodedMessage"],members:{EncodedMessage:{}}},output:{resultWrapper:"DecodeAuthorizationMessageResult",type:"structure",members:{DecodedMessage:{}}},http:{}},GetFederationToken:{input:{type:"structure",required:["Name"],members:{Name:{},Policy:{},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"GetFederationTokenResult",type:"structure",members:{Credentials:{shape:"Sa"},FederatedUser:{type:"structure",required:["FederatedUserId","Arn"],members:{FederatedUserId:{},Arn:{}}},PackedPolicySize:{type:"integer"}}},http:{}},GetSessionToken:{input:{type:"structure",members:{DurationSeconds:{type:"integer"},SerialNumber:{},TokenCode:{}}},output:{resultWrapper:"GetSessionTokenResult",type:"structure",members:{Credentials:{shape:"Sa"}}},http:{}}},shapes:{Sa:{type:"structure",required:["AccessKeyId","SecretAccessKey","SessionToken","Expiration"],members:{AccessKeyId:{},SecretAccessKey:{},SessionToken:{},Expiration:{type:"timestamp"}}},Sf:{type:"structure",required:["AssumedRoleId","Arn"],members:{AssumedRoleId:{},Arn:{}}}}}},{"./core":3,"./http/xhr":12,"./services/cognitoidentity":36,"./services/dynamodb":37,"./services/s3":38,"./services/sqs":39,"./services/sts":40,"./xml/browser_parser":50}],2:[function(e){var t=e("./core");e("./credentials"),e("./credentials/credential_provider_chain"),t.Config=t.util.inherit({constructor:function(e){void 0===e&&(e={}),e=this.extractCredentials(e),t.util.each.call(this,this.keys,function(t,n){this.set(t,e[t],n)})},getCredentials:function(e){function n(t){e(t,t?null:o.credentials)}function r(e,n){return new t.util.error(n||new Error,{code:"CredentialsError",message:e})}function i(){o.credentials.get(function(e){if(e){var t="Could not load credentials from "+o.credentials.constructor.name;e=r(t,e)}n(e)})}function s(){var e=null;o.credentials.accessKeyId&&o.credentials.secretAccessKey||(e=r("Missing credentials")),n(e)}var o=this;o.credentials?"function"==typeof o.credentials.get?i():s():o.credentialProvider?o.credentialProvider.resolve(function(e,t){e&&(e=r("Could not load credentials from any providers",e)),o.credentials=t,n(e)}):n(r("No credentials to load"))},update:function(e,n){n=n||!1,e=this.extractCredentials(e),t.util.each.call(this,e,function(e,i){(n||this.keys.hasOwnProperty(e)||t.Service.hasService(e))&&this.set(e,i)})},loadFromPath:function(e){this.clear();var n=JSON.parse(t.util.readFileSync(e)),r=new t.FileSystemCredentials(e),i=new t.CredentialProviderChain;return i.providers.unshift(r),i.resolve(function(e,t){if(e)throw e;n.credentials=t}),this.constructor(n),this},clear:function(){t.util.each.call(this,this.keys,function(e){delete this[e]}),this.set("credentials",void 0),this.set("credentialProvider",void 0)},set:function(e,n,r){void 0===n?(void 0===r&&(r=this.keys[e]),this[e]="function"==typeof r?r.call(this):r):this[e]="httpOptions"===e&&this[e]?t.util.merge(this[e],n):n},keys:{credentials:null,credentialProvider:null,region:null,logger:null,apiVersions:{},apiVersion:null,endpoint:void 0,httpOptions:{timeout:12e4},maxRetries:void 0,maxRedirects:10,paramValidation:!0,sslEnabled:!0,s3ForcePathStyle:!1,s3BucketEndpoint:!1,computeChecksums:!0,convertResponseTypes:!0,dynamoDbCrc32:!0,systemClockOffset:0,signatureVersion:null},extractCredentials:function(e){return e.accessKeyId&&e.secretAccessKey&&(e=t.util.copy(e),e.credentials=new t.Credentials(e)),e}}),t.config=new t.Config},{"./core":3,"./credentials":4,"./credentials/credential_provider_chain":6}],3:[function(e,t){var n={util:e("./util")},r={};r.toString(),t.exports=n,n.util.update(n,{VERSION:"2.1.24",Signers:{},Protocol:{Json:e("./protocol/json"),Query:e("./protocol/query"),Rest:e("./protocol/rest"),RestJson:e("./protocol/rest_json"),RestXml:e("./protocol/rest_xml")},XML:{Builder:e("./xml/builder"),Parser:null},JSON:{Builder:e("./json/builder"),Parser:e("./json/parser")},Model:{Api:e("./model/api"),Operation:e("./model/operation"),Shape:e("./model/shape"),Paginator:e("./model/paginator"),ResourceWaiter:e("./model/resource_waiter")},util:e("./util"),apiLoader:function(){throw new Error("No API loader set")}}),e("./service"),e("./credentials"),e("./credentials/credential_provider_chain"),e("./credentials/temporary_credentials"),e("./credentials/web_identity_credentials"),e("./credentials/cognito_identity_credentials"),e("./credentials/saml_credentials"),e("./config"),e("./http"),e("./sequential_executor"),e("./event_listeners"),e("./request"),e("./response"),e("./resource_waiter"),e("./signers/request_signer"),e("./param_validator"),n.events=new n.SequentialExecutor},{"./config":2,"./credentials":4,"./credentials/cognito_identity_credentials":5,"./credentials/credential_provider_chain":6,"./credentials/saml_credentials":7,"./credentials/temporary_credentials":8,"./credentials/web_identity_credentials":9,"./event_listeners":10,"./http":11,"./json/builder":13,"./json/parser":14,"./model/api":15,"./model/operation":17,"./model/paginator":18,"./model/resource_waiter":19,"./model/shape":20,"./param_validator":21,"./protocol/json":22,"./protocol/query":23,"./protocol/rest":24,"./protocol/rest_json":25,"./protocol/rest_xml":26,"./request":30,"./resource_waiter":31,"./response":32,"./sequential_executor":34,"./service":35,"./signers/request_signer":42,"./util":49,"./xml/builder":51}],4:[function(e){var t=e("./core");t.Credentials=t.util.inherit({constructor:function(){if(t.util.hideProperties(this,["secretAccessKey"]),this.expired=!1,this.expireTime=null,1===arguments.length&&"object"==typeof arguments[0]){var e=arguments[0].credentials||arguments[0];this.accessKeyId=e.accessKeyId,this.secretAccessKey=e.secretAccessKey,this.sessionToken=e.sessionToken}else this.accessKeyId=arguments[0],this.secretAccessKey=arguments[1],this.sessionToken=arguments[2]},expiryWindow:15,needsRefresh:function(){var e=t.util.date.getDate().getTime(),n=new Date(e+1e3*this.expiryWindow);return this.expireTime&&n>this.expireTime?!0:this.expired||!this.accessKeyId||!this.secretAccessKey},get:function(e){var t=this;this.needsRefresh()?this.refresh(function(n){n||(t.expired=!1),e&&e(n)}):e&&e()},refresh:function(e){this.expired=!1,e()}})},{"./core":3}],5:[function(e){var t=e("../core");t.CognitoIdentityCredentials=t.util.inherit(t.Credentials,{localStorageKey:{id:"aws.cognito.identity-id.",providers:"aws.cognito.identity-providers."},constructor:function(e){t.Credentials.call(this),this.expired=!0,this.params=e,this.data=null,this.identityId=null,this.loadCachedId()},refresh:function(e){var t=this;t.createClients(),t.data=null,t.identityId=null,t.getId(function(n){n?(t.clearCachedId(),e(n)):t.params.RoleArn?t.getCredentialsFromSTS(e):t.getCredentialsForIdentity(e)})},clearCachedId:function(){var e=this.params.IdentityPoolId;delete this.storage[this.localStorageKey.id+e],delete this.storage[this.localStorageKey.providers+e]},getId:function(e){var t=this;return"string"==typeof t.params.IdentityId?e(null,t.params.IdentityId):void t.cognito.getId(function(n,r){!n&&r.IdentityId?(t.params.IdentityId=r.IdentityId,e(null,r.IdentityId)):e(n)})},loadCredentials:function(e,t){e&&t&&(t.expired=!1,t.accessKeyId=e.Credentials.AccessKeyId,t.secretAccessKey=e.Credentials.SecretKey,t.sessionToken=e.Credentials.SessionToken,t.expireTime=e.Credentials.Expiration)},getCredentialsForIdentity:function(e){var t=this;t.cognito.getCredentialsForIdentity(function(n,r){n?t.clearCachedId():(t.cacheId(r),t.data=r,t.loadCredentials(t.data,t)),e(n)})},getCredentialsFromSTS:function(e){var t=this;t.cognito.getOpenIdToken(function(n,r){n?(t.clearCachedId(),e(n)):(t.cacheId(r),t.params.WebIdentityToken=r.Token,t.webIdentityCredentials.refresh(function(n){n?t.clearCachedId():(t.data=t.webIdentityCredentials.data,t.sts.credentialsFrom(t.data,t)),e(n)}))})},loadCachedId:function(){var e=this;if(t.util.isBrowser()&&!e.params.IdentityId){var n=e.getStorage("id");if(n&&e.params.Logins){var r=Object.keys(e.params.Logins),i=(e.getStorage("providers")||"").split(","),s=i.filter(function(e){return-1!==r.indexOf(e)});0!==s.length&&(e.params.IdentityId=n)}else n&&(e.params.IdentityId=n)}},createClients:function(){this.webIdentityCredentials=this.webIdentityCredentials||new t.WebIdentityCredentials(this.params),this.cognito=this.cognito||new t.CognitoIdentity({params:this.params}),this.sts=this.sts||new t.STS},cacheId:function(e){this.identityId=e.IdentityId,this.params.IdentityId=this.identityId,t.util.isBrowser()&&(this.setStorage("id",e.IdentityId),this.params.Logins&&this.setStorage("providers",Object.keys(this.params.Logins).join(",")))},getStorage:function(e){return this.storage[this.localStorageKey[e]+this.params.IdentityPoolId]},setStorage:function(e,t){try{this.storage[this.localStorageKey[e]+this.params.IdentityPoolId]=t}catch(n){}},storage:function(){try{return t.util.isBrowser()&&"object"==typeof window.localStorage?window.localStorage:{}}catch(e){return{}}}()})},{"../core":3}],6:[function(e){var t=e("../core");t.CredentialProviderChain=t.util.inherit(t.Credentials,{constructor:function(e){this.providers=e?e:t.CredentialProviderChain.defaultProviders.slice(0)},resolve:function(e){function t(s,o){if(!s&&o||n===r.length)return void e(s,o);var u=r[n++];o="function"==typeof u?u.call():u,o.get?o.get(function(e){t(e,e?null:o)}):t(null,o)}if(0===this.providers.length)return e(new Error("No providers")),this;var n=0,r=this.providers.slice(0);return t(),this}}),t.CredentialProviderChain.defaultProviders=[]},{"../core":3}],7:[function(e){var t=e("../core");t.SAMLCredentials=t.util.inherit(t.Credentials,{constructor:function(e){t.Credentials.call(this),this.expired=!0,this.params=e},refresh:function(e){var t=this;t.createClients(),e||(e=function(e){if(e)throw e}),t.service.assumeRoleWithSAML(function(n,r){n||t.service.credentialsFrom(r,t),e(n)})},createClients:function(){this.service=this.service||new t.STS({params:this.params})}})},{"../core":3}],8:[function(e){var t=e("../core");t.TemporaryCredentials=t.util.inherit(t.Credentials,{constructor:function(e){t.Credentials.call(this),this.loadMasterCredentials(),this.expired=!0,this.params=e||{},this.params.RoleArn&&(this.params.RoleSessionName=this.params.RoleSessionName||"temporary-credentials")},refresh:function(e){var t=this;t.createClients(),e||(e=function(e){if(e)throw e}),t.service.config.credentials=t.masterCredentials;var n=t.params.RoleArn?t.service.assumeRole:t.service.getSessionToken;n.call(t.service,function(n,r){n||t.service.credentialsFrom(r,t),e(n)})},loadMasterCredentials:function(){for(this.masterCredentials=t.config.credentials;this.masterCredentials.masterCredentials;)this.masterCredentials=this.masterCredentials.masterCredentials},createClients:function(){this.service=this.service||new t.STS({params:this.params})}})},{"../core":3}],9:[function(e){var t=e("../core");t.WebIdentityCredentials=t.util.inherit(t.Credentials,{constructor:function(e){t.Credentials.call(this),this.expired=!0,this.params=e,this.params.RoleSessionName=this.params.RoleSessionName||"web-identity",this.data=null},refresh:function(e){var t=this;t.createClients(),e||(e=function(e){if(e)throw e}),t.service.assumeRoleWithWebIdentity(function(n,r){t.data=null,n||(t.data=r,t.service.credentialsFrom(r,t)),e(n)})},createClients:function(){this.service=this.service||new t.STS({params:this.params})}})},{"../core":3}],10:[function(e){var t=e("./core"),n=e("./sequential_executor");t.EventListeners={Core:{}},t.EventListeners={Core:(new n).addNamedListeners(function(e,n){n("VALIDATE_CREDENTIALS","validate",function(e,n){return e.service.api.signatureVersion?void e.service.config.getCredentials(function(i){i&&(e.response.error=t.util.error(i,{code:"CredentialsError",message:"Missing credentials in config"})),n()}):n()}),e("VALIDATE_REGION","validate",function(e){e.service.config.region||e.service.isGlobalEndpoint||(e.response.error=t.util.error(new Error,{code:"ConfigError",message:"Missing region in config"}))}),e("VALIDATE_PARAMETERS","validate",function(e){var n=e.service.api.operations[e.operation].input;(new t.ParamValidator).validate(n,e.params)}),n("COMPUTE_SHA256","afterBuild",function(e,n){if(!e.service.api.signatureVersion)return n();if(e.service.getSignerClass(e)===t.Signers.V4){var r=e.httpRequest.body||"";t.util.computeSha256(r,function(t,r){t?n(t):(e.httpRequest.headers["X-Amz-Content-Sha256"]=r,n())})}else n()}),e("SET_CONTENT_LENGTH","afterBuild",function(e){if(void 0===e.httpRequest.headers["Content-Length"]){var n=t.util.string.byteLength(e.httpRequest.body);e.httpRequest.headers["Content-Length"]=n}}),e("SET_HTTP_HOST","afterBuild",function(e){e.httpRequest.headers.Host=e.httpRequest.endpoint.host}),e("RESTART","restart",function(){var e=this.response.error;e&&e.retryable&&(this.response.retryCount<this.service.config.maxRetries?this.response.retryCount++:this.response.error=null)}),n("SIGN","sign",function(e,n){return e.service.api.signatureVersion?void e.service.config.getCredentials(function(i,s){if(i)return e.response.error=i,n();try{var o=t.util.date.getDate(),u=e.service.getSignerClass(e),a=new u(e.httpRequest,e.service.api.signingName||e.service.api.endpointPrefix);delete e.httpRequest.headers.Authorization,delete e.httpRequest.headers.Date,delete e.httpRequest.headers["X-Amz-Date"],a.addAuthorization(s,o),e.signedAt=o}catch(f){e.response.error=f}n()}):n()}),e("VALIDATE_RESPONSE","validateResponse",function(e){this.service.successfulResponse(e,this)?(e.data={},e.error=null):(e.data=null,e.error=t.util.error(new Error,{code:"UnknownError",message:"An unknown error occurred."}))}),n("SEND","send",function(e,n){function r(r){e.httpResponse.stream=r,r.on("headers",function(n,i){e.request.emit("httpHeaders",[n,i,e]),e.httpResponse.streaming||(2===t.HttpClient.streamsApiVersion?r.on("readable",function(){var t=r.read();null!==t&&e.request.emit("httpData",[t,e])}):r.on("data",function(t){e.request.emit("httpData",[t,e])}))}),r.on("end",function(){e.request.emit("httpDone"),n()})}function i(t){t.on("sendProgress",function(t){e.request.emit("httpUploadProgress",[t,e])}),t.on("receiveProgress",function(t){e.request.emit("httpDownloadProgress",[t,e])})}function s(r){e.error=t.util.error(r,{code:"NetworkingError",region:e.request.httpRequest.region,hostname:e.request.httpRequest.endpoint.hostname,retryable:!0}),e.request.emit("httpError",[e.error,e],function(){n()})}function o(){var n=t.HttpClient.getInstance(),o=e.request.service.config.httpOptions||{};try{var u=n.handleRequest(e.request.httpRequest,o,r,s);i(u)}catch(a){s(a)}}e.httpResponse._abortCallback=n,e.error=null,e.data=null;var u=(t.util.date.getDate()-this.signedAt)/1e3;u>=600?this.emit("sign",[this],function(e){e?n(e):o()}):o()}),e("HTTP_HEADERS","httpHeaders",function(e,n,r){r.httpResponse.statusCode=e,r.httpResponse.headers=n,r.httpResponse.body=new t.util.Buffer(""),r.httpResponse.buffers=[],r.httpResponse.numBytes=0}),e("HTTP_DATA","httpData",function(e,n){if(e){if(t.util.isNode()){n.httpResponse.numBytes+=e.length;var r=n.httpResponse.headers["content-length"],i={loaded:n.httpResponse.numBytes,total:r};n.request.emit("httpDownloadProgress",[i,n])}n.httpResponse.buffers.push(new t.util.Buffer(e))}}),e("HTTP_DONE","httpDone",function(e){if(e.httpResponse.buffers&&e.httpResponse.buffers.length>0){var n=t.util.buffer.concat(e.httpResponse.buffers);e.httpResponse.body=n}delete e.httpResponse.numBytes,delete e.httpResponse.buffers}),e("FINALIZE_ERROR","retry",function(e){e.httpResponse.statusCode&&(e.error.statusCode=e.httpResponse.statusCode,void 0===e.error.retryable&&(e.error.retryable=this.service.retryableError(e.error,this)))}),e("INVALIDATE_CREDENTIALS","retry",function(e){if(e.error)switch(e.error.code){case"RequestExpired":case"ExpiredTokenException":case"ExpiredToken":e.error.retryable=!0,e.request.service.config.credentials.expired=!0}}),e("EXPIRED_SIGNATURE","retry",function(e){var t=e.error;t&&"string"==typeof t.code&&"string"==typeof t.message&&t.code.match(/Signature/)&&t.message.match(/expired/)&&(e.error.retryable=!0)}),e("REDIRECT","retry",function(e){e.error&&e.error.statusCode>=300&&e.error.statusCode<400&&e.httpResponse.headers.location&&(this.httpRequest.endpoint=new t.Endpoint(e.httpResponse.headers.location),this.httpRequest.headers.Host=this.httpRequest.endpoint.host,e.error.redirect=!0,e.error.retryable=!0)}),e("RETRY_CHECK","retry",function(e){if(e.error)if(e.error.redirect&&e.redirectCount<e.maxRedirects)e.error.retryDelay=0;else if(e.retryCount<e.maxRetries){var t=this.service.retryDelays();e.error.retryDelay=t[e.retryCount]||0}}),n("RESET_RETRY_STATE","afterRetry",function(e,t){var n,r=!1;e.error&&(n=e.error.retryDelay||0,e.error.retryable&&e.retryCount<e.maxRetries?(e.retryCount++,r=!0):e.error.redirect&&e.redirectCount<e.maxRedirects&&(e.redirectCount++,r=!0)),r?(e.error=null,setTimeout(t,n)):t()})}),CorePost:(new n).addNamedListeners(function(e){e("EXTRACT_REQUEST_ID","extractData",function(e){e.requestId||(e.requestId=e.httpResponse.headers["x-amz-request-id"]||e.httpResponse.headers["x-amzn-requestid"]),!e.requestId&&e.data&&e.data.ResponseMetadata&&(e.requestId=e.data.ResponseMetadata.RequestId)}),e("ENOTFOUND_ERROR","httpError",function(e){if("NetworkingError"===e.code&&"ENOTFOUND"===e.errno){var n="Inaccessible host: `"+e.hostname+"'. This service may not be available in the `"+e.region+"' region.";this.response.error=t.util.error(new Error(n),{code:"UnknownEndpoint",region:e.region,hostname:e.hostname,retryable:!0,originalError:e})}})}),Logger:(new n).addNamedListeners(function(n){n("LOG_REQUEST","complete",function(n){function r(){var r=t.util.date.getDate().getTime(),o=(r-i.startTime.getTime())/1e3,u=s.isTTY?!0:!1,a=n.httpResponse.statusCode,f=e("util").inspect(i.params,!0,null),l="";return u&&(l+="[33m"),l+="[AWS "+i.service.serviceIdentifier+" "+a,l+=" "+o.toString()+"s "+n.retryCount+" retries]",u&&(l+="[0;1m"),l+=" "+t.util.string.lowerFirst(i.operation),l+="("+f+")",u&&(l+="[0m"),l}var i=n.request,s=i.service.config.logger;if(s){var o=r();"function"==typeof s.log?s.log(o):"function"==typeof s.write&&s.write(o+"\n")}})}),Json:(new n).addNamedListeners(function(t){var n=e("./protocol/json");t("BUILD","build",n.buildRequest),t("EXTRACT_DATA","extractData",n.extractData),t("EXTRACT_ERROR","extractError",n.extractError)}),Rest:(new n).addNamedListeners(function(t){var n=e("./protocol/rest");t("BUILD","build",n.buildRequest),t("EXTRACT_DATA","extractData",n.extractData),t("EXTRACT_ERROR","extractError",n.extractError)}),RestJson:(new n).addNamedListeners(function(t){var n=e("./protocol/rest_json");t("BUILD","build",n.buildRequest),t("EXTRACT_DATA","extractData",n.extractData),t("EXTRACT_ERROR","extractError",n.extractError)}),RestXml:(new n).addNamedListeners(function(t){var n=e("./protocol/rest_xml");t("BUILD","build",n.buildRequest),t("EXTRACT_DATA","extractData",n.extractData),t("EXTRACT_ERROR","extractError",n.extractError)}),Query:(new n).addNamedListeners(function(t){var n=e("./protocol/query");t("BUILD","build",n.buildRequest),t("EXTRACT_DATA","extractData",n.extractData),t("EXTRACT_ERROR","extractError",n.extractError)})}},{"./core":3,"./protocol/json":22,"./protocol/query":23,"./protocol/rest":24,"./protocol/rest_json":25,"./protocol/rest_xml":26,"./sequential_executor":34,util:70}],11:[function(e){var t=e("./core"),n=t.util.inherit;t.Endpoint=n({constructor:function(e,n){if(t.util.hideProperties(this,["slashes","auth","hash","search","query"]),"undefined"==typeof e||null===e)throw new Error("Invalid endpoint: "+e);if("string"!=typeof e)return t.util.copy(e);if(!e.match(/^http/)){var r=n&&void 0!==n.sslEnabled?n.sslEnabled:t.config.sslEnabled;e=(r?"https":"http")+"://"+e}t.util.update(this,t.util.urlParse(e)),this.port=this.port?parseInt(this.port,10):"https:"===this.protocol?443:80}}),t.HttpRequest=n({constructor:function(e,n){e=new t.Endpoint(e),this.method="POST",this.path=e.path||"/",this.headers={},this.body="",this.endpoint=e,this.region=n,this.setUserAgent()},setUserAgent:function(){var e=t.util.isBrowser()?"X-Amz-":"";this.headers[e+"User-Agent"]=t.util.userAgent()},pathname:function(){return this.path.split("?",1)[0]},search:function(){var e=this.path.split("?",2)[1];return e?(e=t.util.queryStringParse(e),t.util.queryParamsToString(e)):""}}),t.HttpResponse=n({constructor:function(){this.statusCode=void 0,this.headers={},this.body=void 0,this.streaming=!1,this.stream=null},createUnbufferedStream:function(){return this.streaming=!0,this.stream}}),t.HttpClient=n({}),t.HttpClient.getInstance=function(){return void 0===this.singleton&&(this.singleton=new this),this.singleton}},{"./core":3}],12:[function(e){var t=e("../core"),n=e("events").EventEmitter;e("../http"),t.XHRClient=t.util.inherit({handleRequest:function(e,i,s,o){var u=this,a=e.endpoint,f=new n,l=a.protocol+"//"+a.hostname;80!==a.port&&443!==a.port&&(l+=":"+a.port),l+=e.path;var c=new XMLHttpRequest,h=!1;e.stream=c,c.addEventListener("readystatechange",function(){try{if(0===c.status)return}catch(e){return}if(this.readyState>=this.HEADERS_RECEIVED&&!h){try{c.responseType="arraybuffer"}catch(e){}f.statusCode=c.status,f.headers=u.parseHeaders(c.getAllResponseHeaders()),f.emit("headers",f.statusCode,f.headers),h=!0}this.readyState===this.DONE&&u.finishRequest(c,f)},!1),c.upload.addEventListener("progress",function(e){f.emit("sendProgress",e)}),c.addEventListener("progress",function(e){f.emit("receiveProgress",e)},!1),c.addEventListener("timeout",function(){o(t.util.error(new Error("Timeout"),{code:"TimeoutError"}))},!1),c.addEventListener("error",function(){o(t.util.error(new Error("Network Failure"),{code:"NetworkingError"}))},!1),s(f),c.open(e.method,l,i.xhrAsync!==!1),t.util.each(e.headers,function(e,t){"Content-Length"!==e&&"User-Agent"!==e&&"Host"!==e&&c.setRequestHeader(e,t)}),i.timeout&&i.xhrAsync!==!1&&(c.timeout=i.timeout),i.xhrWithCredentials&&(c.withCredentials=!0);try{c.send(e.body)}catch(p){if(!e.body||"object"!=typeof e.body.buffer)throw p;c.send(e.body.buffer)}return f},parseHeaders:function(e){var n={};return t.util.arrayEach(e.split(/\r?\n/),function(e){var t=e.split(":",1)[0],i=e.substring(t.length+2);t.length>0&&(n[t]=i)}),n},finishRequest:function(e,n){var r;if("arraybuffer"===e.responseType&&e.response){var i=e.response;r=new t.util.Buffer(i.byteLength);for(var s=new Uint8Array(i),o=0;o<r.length;++o)r[o]=s[o]}try{r||"string"!=typeof e.responseText||(r=new t.util.Buffer(e.responseText))}catch(u){}r&&n.emit("data",r),n.emit("end")}}),t.HttpClient.prototype=t.XHRClient.prototype,t.HttpClient.streamsApiVersion=1},{"../core":3,"../http":11,events:61}],13:[function(e,t){function n(){}function r(e,t){if(!t||void 0===e||null===e)return void 0;switch(t.type){case"structure":return i(e,t);case"map":return o(e,t);case"list":return s(e,t);default:return u(e,t)}}function i(e,t){var n={};return a.each(e,function(e,i){var s=t.members[e];if(s){if("body"!==s.location)return;var o=r(i,s);void 0!==o&&(n[e]=o)}}),n}function s(e,t){var n=[];return a.arrayEach(e,function(e){var i=r(e,t.member);void 0!==i&&n.push(i)}),n}function o(e,t){var n={};return a.each(e,function(e,i){var s=r(i,t.value);void 0!==s&&(n[e]=s)}),n}function u(e,t){return t.toWireFormat(e)}var a=e("../util");n.prototype.build=function(e,t){return JSON.stringify(r(e,t))},t.exports=n},{"../util":49}],14:[function(e,t){function n(){}function r(e,t){if(!t||void 0===e||null===e)return void 0;switch(t.type){case"structure":return i(e,t);case"map":return o(e,t);case"list":return s(e,t);default:return u(e,t)}}function i(e,t){var n={};return a.each(e,function(e,i){var s=t.members[e];if(s){var o=r(i,s);void 0!==o&&(n[e]=o)}}),n}function s(e,t){var n=[];return a.arrayEach(e,function(e){var i=r(e,t.member);void 0!==i&&n.push(i)}),n}function o(e,t){var n={};return a.each(e,function(e,i){var s=r(i,t.value);void 0!==s&&(n[e]=s)}),n}function u(e,t){return t.toType(e)}var a=e("../util");n.prototype.parse=function(e,t){return r(JSON.parse(e),t)},t.exports=n},{"../util":49}],15:[function(e,t){function n(e,t){e=e||{},t=t||{},t.api=this,e.metadata=e.metadata||{},f(this,"isApi",!0,!1),f(this,"apiVersion",e.metadata.apiVersion),f(this,"endpointPrefix",e.metadata.endpointPrefix),f(this,"signingName",e.metadata.signingName),f(this,"globalEndpoint",e.metadata.globalEndpoint),f(this,"signatureVersion",e.metadata.signatureVersion),f(this,"jsonVersion",e.metadata.jsonVersion),f(this,"targetPrefix",e.metadata.targetPrefix),f(this,"protocol",e.metadata.protocol),f(this,"timestampFormat",e.metadata.timestampFormat),f(this,"xmlNamespaceUri",e.metadata.xmlNamespace),f(this,"abbreviation",e.metadata.serviceAbbreviation),f(this,"fullName",e.metadata.serviceFullName),l(this,"className",function(){var t=e.metadata.serviceAbbreviation||e.metadata.serviceFullName;return t?(t=t.replace(/^Amazon|AWS\s*|\(.*|\s+|\W+/g,""),"ElasticLoadBalancing"===t&&(t="ELB"),t):null}),f(this,"operations",new r(e.operations,t,function(e,n){return new i(e,n,t)},a.string.lowerFirst)),f(this,"shapes",new r(e.shapes,t,function(e,n){return s.create(n,t)})),f(this,"paginators",new r(e.paginators,t,function(e,n){return new o(e,n,t)})),f(this,"waiters",new r(e.waiters,t,function(e,n){return new u(e,n,t)},a.string.lowerFirst)),t.documentation&&(f(this,"documentation",e.documentation),f(this,"documentationUrl",e.documentationUrl))}var r=e("./collection"),i=e("./operation"),s=e("./shape"),o=e("./paginator"),u=e("./resource_waiter"),a=e("../util"),f=a.property,l=a.memoizedProperty;t.exports=n},{"../util":49,"./collection":16,"./operation":17,"./paginator":18,"./resource_waiter":19,"./shape":20}],16:[function(e,t){function n(e,t,n,r){i(this,r(e),function(){return n(e,t)})}function r(e,t,r,i){i=i||String;var s=this;for(var o in e)e.hasOwnProperty(o)&&n.call(s,o,e[o],r,i)}var i=e("../util").memoizedProperty;t.exports=r},{"../util":49}],17:[function(e,t){function n(e,t,n){n=n||{},s(this,"name",t.name||e),s(this,"api",n.api,!1),t.http=t.http||{},s(this,"httpMethod",t.http.method||"POST"),s(this,"httpPath",t.http.requestUri||"/"),o(this,"input",function(){return t.input?r.create(t.input,n):new r.create({type:"structure"},n)}),o(this,"output",function(){return t.output?r.create(t.output,n):new r.create({type:"structure"},n)}),o(this,"errors",function(){var e=[];if(!t.errors)return null;for(var i=0;i<t.errors.length;i++)e.push(r.create(t.errors[i],n));return e}),o(this,"paginator",function(){return n.api.paginators[e]}),n.documentation&&(s(this,"documentation",t.documentation),s(this,"documentationUrl",t.documentationUrl))}var r=e("./shape"),i=e("../util"),s=i.property,o=i.memoizedProperty;t.exports=n},{"../util":49,"./shape":20}],18:[function(e,t){function n(e,t){r(this,"inputToken",t.input_token),r(this,"limitKey",t.limit_key),r(this,"moreResults",t.more_results),r(this,"outputToken",t.output_token),r(this,"resultKey",t.result_key)}var r=e("../util").property;t.exports=n},{"../util":49}],19:[function(e,t){function n(e,t,n){function s(){i(this,"name",e),i(this,"api",n.api,!1),t.operation&&i(this,"operation",r.string.lowerFirst(t.operation));var s=this,o={ignoreErrors:"ignore_errors",successType:"success_type",successValue:"success_value",successPath:"success_path",acceptorType:"acceptor_type",acceptorValue:"acceptor_value",acceptorPath:"acceptor_path",failureType:"failure_type",failureValue:"failure_value",failurePath:"success_path",interval:"interval",maxAttempts:"max_attempts"};Object.keys(o).forEach(function(e){var n=t[o[e]];n&&i(s,e,n)})}if(n=n||{},n.api){var o=null;t["extends"]?o=n.api.waiters[t["extends"]]:"__default__"!==e&&(o=n.api.waiters.__default__),o&&(s.prototype=o)}return new s}var r=e("../util"),i=r.property;t.exports=n},{"../util":49}],20:[function(e,t){function n(e,t,n){null!==n&&void 0!==n&&g.property.apply(this,arguments)}function r(e,t){e.constructor.prototype[t]||g.memoizedProperty.apply(this,arguments)}function i(e,t,r){t=t||{},n(this,"shape",e.shape),n(this,"api",t.api,!1),n(this,"type",e.type),n(this,"location",e.location||this.location||"body"),n(this,"name",this.name||e.xmlName||e.queryName||e.locationName||r),n(this,"isStreaming",e.streaming||this.isStreaming||!1),n(this,"isComposite",e.isComposite||!1),n(this,"isShape",!0,!1),n(this,"isQueryName",e.queryName?!0:!1,!1),n(this,"isLocationName",e.locationName?!0:!1,!1),t.documentation&&(n(this,"documentation",e.documentation),n(this,"documentationUrl",e.documentationUrl)),e.xmlAttribute&&n(this,"isXmlAttribute",e.xmlAttribute||!1),n(this,"defaultValue",null),this.toWireFormat=function(e){return null===e||void 0===e?"":e},this.toType=function(e){return e}}function s(e){i.apply(this,arguments),n(this,"isComposite",!0),e.flattened&&n(this,"flattened",e.flattened||!1)}function o(e,t){var o=null,u=!this.isShape;s.apply(this,arguments),u&&(n(this,"defaultValue",function(){return{}}),n(this,"members",{}),n(this,"memberNames",[]),n(this,"required",[]),n(this,"isRequired",function(){return!1})),e.members&&(n(this,"members",new m(e.members,t,function(e,n){return i.create(n,t,e)})),r(this,"memberNames",function(){return e.xmlOrder||Object.keys(e.members)})),e.required&&(n(this,"required",e.required),n(this,"isRequired",function(t){if(!o){o={};for(var n=0;n<e.required.length;n++)o[e.required[n]]=!0}return o[t]},!1,!0)),n(this,"resultWrapper",e.resultWrapper||null),e.payload&&n(this,"payload",e.payload),"string"==typeof e.xmlNamespace?n(this,"xmlNamespaceUri",e.xmlNamespace):"object"==typeof e.xmlNamespace&&(n(this,"xmlNamespacePrefix",e.xmlNamespace.prefix),n(this,"xmlNamespaceUri",e.xmlNamespace.uri))}function u(e,t){var o=this,u=!this.isShape;if(s.apply(this,arguments),u&&n(this,"defaultValue",function(){return[]}),e.member&&r(this,"member",function(){return i.create(e.member,t)}),this.flattened){var a=this.name;r(this,"name",function(){return o.member.name||a})}}function a(e,t){var o=!this.isShape;s.apply(this,arguments),o&&(n(this,"defaultValue",function(){return{}}),n(this,"key",i.create({type:"string"},t)),n(this,"value",i.create({type:"string"},t))),e.key&&r(this,"key",function(){return i.create(e.key,t)}),e.value&&r(this,"value",function(){return i.create(e.value,t)})}function f(e){var t=this;if(i.apply(this,arguments),"header"===this.location)n(this,"timestampFormat","rfc822");else if(e.timestampFormat)n(this,"timestampFormat",e.timestampFormat);else if(this.api)if(this.api.timestampFormat)n(this,"timestampFormat",this.api.timestampFormat);else switch(this.api.protocol){case"json":case"rest-json":n(this,"timestampFormat","unixTimestamp");break;case"rest-xml":case"query":case"ec2":n(this,"timestampFormat","iso8601")}this.toType=function(e){return null===e||void 0===e?null:"function"==typeof e.toUTCString?e:"string"==typeof e||"number"==typeof e?g.date.parseTimestamp(e):null},this.toWireFormat=function(e){return g.date.format(e,t.timestampFormat)}}function l(){if(i.apply(this,arguments),this.api)switch(this.api.protocol){case"rest-xml":case"query":case"ec2":this.toType=function(e){return e||""}}}function c(){i.apply(this,arguments),this.toType=function(e){return null===e||void 0===e?null:parseFloat(e)},this.toWireFormat=this.toType}function h(){i.apply(this,arguments),this.toType=function(e){return null===e||void 0===e?null:parseInt(e,10)},this.toWireFormat=this.toType}function p(){i.apply(this,arguments),this.toType=g.base64.decode,this.toWireFormat=g.base64.encode}function d(){p.apply(this,arguments)}function v(){i.apply(this,arguments),this.toType=function(e){return"boolean"==typeof e?e:null===e||void 0===e?null:"true"===e}}var m=e("./collection"),g=e("../util");i.normalizedTypes={character:"string","double":"float","long":"integer","short":"integer",biginteger:"integer",bigdecimal:"float",blob:"binary"},i.types={structure:o,list:u,map:a,"boolean":v,timestamp:f,"float":c,integer:h,string:l,base64:d,binary:p},i.resolve=function(e,t){if(e.shape){var n=t.api.shapes[e.shape];if(!n)throw new Error("Cannot find shape reference: "+e.shape);return n}return null},i.create=function(e,t,n){if(e.isShape)return e;var r=i.resolve(e,t);if(r){var s=Object.keys(e);if(t.documentation||(s=s.filter(function(e){return!e.match(/documentation/)})),s===["shape"])return r;var o=function(){r.constructor.call(this,e,t,n)};return o.prototype=r,new o}e.type||(e.type=e.members?"structure":e.member?"list":e.key?"map":"string");var u=e.type;if(i.normalizedTypes[e.type]&&(e.type=i.normalizedTypes[e.type]),i.types[e.type])return new i.types[e.type](e,t,n);throw new Error("Unrecognized shape type: "+u)},i.shapes={StructureShape:o,ListShape:u,MapShape:a,StringShape:l,BooleanShape:v,Base64Shape:d},t.exports=i},{"../util":49,"./collection":16}],21:[function(e){var t=e("./core");t.ParamValidator=t.util.inherit({validate:function(e,n,r){if(this.errors=[],this.validateMember(e,n||{},r||"params"),!(this.errors.length>1)){if(1===this.errors.length)throw this.errors[0];return!0}var i=this.errors.join("\n* ");if(this.errors.length>1)throw i="There were "+this.errors.length+" validation errors:\n* "+i,t.util.error(new Error(i),{code:"MultipleValidationErrors",errors:this.errors})},validateStructure:function(e,t,n){this.validateType(n,t,["object"],"structure");for(var r,i=0;e.required&&i<e.required.length;i++){r=e.required[i];var s=t[r];(void 0===s||null===s)&&this.fail("MissingRequiredParameter","Missing required key '"+r+"' in "+n)}for(r in t)if(t.hasOwnProperty(r)){var o=t[r],u=e.members[r];if(void 0!==u){var a=[n,r].join(".");this.validateMember(u,o,a)}else this.fail("UnexpectedParameter","Unexpected key '"+r+"' found in "+n)}return!0},validateMember:function(e,t,n){switch(e.type){case"structure":return this.validateStructure(e,t,n);case"list":return this.validateList(e,t,n);case"map":return this.validateMap(e,t,n);default:return this.validateScalar(e,t,n)}},validateList:function(e,t,n){this.validateType(n,t,[Array]);for(var r=0;r<t.length;r++)this.validateMember(e.member,t[r],n+"["+r+"]")},validateMap:function(e,t,n){this.validateType(n,t,["object"],"map");for(var r in t)t.hasOwnProperty(r)&&this.validateMember(e.value,t[r],n+"['"+r+"']")},validateScalar:function(e,t,n){switch(e.type){case null:case void 0:case"string":return this.validateType(n,t,["string"]);case"base64":case"binary":return this.validatePayload(n,t);case"integer":case"float":return this.validateNumber(n,t);case"boolean":return this.validateType(n,t,["boolean"]);case"timestamp":return this.validateType(n,t,[Date,/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?Z$/,"number"],"Date object, ISO-8601 string, or a UNIX timestamp");default:return this.fail("UnkownType","Unhandled type "+e.type+" for "+n)}},fail:function(e,n){this.errors.push(t.util.error(new Error(n),{code:e}))},validateType:function(e,n,r,i){if(null!==n&&void 0!==n){for(var s=!1,o=0;o<r.length;o++){if("string"==typeof r[o]){if(typeof n===r[o])return}else if(r[o]instanceof RegExp){if((n||"").toString().match(r[o]))return}else{if(n instanceof r[o])return;if(t.util.isType(n,r[o]))return;i||s||(r=r.slice()),r[o]=t.util.typeName(r[o])}s=!0}var u=i;u||(u=r.join(", ").replace(/,([^,]+)$/,", or$1"));var a=u.match(/^[aeiou]/i)?"n":"";this.fail("InvalidParameterType","Expected "+e+" to be a"+a+" "+u)}},validateNumber:function(e,t){if(null!==t&&void 0!==t){if("string"==typeof t){var n=parseFloat(t);n.toString()===t&&(t=n)}this.validateType(e,t,["number"])}},validatePayload:function(e,n){if(null!==n&&void 0!==n&&"string"!=typeof n&&(!n||"number"!=typeof n.byteLength)){if(t.util.isNode()){var r=t.util.nodeRequire("stream").Stream;if(t.util.Buffer.isBuffer(n)||n instanceof r)return}var i=["Buffer","Stream","File","Blob","ArrayBuffer","DataView"];if(n)for(var s=0;s<i.length;s++){if(t.util.isType(n,i[s]))return;if(t.util.typeName(n.constructor)===i[s])return}this.fail("InvalidParameterType","Expected "+e+" to be a string, Buffer, Stream, Blob, or typed array object")}}})},{"./core":3}],22:[function(e,t){function n(e){var t=e.httpRequest,n=e.service.api,r=n.targetPrefix+"."+n.operations[e.operation].name,i=n.jsonVersion||"1.0",s=n.operations[e.operation].input,u=new o;1===i&&(i="1.0"),t.body=u.build(e.params||{},s),t.headers["Content-Type"]="application/x-amz-json-"+i,t.headers["X-Amz-Target"]=r}function r(e){var t={},n=e.httpResponse;if(t.code=n.headers["x-amzn-errortype"]||"UnknownError","string"==typeof t.code&&(t.code=t.code.split(":")[0]),n.body.length>0){var r=JSON.parse(n.body.toString());(r.__type||r.code)&&(t.code=(r.__type||r.code).split("#").pop()),t.message="RequestEntityTooLarge"===t.code?"Request body must be less than 1 MB":r.message||r.Message||null}else t.statusCode=n.statusCode,t.message=n.statusCode.toString();e.error=s.error(new Error,t)}function i(e){var t=e.httpResponse.body.toString()||"{}";if(e.request.service.config.convertResponseTypes===!1)e.data=JSON.parse(t);else{var n=e.request.service.api.operations[e.request.operation],r=n.output||{},i=new u;e.data=i.parse(t,r)}}var s=e("../util"),o=e("../json/builder"),u=e("../json/parser");t.exports={buildRequest:n,extractError:r,extractData:i}},{"../json/builder":13,"../json/parser":14,"../util":49}],23:[function(e,t){function n(e){var t=e.service.api.operations[e.operation],n=e.httpRequest;n.headers["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8",n.params={Version:e.service.api.apiVersion,Action:t.name};var r=new u;r.serialize(e.params,t.input,function(e,t){n.params[e]=t}),n.body=o.queryParamsToString(n.params)}function r(e){var t,n=e.httpResponse.body.toString();t=n.match("<UnknownOperationException")?{Code:"UnknownOperation",Message:"Unknown operation "+e.request.operation}:(new s.XML.Parser).parse(n),t.requestId&&!e.requestId&&(e.requestId=t.requestId),t.Errors&&(t=t.Errors),t.Error&&(t=t.Error),e.error=t.Code?o.error(new Error,{code:t.Code,message:t.Message}):o.error(new Error,{code:e.httpResponse.statusCode,message:null})}function i(e){var t=e.request,n=t.service.api.operations[t.operation],r=n.output||{},i=r;if(i.resultWrapper){var u=a.create({type:"structure"});u.members[i.resultWrapper]=r,u.memberNames=[i.resultWrapper],o.property(r,"name",r.resultWrapper),r=u}var f=new s.XML.Parser;if(r&&r.members&&!r.members._XAMZRequestId){var l=a.create({type:"string"},{api:{protocol:"query"}},"requestId");r.members._XAMZRequestId=l}var c=f.parse(e.httpResponse.body.toString(),r);e.requestId=c._XAMZRequestId||c.requestId,c._XAMZRequestId&&delete c._XAMZRequestId,i.resultWrapper&&c[i.resultWrapper]&&(o.update(c,c[i.resultWrapper]),delete c[i.resultWrapper]),e.data=c}var s=e("../core"),o=e("../util"),u=e("../query/query_param_serializer"),a=e("../model/shape");t.exports={buildRequest:n,extractError:r,extractData:i}},{"../core":3,"../model/shape":20,"../query/query_param_serializer":27,"../util":49}],24:[function(e,t){function n(e){e.httpRequest.method=e.service.api.operations[e.operation].httpMethod}function r(e){var t=e.service.api.operations[e.operation],n=t.input,r=[e.httpRequest.endpoint.path,t.httpPath].join("/");r=r.replace(/\/+/g,"/");var i={},s=!1;if(a.each(n.members,function(t,n){var o=e.params[t];if(null!==o&&void 0!==o)if("uri"===n.location){var u=new RegExp("\\{"+n.name+"(\\+)?\\}");r=r.replace(u,function(e,t){var n=t?a.uriEscapePath:a.uriEscape;return n(String(o))})}else"querystring"===n.location&&(s=!0,i[n.name]="list"===n.type?o.map(function(e){return a.uriEscape(String(e))}):a.uriEscape(String(o)))}),s){r+=r.indexOf("?")>=0?"&":"?";var o=[];a.arrayEach(Object.keys(i).sort(),function(e){Array.isArray(i[e])||(i[e]=[i[e]]);for(var t=0;t<i[e].length;t++)o.push(a.uriEscape(String(e))+"="+i[e][t])}),r+=o.join("&")}e.httpRequest.path=r}function i(e){var t=e.service.api.operations[e.operation];a.each(t.input.members,function(t,n){var r=e.params[t];null!==r&&void 0!==r&&("headers"===n.location&&"map"===n.type?a.each(r,function(t,r){e.httpRequest.headers[n.name+t]=r}):"header"===n.location&&(r=n.toWireFormat(r).toString(),e.httpRequest.headers[n.name]=r))})}function s(e){n(e),r(e),i(e)}function o(){}function u(e){var t=e.request,n={},r=e.httpResponse,i=t.service.api.operations[t.operation],s=i.output,o={};a.each(r.headers,function(e,t){o[e.toLowerCase()]=t}),a.each(s.members,function(e,t){var i=(t.name||e).toLowerCase();if("headers"===t.location&&"map"===t.type){n[e]={};var s=t.isLocationName?t.name:"",u=new RegExp("^"+s+"(.+)","i");a.each(r.headers,function(t,r){var i=t.match(u);null!==i&&(n[e][i[1]]=r)})}else"header"===t.location?void 0!==o[i]&&(n[e]=o[i]):"statusCode"===t.location&&(n[e]=parseInt(r.statusCode,10))}),e.data=n}var a=e("../util");t.exports={buildRequest:s,extractError:o,extractData:u}},{"../util":49}],25:[function(e,t){function n(e){var t=new f,n=e.service.api.operations[e.operation].input;if(n.payload){var r={},i=n.members[n.payload];if(r=e.params[n.payload],void 0===r)return;e.httpRequest.body="structure"===i.type?t.build(r,i):r}else e.httpRequest.body=t.build(e.params,n)}function r(e){u.buildRequest(e),["GET","HEAD"].indexOf(e.httpRequest.method)<0&&n(e)}function i(e){a.extractError(e)}function s(e){u.extractData(e);var t=e.request,n=t.service.api.operations[t.operation].output||{};if(n.payload){var r=n.members[n.payload],i=e.httpResponse.body;if(r.isStreaming)e.data[n.payload]=i;else if("structure"===r.type){var s=new l;e.data[n.payload]=s.parse(i,r)}else e.data[n.payload]=i.toString()}else{var f=e.data;a.extractData(e),e.data=o.merge(f,e.data)}}var o=e("../util"),u=e("./rest"),a=e("./json"),f=e("../json/builder"),l=e("../json/parser");t.exports={buildRequest:r,extractError:i,extractData:s}},{"../json/builder":13,"../json/parser":14,"../util":49,"./json":22,"./rest":24}],26:[function(e,t){function n(e){var t=e.service.api.operations[e.operation].input,n=new o.XML.Builder,r=e.params,i=t.payload;if(i){var s=t.members[i];if(r=r[i],void 0===r)return;if("structure"===s.type){var a=s.name;e.httpRequest.body=n.toXML(r,s,a)}else e.httpRequest.body=r}else e.httpRequest.body=n.toXML(r,t,t.name||t.shape||u.string.upperFirst(e.operation)+"Request")}function r(e){a.buildRequest(e),["GET","HEAD"].indexOf(e.httpRequest.method)<0&&n(e)}function i(e){a.extractError(e);var t=(new o.XML.Parser).parse(e.httpResponse.body.toString());t.Errors&&(t=t.Errors),t.Error&&(t=t.Error),e.error=t.Code?u.error(new Error,{code:t.Code,message:t.Message}):u.error(new Error,{code:e.httpResponse.statusCode,message:null})}function s(e){a.extractData(e);var t,n=e.request,r=e.httpResponse.body,i=n.service.api.operations[n.operation],s=i.output,f=s.payload;if(f){var l=s.members[f];l.isStreaming?e.data[f]=r:"structure"===l.type?(t=new o.XML.Parser,e.data[f]=t.parse(r.toString(),l)):e.data[f]=r.toString()}else if(r.length>0){t=new o.XML.Parser;var c=t.parse(r.toString(),s);u.update(e.data,c)}}var o=e("../core"),u=e("../util"),a=e("./rest");t.exports={buildRequest:r,extractError:i,extractData:s}},{"../core":3,"../util":49,"./rest":24}],27:[function(e,t){function n(){}function r(e){return e.isQueryName||"ec2"!==e.api.protocol?e.name:e.name[0].toUpperCase()+e.name.substr(1)}function i(e,t,n,i){a.each(n.members,function(n,s){var o=t[n];if(null!==o&&void 0!==o){var a=r(s);a=e?e+"."+a:a,u(a,o,s,i)}})}function s(e,t,n,r){var i=1;a.each(t,function(t,s){var o=n.flattened?".":".entry.",a=o+i++ +".",f=a+(n.key.name||"key"),l=a+(n.value.name||"value");u(e+f,t,n.key,r),u(e+l,s,n.value,r)})}function o(e,t,n,i){var s=n.member||{};return 0===t.length?void i.call(this,e,null):void a.arrayEach(t,function(t,o){var a="."+(o+1);if("ec2"===n.api.protocol)a+="";else if(n.flattened){if(s.name){var f=e.split(".");f.pop(),f.push(r(s)),e=f.join(".")}}else a=".member"+a;u(e+a,t,s,i)})}function u(e,t,n,r){null!==t&&void 0!==t&&("structure"===n.type?i(e,t,n,r):"list"===n.type?o(e,t,n,r):"map"===n.type?s(e,t,n,r):r(e,n.toWireFormat(t).toString()))}var a=e("../util");n.prototype.serialize=function(e,t,n){i("",e,t,n)},t.exports=n},{"../util":49}],28:[function(e,t){function n(e){if(!e)return null;var t=e.split("-");return t.length<3?null:t.slice(0,t.length-2).join("-")+"-*"}function r(e){var t=e.config.region,r=n(t),i=e.api.endpointPrefix;return[[t,i],[r,i],[t,"*"],[r,"*"],["*",i],["*","*"]].map(function(e){return e[0]&&e[1]?e.join("/"):null})}function i(e,t){o.each(t,function(t,n){"globalEndpoint"!==t&&(void 0===e.config[t]||null===e.config[t])&&(e.config[t]=n)})}function s(e){for(var t=r(e),n=0;n<t.length;n++){var s=t[n];if(s&&u.rules.hasOwnProperty(s)){var o=u.rules[s];return"string"==typeof o&&(o=u.patterns[o]),e.isGlobalEndpoint=!!o.globalEndpoint,o.signatureVersion||(o.signatureVersion="v4"),void i(e,o)}}}var o=e("./util"),u=e("./region_config.json");t.exports=s},{"./region_config.json":29,"./util":49}],29:[function(e,t){t.exports={rules:{"*/*":{endpoint:"{service}.{region}.amazonaws.com"},"cn-*/*":{endpoint:"{service}.{region}.amazonaws.com.cn"},"*/cloudfront":"globalSSL","*/iam":"globalSSL","*/sts":"globalSSL","*/importexport":{endpoint:"{service}.amazonaws.com",signatureVersion:"v2",globalEndpoint:!0},"*/route53":{endpoint:"https://{service}.amazonaws.com",signatureVersion:"v3https",globalEndpoint:!0},"us-gov-*/iam":"globalGovCloud","us-gov-*/sts":{endpoint:"{service}.{region}.amazonaws.com"},"us-gov-west-1/s3":"s3dash","us-west-1/s3":"s3dash","us-west-2/s3":"s3dash","eu-west-1/s3":"s3dash","ap-southeast-1/s3":"s3dash","ap-southeast-2/s3":"s3dash","ap-northeast-1/s3":"s3dash","sa-east-1/s3":"s3dash","us-east-1/s3":{endpoint:"{service}.amazonaws.com",signatureVersion:"s3"},"us-east-1/sdb":{endpoint:"{service}.amazonaws.com",signatureVersion:"v2"},"*/sdb":{endpoint:"{service}.{region}.amazonaws.com",signatureVersion:"v2"}},patterns:{globalSSL:{endpoint:"https://{service}.amazonaws.com",globalEndpoint:!0},globalGovCloud:{endpoint:"{service}.us-gov.amazonaws.com"},s3dash:{endpoint:"{service}-{region}.amazonaws.com",signatureVersion:"s3"}}}},{}],30:[function(e){(function(t){function n(e){return u.hasOwnProperty(e._asm.currentState)}var r=e("./core"),i=e("./state_machine"),s=r.util.inherit,o=r.util.nodeRequire("domain"),u={success:1,error:1,complete:1},a=new i;a.setupStates=function(){var e=function(e,t){var r=this;try{r.emit(r._asm.currentState,function(){t(r.response.error)})}catch(i){if(n(r)){if(!(o&&r.domain instanceof o.Domain))throw i;i.domainEmitter=r,i.domain=r.domain,i.domainThrown=!1,r.domain.emit("error",i)}else r.response.error=i,t(i)}};this.addState("validate","build","error",e),this.addState("build","afterBuild","restart",e),this.addState("afterBuild","sign","restart",e),this.addState("sign","send","retry",e),this.addState("retry","afterRetry","afterRetry",e),this.addState("afterRetry","sign","error",e),this.addState("send","validateResponse","retry",e),this.addState("validateResponse","extractData","extractError",e),this.addState("extractError","extractData","retry",e),this.addState("extractData","success","retry",e),this.addState("restart","build","error",e),this.addState("success","complete","complete",e),this.addState("error","complete","complete",e),this.addState("complete",null,null,e)},a.setupStates(),r.Request=s({constructor:function(e,t,n){var s=e.endpoint,u=e.config.region;e.isGlobalEndpoint&&(u="us-east-1"),this.domain=o&&o.active,this.service=e,this.operation=t,this.params=n||{},this.httpRequest=new r.HttpRequest(s,u),this.startTime=r.util.date.getDate(),this.response=new r.Response(this),this._asm=new i(a.states,"validate"),r.SequentialExecutor.call(this),this.emit=this.emitEvent},send:function(e){return e&&this.on("complete",function(t){e.call(t,t.error,t.data)}),this.runTo(),this.response},build:function(e){return this.runTo("send",e)},runTo:function(e,t){return this._asm.runTo(e,t,this),this},abort:function(){return this.removeAllListeners("validateResponse"),this.removeAllListeners("extractError"),this.on("validateResponse",function(e){e.error=r.util.error(new Error("Request aborted by user"),{code:"RequestAbortedError",retryable:!1})}),this.httpRequest.stream&&(this.httpRequest.stream.abort(),this.httpRequest._abortCallback?this.httpRequest._abortCallback():this.removeAllListeners("send")),this},eachPage:function(e){function t(n){e.call(n,n.error,n.data,function(i){i!==!1&&(n.hasNextPage()?n.nextPage().on("complete",t).send():e.call(n,null,null,r.util.fn.noop))})}e=r.util.fn.makeAsync(e,3),this.on("complete",t).send()},eachItem:function(e){function t(t,i){if(t)return e(t,null);if(null===i)return e(null,null);var s=n.service.paginationConfig(n.operation),o=s.resultKey;Array.isArray(o)&&(o=o[0]);var u=r.util.jamespath.query(o,i);r.util.arrayEach(u,function(t){r.util.arrayEach(t,function(t){e(null,t)})})}var n=this;this.eachPage(t)},isPageable:function(){return this.service.paginationConfig(this.operation)?!0:!1},createReadStream:function(){var e=r.util.nodeRequire("stream"),n=this,i=null,s=!1;return 2===r.HttpClient.streamsApiVersion?(i=new e.Readable,i._read=function(){}):(i=new e.Stream,i.readable=!0),i.sent=!1,i.on("newListener",function(e){i.sent||"data"!==e&&"readable"!==e||("data"===e&&(s=!0),i.sent=!0,t.nextTick(function(){n.send(function(){})}))}),this.on("httpHeaders",function(e,t,o){if(300>e){n.removeListener("httpData",r.EventListeners.Core.HTTP_DATA),n.removeListener("httpError",r.EventListeners.Core.HTTP_ERROR),n.on("httpError",function(e){o.error=e,o.error.retryable=!1});var u=o.httpResponse.createUnbufferedStream();s?(u.on("data",function(e){i.emit("data",e)}),u.on("end",function(){i.emit("end")})):(u.on("readable",function(){var e;do e=u.read(),null!==e&&i.push(e);while(null!==e);i.read(0)}),u.on("end",function(){i.push(null)})),u.on("error",function(e){i.emit("error",e)})}}),this.on("error",function(e){i.emit("error",e)}),i},emitEvent:function(e,t,n){"function"==typeof t&&(n=t,t=null),n||(n=function(){}),t||(t=this.eventParameters(e,this.response));var i=r.SequentialExecutor.prototype.emit;i.call(this,e,t,function(e){e&&(this.response.error=e),n.call(this,e)})},eventParameters:function(e){switch(e){case"restart":case"validate":case"sign":case"build":case"afterValidate":case"afterBuild":return[this];case"error":return[this.response.error,this.response];default:return[this.response]}},presign:function(e,t){return t||"function"!=typeof e||(t=e,e=null),(new r.Signers.Presign).sign(this.toGet(),e,t)},toUnauthenticated:function(){return this.removeListener("validate",r.EventListeners.Core.VALIDATE_CREDENTIALS),this.removeListener("sign",r.EventListeners.Core.SIGN),this.toGet()},toGet:function(){return("query"===this.service.api.protocol||"ec2"===this.service.api.protocol)&&(this.removeListener("build",this.buildAsGet),this.addListener("build",this.buildAsGet)),this},buildAsGet:function(e){e.httpRequest.method="GET",e.httpRequest.path=e.service.endpoint.path+"?"+e.httpRequest.body,e.httpRequest.body="",delete e.httpRequest.headers["Content-Length"],delete e.httpRequest.headers["Content-Type"]}}),r.util.mixin(r.Request,r.SequentialExecutor)}).call(this,e("FWaASH"))},{"./core":3,"./state_machine":48,FWaASH:63}],31:[function(e){var t=e("./core"),n=t.util.inherit;t.ResourceWaiter=n({constructor:function(e,n){this.service=e,this.state=n,"object"==typeof this.state&&t.util.each.call(this,this.state,function(e,t){this.state=e,this.expectedValue=t}),this.loadWaiterConfig(this.state),this.expectedValue||(this.expectedValue=this.config.successValue)},service:null,state:null,expectedValue:null,config:null,waitDone:!1,Listeners:{retry:(new t.SequentialExecutor).addNamedListeners(function(e){e("RETRY_CHECK","retry",function(e){var t=e.request._waiter;e.error&&"ResourceNotReady"===e.error.code&&(e.error.retryDelay=1e3*t.config.interval)})}),output:(new t.SequentialExecutor).addNamedListeners(function(e){e("CHECK_OUT_ERROR","extractError",function(e){e.error&&e.request._waiter.setError(e,!0)}),e("CHECK_OUTPUT","extractData",function(e){var t=e.request._waiter,n=t.checkSuccess(e);n?e.error=null:t.setError(e,null===n?!1:!0)})}),error:(new t.SequentialExecutor).addNamedListeners(function(e){e("CHECK_ERROR","extractError",function(e){var t=e.request._waiter,n=t.checkError(e);n?(e.error=null,e.data={},e.request.removeAllListeners("extractData")):t.setError(e,null===n?!1:!0)}),e("CHECK_ERR_OUTPUT","extractData",function(e){e.request._waiter.setError(e,!0)})})},wait:function(e,t){"function"==typeof e&&(t=e,e=void 0);var n=this.service.makeRequest(this.config.operation,e),r=this.Listeners[this.config.successType];return n._waiter=this,n.response.maxRetries=this.config.maxAttempts,n.addListeners(this.Listeners.retry),r&&n.addListeners(r),t&&n.send(t),n},setError:function(e,n){e.data=null,e.error=t.util.error(e.error||new Error,{code:"ResourceNotReady",message:"Resource is not in the state "+this.state,retryable:n})},checkSuccess:function(e){if(!this.config.successPath)return e.httpResponse.statusCode<300;var n=t.util.jamespath.find(this.config.successPath,e.data);return this.config.failureValue&&this.config.failureValue.indexOf(n)>=0?null:this.expectedValue?n===this.expectedValue:n?!0:!1},checkError:function(e){var t=this.config.successValue;return"number"==typeof t?e.httpResponse.statusCode===t:e.error&&e.error.code===t},loadWaiterConfig:function(e,n){if(!this.service.api.waiters[e]){if(n)return;throw new t.util.error(new Error,{code:"StateNotFoundError",message:"State "+e+" not found."})}this.config=this.service.api.waiters[e];var r=this.config;!function(){r.successType=r.successType||r.acceptorType,r.successPath=r.successPath||r.acceptorPath,r.successValue=r.successValue||r.acceptorValue,r.failureType=r.failureType||r.acceptorType,r.failurePath=r.failurePath||r.acceptorPath,r.failureValue=r.failureValue||r.acceptorValue}()}})},{"./core":3}],32:[function(e){var t=e("./core"),n=t.util.inherit;t.Response=n({constructor:function(e){this.request=e,this.data=null,this.error=null,this.retryCount=0,this.redirectCount=0,this.httpResponse=new t.HttpResponse,e&&(this.maxRetries=e.service.numRetries(),this.maxRedirects=e.service.config.maxRedirects)},nextPage:function(e){var n,r=this.request.service,i=this.request.operation;try{n=r.paginationConfig(i,!0)}catch(s){this.error=s}if(!this.hasNextPage()){if(e)e(this.error,null);else if(this.error)throw this.error;return null}var o=t.util.copy(this.request.params);if(this.nextPageTokens){var u=n.inputToken;"string"==typeof u&&(u=[u]);for(var a=0;a<u.length;a++)o[u[a]]=this.nextPageTokens[a];return r.makeRequest(this.request.operation,o,e)}return e?e(null,null):null},hasNextPage:function(){return this.cacheNextPageTokens(),this.nextPageTokens?!0:void 0===this.nextPageTokens?void 0:!1},cacheNextPageTokens:function(){if(this.hasOwnProperty("nextPageTokens"))return this.nextPageTokens;this.nextPageTokens=void 0;var e=this.request.service.paginationConfig(this.request.operation);if(!e)return this.nextPageTokens;if(this.nextPageTokens=null,e.moreResults&&!t.util.jamespath.find(e.moreResults,this.data))return this.nextPageTokens;var n=e.outputToken;return"string"==typeof n&&(n=[n]),t.util.arrayEach.call(this,n,function(e){var n=t.util.jamespath.find(e,this.data);n&&(this.nextPageTokens=this.nextPageTokens||[],this.nextPageTokens.push(n))}),this.nextPageTokens}})},{"./core":3}],33:[function(e,t){var n=e("../core"),r=n.util.string.byteLength;n.S3.ManagedUpload=n.util.inherit({constructor:function(e){var t=this;n.SequentialExecutor.call(t),t.body=null,t.sliceFn=null,t.callback=null,t.parts={},t.completeInfo=[],t.fillQueue=function(){t.callback(new Error("Unsupported body payload "+typeof t.body))},t.configure(e)},configure:function(e){if(e=e||{},this.partSize=this.minPartSize,e.queueSize&&(this.queueSize=e.queueSize),e.partSize&&(this.partSize=e.partSize),e.leavePartsOnError&&(this.leavePartsOnError=!0),this.partSize<this.minPartSize)throw new Error("partSize must be greater than "+this.minPartSize);this.service=e.service,this.bindServiceObject(e.params),this.validateBody(),this.adjustTotalBytes()},leavePartsOnError:!1,queueSize:4,partSize:null,minPartSize:5242880,maxTotalParts:1e4,send:function(e){var t=this;t.callback=e||function(e){if(e)throw e};var r=!0;if(t.sliceFn)t.fillQueue=t.fillBuffer;else if(n.util.isNode()){var i=n.util.nodeRequire("stream").Stream;t.body instanceof i&&(r=!1,t.fillQueue=t.fillStream,t.partBuffer=new n.util.Buffer(0),t.body.on("readable",function(){t.fillQueue()}).on("end",function(){t.isDoneChunking=!0,t.numParts=t.totalPartNumbers,t.fillQueue.call(t)}))}r&&t.fillQueue.call(t)},abort:function(){this.cleanup(n.util.error(new Error("Request aborted by user"),{code:"RequestAbortedError",retryable:!1}))},validateBody:function(){var e=this;if(e.body=e.service.config.params.Body,!e.body)throw new Error("params.Body is required");"string"==typeof e.body&&(e.body=new n.util.Buffer(e.body)),e.sliceFn=n.util.arraySliceFn(e.body)},bindServiceObject:function(e){e=e||{};var t=this;if(t.service){var r=n.util.copy(t.service.config);t.service=new t.service.constructor.__super__(r),t.service.config.params=n.util.merge(t.service.config.params||{},e)}else t.service=new n.S3({params:e})},adjustTotalBytes:function(){var e=this;try{e.totalBytes=r(e.body)}catch(t){}if(e.totalBytes){var n=Math.ceil(e.totalBytes/e.maxTotalParts);n>e.partSize&&(e.partSize=n)}else e.totalBytes=void 0},isDoneChunking:!1,partPos:0,totalChunkedBytes:0,totalUploadedBytes:0,totalBytes:void 0,numParts:0,totalPartNumbers:0,activeParts:0,doneParts:0,parts:null,completeInfo:null,failed:!1,multipartReq:null,partBuffer:null,fillBuffer:function(){for(var e=this,t=r(e.body);e.activeParts<e.queueSize&&e.partPos<t;){var n=Math.min(e.partPos+e.partSize,t),s=e.sliceFn.call(e.body,e.partPos,n);e.partPos+=e.partSize,(r(s)<e.partSize||e.partPos===t)&&(e.isDoneChunking=!0,e.numParts=e.totalPartNumbers+1),e.nextChunk(s)}},fillStream:function(){var e=this;if(!(e.activeParts>=e.queueSize)){var t=e.body.read(e.partSize-e.partBuffer.length)||e.body.read();t&&(e.partBuffer=n.util.Buffer.concat([e.partBuffer,t]),e.totalChunkedBytes+=t.length),e.partBuffer.length>=e.partSize?(e.nextChunk(e.partBuffer.slice(0,e.partSize)),e.partBuffer=e.partBuffer.slice(e.partSize)):e.isDoneChunking&&(e.totalBytes=e.totalChunkedBytes,e.partBuffer.length>0&&(e.numParts++,e.nextChunk(e.partBuffer)),e.partBuffer=new n.util.Buffer(0)),e.body.read(0)}},nextChunk:function(e){var t=this;if(t.failed)return null;var n=++t.totalPartNumbers;if(t.isDoneChunking&&1===n){var r=t.service.putObject({Body:e});return r._managedUpload=t,r.on("httpUploadProgress",t.progress).send(t.finishSinglePart),null}t.activeParts++,t.service.config.params.UploadId?t.uploadPart(e,n):t.multipartReq?t.queueChunks(e,n):(t.multipartReq=t.service.createMultipartUpload(),t.multipartReq.on("success",function(e){t.service.config.params.UploadId=e.data.UploadId,t.multipartReq=null}),t.queueChunks(e,n),t.multipartReq.on("error",function(e){t.cleanup(e)}),t.multipartReq.send())},uploadPart:function(e,t){var r=this,i={Body:e,ContentLength:n.util.string.byteLength(e),PartNumber:t},s={ETag:null,PartNumber:t};r.completeInfo.push(s);var o=r.service.uploadPart(i);r.parts[t]=o,o._lastUploadedBytes=0,o._managedUpload=r,o.on("httpUploadProgress",r.progress),o.send(function(e,t){if(delete r.parts[i.PartNumber],r.activeParts--,!(e||t&&t.ETag)){var o="No access to ETag property on response.";n.util.isBrowser()&&(o+=" Check CORS configuration to expose ETag header."),e=n.util.error(new Error(o),{code:"ETagMissing",retryable:!1})}return e?r.cleanup(e):(s.ETag=t.ETag,r.doneParts++,void (r.isDoneChunking&&r.doneParts===r.numParts?r.finishMultiPart():r.fillQueue.call(r)))})},queueChunks:function(e,t){var n=this;n.multipartReq.on("success",function(){n.uploadPart(e,t)})},cleanup:function(e){var t=this;t.failed||("function"==typeof t.body.removeAllListeners&&"function"==typeof t.body.resume&&(t.body.removeAllListeners("readable"),t.body.removeAllListeners("end"),t.body.resume()),t.service.config.params.UploadId&&!t.leavePartsOnError&&t.service.abortMultipartUpload().send(),n.util.each(t.parts,function(e,t){t.removeAllListeners("complete"),t.abort()}),t.parts={},t.callback(e),t.failed=!0)},finishMultiPart:function(){var e=this,t={MultipartUpload:{Parts:e.completeInfo}};e.service.completeMultipartUpload(t,function(t,n){return t?e.cleanup(t):void e.callback(t,n)})},finishSinglePart:function(e,t){var r=this.request._managedUpload,i=this.request.httpRequest,s=n.util.urlFormat(i.endpoint);return e?r.callback(e):(t.Location=s.substr(0,s.length-1)+i.path,void r.callback(e,t))},progress:function(e){var t=this._managedUpload;"putObject"===this.operation?e.part=1:(t.totalUploadedBytes+=e.loaded-this._lastUploadedBytes,this._lastUploadedBytes=e.loaded,e={loaded:t.totalUploadedBytes,total:t.totalBytes,part:this.params.PartNumber}),t.emit("httpUploadProgress",[e])}}),n.util.mixin(n.S3.ManagedUpload,n.SequentialExecutor),t.exports=n.S3.ManagedUpload},{"../core":3}],34:[function(e,t){var n=e("./core");n.SequentialExecutor=n.util.inherit({constructor:function(){this._events={}},listeners:function(e){return this._events[e]?this._events[e].slice(0):[]},on:function(e,t){return this._events[e]?this._events[e].push(t):this._events[e]=[t],this},onAsync:function(e,t){return t._isAsync=!0,this.on(e,t)},removeListener:function(e,t){var n=this._events[e];if(n){for(var r=n.length,i=-1,s=0;r>s;++s)n[s]===t&&(i=s);i>-1&&n.splice(i,1)}return this},removeAllListeners:function(e){return e?delete this._events[e]:this._events={},this},emit:function(e,t,n){n||(n=function(){});var r=this.listeners(e),i=r.length;return this.callListeners(r,t,n),i>0},callListeners:function(e,t,n){function r(r){r?n.call(i,r):i.callListeners(e,t,n)}for(var i=this;e.length>0;){var s=e.shift();if(s._isAsync)return void s.apply(i,t.concat([r]));s.apply(i,t)}n.call(i)},addListeners:function(e){var t=this;return e._events&&(e=e._events),n.util.each(e,function(e,i){"function"==typeof i&&(i=[i]),n.util.arrayEach(i,function(n){t.on(e,n)})}),t},addNamedListener:function(e,t,n){return this[e]=n,this.addListener(t,n),this},addNamedAsyncListener:function(e,t,n){return n._isAsync=!0,this.addNamedListener(e,t,n)},addNamedListeners:function(e){var t=this;return e(function(){t.addNamedListener.apply(t,arguments)},function(){t.addNamedAsyncListener.apply(t,arguments)}),this}}),n.SequentialExecutor.prototype.addListener=n.SequentialExecutor.prototype.on,t.exports=n.SequentialExecutor},{"./core":3}],35:[function(e){var t=e("./core"),n=e("./model/api"),r=e("./region_config"),i=t.util.inherit;t.Service=i({constructor:function(e){if(!this.loadServiceClass)throw t.util.error(new Error,"Service must be constructed with `new' operator");var n=this.loadServiceClass(e||{});return n?new n(e):void this.initialize(e)},initialize:function(e){var n=t.config[this.serviceIdentifier];this.config=new t.Config(t.config),n&&this.config.update(n,!0),e&&this.config.update(e,!0),this.validateService(),this.config.endpoint||r(this),this.config.endpoint=this.endpointFromTemplate(this.config.endpoint),this.setEndpoint(this.config.endpoint)},validateService:function(){},loadServiceClass:function(e){var n=e;if(t.util.isEmpty(this.api)){if(n.apiConfig)return t.Service.defineServiceApi(this.constructor,n.apiConfig);if(this.constructor.services){n=new t.Config(t.config),n.update(e,!0);var r=n.apiVersions[this.constructor.serviceIdentifier];return r=r||n.apiVersion,this.getLatestServiceClass(r)}return null}return null},getLatestServiceClass:function(e){return e=this.getLatestServiceVersion(e),null===this.constructor.services[e]&&t.Service.defineServiceApi(this.constructor,e),this.constructor.services[e]},getLatestServiceVersion:function(e){if(!this.constructor.services||0===this.constructor.services.length)throw new Error("No services defined on "+this.constructor.serviceIdentifier);if(e?t.util.isType(e,Date)&&(e=t.util.date.iso8601(e).split("T")[0]):e="latest",Object.hasOwnProperty(this.constructor.services,e))return e;for(var n=Object.keys(this.constructor.services).sort(),r=null,i=n.length-1;i>=0;i--)if("*"!==n[i][n[i].length-1]&&(r=n[i]),n[i].substr(0,10)<=e)return r;throw new Error("Could not find "+this.constructor.serviceIdentifier+" API to satisfy version constraint `"+e+"'")},api:{},defaultRetryCount:3,makeRequest:function(e,n,r){if("function"==typeof n&&(r=n,n=null),n=n||{},this.config.params){var i=this.api.operations[e];i&&(n=t.util.copy(n),t.util.each(this.config.params,function(e,t){i.input.members[e]&&(void 0===n[e]||null===n[e])&&(n[e]=t)}))}var s=new t.Request(this,e,n);return this.addAllRequestListeners(s),r&&s.send(r),s},makeUnauthenticatedRequest:function(e,t,n){"function"==typeof t&&(n=t,t={});var r=this.makeRequest(e,t).toUnauthenticated();return n?r.send(n):r},waitFor:function(e,n,r){var i=new t.ResourceWaiter(this,e);return i.wait(n,r)},addAllRequestListeners:function(e){for(var n=[t.events,t.EventListeners.Core,this.serviceInterface(),t.EventListeners.CorePost],r=0;r<n.length;r++)n[r]&&e.addListeners(n[r]);this.config.paramValidation||e.removeListener("validate",t.EventListeners.Core.VALIDATE_PARAMETERS),this.config.logger&&e.addListeners(t.EventListeners.Logger),this.setupRequestListeners(e)},setupRequestListeners:function(){},getSignerClass:function(){var e;return e=this.config.signatureVersion?this.config.signatureVersion:this.api.signatureVersion,t.Signers.RequestSigner.getVersion(e)},serviceInterface:function(){switch(this.api.protocol){case"ec2":return t.EventListeners.Query;case"query":return t.EventListeners.Query;case"json":return t.EventListeners.Json;case"rest-json":return t.EventListeners.RestJson;case"rest-xml":return t.EventListeners.RestXml}if(this.api.protocol)throw new Error("Invalid service `protocol' "+this.api.protocol+" in API config")},successfulResponse:function(e){return e.httpResponse.statusCode<300},numRetries:function(){return void 0!==this.config.maxRetries?this.config.maxRetries:this.defaultRetryCount},retryDelays:function(){for(var e=this.numRetries(),t=[],n=0;e>n;++n)t[n]=30*Math.pow(2,n);return t},retryableError:function(e){return this.networkingError(e)?!0:this.expiredCredentialsError(e)?!0:this.throttledError(e)?!0:e.statusCode>=500?!0:!1},networkingError:function(e){return"NetworkingError"===e.code},expiredCredentialsError:function(e){return"ExpiredTokenException"===e.code},throttledError:function(e){switch(e.code){case"ProvisionedThroughputExceededException":case"Throttling":case"ThrottlingException":case"RequestLimitExceeded":case"RequestThrottled":return!0;default:return!1}},endpointFromTemplate:function(e){if("string"!=typeof e)return e;var t=e;return t=t.replace(/\{service\}/g,this.api.endpointPrefix),t=t.replace(/\{region\}/g,this.config.region),t=t.replace(/\{scheme\}/g,this.config.sslEnabled?"https":"http")},setEndpoint:function(e){this.endpoint=new t.Endpoint(e,this.config)},paginationConfig:function(e,n){var r=this.api.operations[e].paginator;if(!r){if(n){var i=new Error;throw t.util.error(i,"No pagination configuration for "+e)}return null}return r}}),t.util.update(t.Service,{defineMethods:function(e){t.util.each(e.prototype.api.operations,function(t){e.prototype[t]||(e.prototype[t]=function(e,n){return this.makeRequest(t,e,n)})})},defineService:function(e,n,r){t.Service._serviceMap[e]=!0,Array.isArray(n)||(r=n,n=[]);var s=i(t.Service,r||{});if("string"==typeof e){t.Service.addVersions(s,n);var o=s.serviceIdentifier||e;s.serviceIdentifier=o}else s.prototype.api=e,t.Service.defineMethods(s);return s},addVersions:function(e,t){Array.isArray(t)||(t=[t]),e.services=e.services||{};for(var n=0;n<t.length;n++)void 0===e.services[t[n]]&&(e.services[t[n]]=null);e.apiVersions=Object.keys(e.services).sort()},defineServiceApi:function(e,r,s){function o(e){u.prototype.api=e.isApi?e:new n(e)}var u=i(e,{serviceIdentifier:e.serviceIdentifier});if("string"==typeof r){if(s)o(s);else try{o(t.apiLoader(e.serviceIdentifier,r))}catch(a){throw t.util.error(a,{message:"Could not find API configuration "+e.serviceIdentifier+"-"+r})}e.services.hasOwnProperty(r)||(e.apiVersions=e.apiVersions.concat(r).sort()),e.services[r]=u}else o(r);return t.Service.defineMethods(u),u},hasService:function(e){return t.Service._serviceMap.hasOwnProperty(e)},_serviceMap:{}})},{"./core":3,"./model/api":15,"./region_config":28}],36:[function(e){var t=e("../core");t.util.update(t.CognitoIdentity.prototype,{getOpenIdToken:function(e,t){return this.makeUnauthenticatedRequest("getOpenIdToken",e,t)},getId:function(e,t){return this.makeUnauthenticatedRequest("getId",e,t)},getCredentialsForIdentity:function(e,t){return this.makeUnauthenticatedRequest("getCredentialsForIdentity",e,t)}})},{"../core":3}],37:[function(e){var t=e("../core");t.util.update(t.DynamoDB.prototype,{setupRequestListeners:function(e){e.service.config.dynamoDbCrc32&&e.addListener("extractData",this.checkCrc32)},checkCrc32:function(e){e.httpResponse.streaming||e.request.service.crc32IsValid(e)||(e.error=t.util.error(new Error,{code:"CRC32CheckFailed",message:"CRC32 integrity check failed",retryable:!0}))},crc32IsValid:function(e){var n=e.httpResponse.headers["x-amz-crc32"];return n?parseInt(n,10)===t.util.crypto.crc32(e.httpResponse.body):!0},defaultRetryCount:10,retryDelays:function(){for(var e=this.numRetries(),t=[],n=0;e>n;++n)t.push(0===n?0:50*Math.pow(2,n-1));return t}})},{"../core":3}],38:[function(e){var t=e("../core");e("../s3/managed_upload"),t.util.update(t.S3.prototype,{validateService:function(){if(this.config.region||(this.config.region="us-east-1"),!this.config.endpoint&&this.config.s3BucketEndpoint){var e="An endpoint must be provided when configuring `s3BucketEndpoint` to true.";throw t.util.error(new Error,{name:"InvalidEndpoint",message:e})}},setupRequestListeners:function(e){e.addListener("validate",this.validateScheme),e.addListener("validate",this.validateBucketEndpoint),e.addListener("build",this.addContentType),e.addListener("build",this.populateURI),e.addListener("build",this.computeContentMd5),e.addListener("build",this.computeSseCustomerKeyMd5),e.addListener("afterBuild",this.addExpect100Continue),e.removeListener("validate",t.EventListeners.Core.VALIDATE_REGION),e.addListener("extractError",this.extractError),e.addListener("extractData",this.extractData),e.addListener("extractData",t.util.hoistPayloadMember),e.addListener("beforePresign",this.prepareSignedUrl)},validateScheme:function(e){var n=e.params,r=e.httpRequest.endpoint.protocol,i=n.SSECustomerKey||n.CopySourceSSECustomerKey;if(i&&"https:"!==r){var s="Cannot send SSE keys over HTTP. Set 'sslEnabled'to 'true' in your configuration";throw t.util.error(new Error,{code:"ConfigError",message:s})}},validateBucketEndpoint:function(e){if(!e.params.Bucket&&e.service.config.s3BucketEndpoint){var n="Cannot send requests to root API with `s3BucketEndpoint` set.";throw t.util.error(new Error,{code:"ConfigError",message:n})}},populateURI:function(e){var t=e.httpRequest,n=e.params.Bucket;if(n&&!e.service.pathStyleBucketName(n)){if(!e.service.config.s3BucketEndpoint){t.endpoint.hostname=n+"."+t.endpoint.hostname;var r=t.endpoint.port;t.endpoint.host=80!==r&&443!==r?t.endpoint.hostname+":"+t.endpoint.port:t.endpoint.hostname}t.virtualHostedBucket=n,t.path=t.path.replace(new RegExp("/"+n),""),"/"!==t.path[0]&&(t.path="/"+t.path)}},addExpect100Continue:function(e){var n=e.httpRequest.headers["Content-Length"];t.util.isNode()&&n>=1048576&&(e.httpRequest.headers.Expect="100-continue")},addContentType:function(e){var n=e.httpRequest;if("GET"===n.method||"HEAD"===n.method)return void delete n.headers["Content-Type"];n.headers["Content-Type"]||(n.headers["Content-Type"]="application/octet-stream");var r=n.headers["Content-Type"];if(t.util.isBrowser())if("string"!=typeof n.body||r.match(/;\s*charset=/)){var i=function(e,t,n){return t+n.toUpperCase()};n.headers["Content-Type"]=r.replace(/(;\s*charset=)(.+)$/,i)}else{var s="; charset=UTF-8";n.headers["Content-Type"]+=s}},computableChecksumOperations:{putBucketCors:!0,putBucketLifecycle:!0,putBucketTagging:!0,deleteObjects:!0},willComputeChecksums:function(e){if(this.computableChecksumOperations[e.operation])return!0;if(!this.config.computeChecksums)return!1;if(!t.util.Buffer.isBuffer(e.httpRequest.body)&&"string"!=typeof e.httpRequest.body)return!1;var n=e.service.api.operations[e.operation].input.members;return e.service.getSignerClass(e)===t.Signers.V4&&n.ContentMD5&&!n.ContentMD5.required?!1:n.ContentMD5&&!e.params.ContentMD5?!0:void 0},computeContentMd5:function(e){if(e.service.willComputeChecksums(e)){var n=t.util.crypto.md5(e.httpRequest.body,"base64");e.httpRequest.headers["Content-MD5"]=n}},computeSseCustomerKeyMd5:function(e){var n=["x-amz-server-side-encryption-customer-key","x-amz-copy-source-server-side-encryption-customer-key"];t.util.arrayEach(n,function(n){if(e.httpRequest.headers[n]){var r=e.httpRequest.headers[n],i=n+"-MD5";if(e.httpRequest.headers[n]=t.util.base64.encode(r),!e.httpRequest.headers[i]){var s=t.util.crypto.md5(r,"base64");e.httpRequest.headers[i]=s}}})},pathStyleBucketName:function(e){return this.config.s3ForcePathStyle?!0:this.config.s3BucketEndpoint?!1:this.dnsCompatibleBucketName(e)?this.config.sslEnabled&&e.match(/\./)?!0:!1:!0},dnsCompatibleBucketName:function(e){var t=e,n=new RegExp(/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/),r=new RegExp(/(\d+\.){3}\d+/),i=new RegExp(/\.\./);return!t.match(n)||t.match(r)||t.match(i)?!1:!0},successfulResponse:function(e){var t=e.request,n=e.httpResponse;return"completeMultipartUpload"===t.operation&&n.body.toString().match("<Error>")?!1:n.statusCode<300},retryableError:function(e,n){if("completeMultipartUpload"===n.operation&&200===e.statusCode)return!0;if(e&&"RequestTimeout"===e.code)return!0;var r=t.Service.prototype.retryableError;return r.call(this,e,n)},extractData:function(e){var t=e.request;if("getBucketLocation"===t.operation){var n=e.httpResponse.body.toString().match(/>(.+)<\/Location/);n&&(delete e.data._,e.data.LocationConstraint=n[1])}},extractError:function(e){var n={304:"NotModified",403:"Forbidden",400:"BadRequest",404:"NotFound"},r=e.httpResponse.statusCode,i=e.httpResponse.body||"";if(n[r]&&0===i.length)e.error=t.util.error(new Error,{code:n[e.httpResponse.statusCode],message:null});else{var s=(new t.XML.Parser).parse(i.toString());e.error=t.util.error(new Error,{code:s.Code||r,message:s.Message||null})}},getSignedUrl:function(e,n,r){n=t.util.copy(n||{});var i=n.Expires||900;delete n.Expires;var s=this.makeRequest(e,n);return s.presign(i,r)},prepareSignedUrl:function(e){e.addListener("validate",e.service.noPresignedContentLength),e.removeListener("build",e.service.addContentType),e.params.Body||(e.removeListener("build",e.service.computeContentMd5),e.removeListener("afterBuild",t.EventListeners.Core.COMPUTE_SHA256))},noPresignedContentLength:function(e){if(void 0!==e.params.ContentLength)throw t.util.error(new Error,{code:"UnexpectedParameter",message:"ContentLength is not supported in pre-signed URLs."})},createBucket:function(e,t){e||(e={});var n=this.endpoint.hostname;return n===this.api.globalEndpoint||e.CreateBucketConfiguration||(e.CreateBucketConfiguration={LocationConstraint:this.config.region}),this.makeRequest("createBucket",e,t)},upload:function(e,n,r){"function"==typeof n&&void 0===r&&(r=n,n=null),n=n||{},n=t.util.merge(n||{},{service:this,params:e});var i=new t.S3.ManagedUpload(n);return"function"==typeof r&&i.send(r),i}})},{"../core":3,"../s3/managed_upload":33}],39:[function(e){var t=e("../core");t.util.update(t.SQS.prototype,{setupRequestListeners:function(e){e.addListener("build",this.buildEndpoint),e.service.config.computeChecksums&&("sendMessage"===e.operation?e.addListener("extractData",this.verifySendMessageChecksum):"sendMessageBatch"===e.operation?e.addListener("extractData",this.verifySendMessageBatchChecksum):"receiveMessage"===e.operation&&e.addListener("extractData",this.verifyReceiveMessageChecksum))},verifySendMessageChecksum:function(e){if(e.data){var t=e.data.MD5OfMessageBody,n=this.params.MessageBody,r=this.service.calculateChecksum(n);if(r!==t){var i='Got "'+e.data.MD5OfMessageBody+'", expecting "'+r+'".';this.service.throwInvalidChecksumError(e,[e.data.MessageId],i)}}},verifySendMessageBatchChecksum:function(e){if(e.data){var n=this.service,r={},i=[],s=[];t.util.arrayEach(e.data.Successful,function(e){r[e.Id]=e}),t.util.arrayEach(this.params.Entries,function(e){if(r[e.Id]){var t=r[e.Id].MD5OfMessageBody,u=e.MessageBody;n.isChecksumValid(t,u)||(i.push(e.Id),s.push(r[e.Id].MessageId))}}),i.length>0&&n.throwInvalidChecksumError(e,s,"Invalid messages: "+i.join(", "))}},verifyReceiveMessageChecksum:function(e){if(e.data){var n=this.service,r=[];t.util.arrayEach(e.data.Messages,function(e){var t=e.MD5OfBody,s=e.Body;n.isChecksumValid(t,s)||r.push(e.MessageId)}),r.length>0&&n.throwInvalidChecksumError(e,r,"Invalid messages: "+r.join(", "))}},throwInvalidChecksumError:function(e,n,r){e.error=t.util.error(new Error,{retryable:!0,code:"InvalidChecksum",messageIds:n,message:e.request.operation+" returned an invalid MD5 response. "+r})},isChecksumValid:function(e,t){return this.calculateChecksum(t)===e},calculateChecksum:function(e){return t.util.crypto.md5(e,"hex")},buildEndpoint:function(e){var n=e.httpRequest.params.QueueUrl;if(n){e.httpRequest.endpoint=new t.Endpoint(n);var r=e.httpRequest.endpoint.host.match(/^sqs\.(.+?)\./);r&&(e.httpRequest.region=r[1])}}})},{"../core":3}],40:[function(e){var t=e("../core");t.util.update(t.STS.prototype,{credentialsFrom:function(e,n){return e?(n||(n=new t.TemporaryCredentials),n.expired=!1,n.accessKeyId=e.Credentials.AccessKeyId,n.secretAccessKey=e.Credentials.SecretAccessKey,n.sessionToken=e.Credentials.SessionToken,n.expireTime=e.Credentials.Expiration,n):null},assumeRoleWithWebIdentity:function(e,t){return this.makeUnauthenticatedRequest("assumeRoleWithWebIdentity",e,t)},assumeRoleWithSAML:function(e,t){return this.makeUnauthenticatedRequest("assumeRoleWithSAML",e,t)}})},{"../core":3}],41:[function(e,t){function n(e){var t=e.httpRequest.headers[o];if(delete e.httpRequest.headers["User-Agent"],delete e.httpRequest.headers["X-Amz-User-Agent"],e.service.getSignerClass()===i.Signers.V4){if(t>604800){var n="Presigning does not support expiry time greater than a week with SigV4 signing.";throw i.util.error(new Error,{code:"InvalidExpiryTime",message:n,retryable:!1})}e.httpRequest.headers[o]=t}else{if(e.service.getSignerClass()!==i.Signers.S3)throw i.util.error(new Error,{message:"Presigning only supports S3 or SigV4 signing.",code:"UnsupportedSigner",retryable:!1});e.httpRequest.headers[o]=parseInt(i.util.date.unixTimestamp()+t,10).toString()}}function r(e){var t=e.httpRequest.endpoint,n=i.util.urlParse(e.httpRequest.path),r={};n.search&&(r=i.util.queryStringParse(n.search.substr(1))),i.util.each(e.httpRequest.headers,function(e,t){e===o&&(e="Expires"),r[e]=t}),delete e.httpRequest.headers[o];var s=r.Authorization.split(" ");if("AWS"===s[0])s=s[1].split(":"),r.AWSAccessKeyId=s[0],r.Signature=s[1];else if("AWS4-HMAC-SHA256"===s[0]){s.shift();var u=s.join(" "),f=u.match(/Signature=(.*?)(?:,|\s|\r?\n|$)/)[1];r["X-Amz-Signature"]=f,delete r.Expires}delete r.Authorization,delete r.Host,t.pathname=n.pathname,t.search=i.util.queryParamsToString(r)}var i=e("../core"),s=i.util.inherit,o="presigned-expires";i.Signers.Presign=s({sign:function(e,t,s){if(e.httpRequest.headers[o]=t||3600,e.on("build",n),e.on("sign",r),e.removeListener("afterBuild",i.EventListeners.Core.SET_CONTENT_LENGTH),e.removeListener("afterBuild",i.EventListeners.Core.COMPUTE_SHA256),e.emit("beforePresign",[e]),!s){if(e.build(),e.response.error)throw e.response.error;return i.util.urlFormat(e.httpRequest.endpoint)}e.build(function(){this.response.error?s(this.response.error):s(null,i.util.urlFormat(e.httpRequest.endpoint))})}}),t.exports=i.Signers.Presign},{"../core":3}],42:[function(e){var t=e("../core"),n=t.util.inherit;t.Signers.RequestSigner=n({constructor:function(e){this.request=e}}),t.Signers.RequestSigner.getVersion=function(e){switch(e){case"v2":return t.Signers.V2;case"v3":return t.Signers.V3;case"v4":return t.Signers.V4;case"s3":return t.Signers.S3;case"v3https":return t.Signers.V3Https}throw new Error("Unknown signing version "+e)},e("./v2"),e("./v3"),e("./v3https"),e("./v4"),e("./s3"),e("./presign")},{"../core":3,"./presign":41,"./s3":43,"./v2":44,"./v3":45,"./v3https":46,"./v4":47}],43:[function(e,t){var n=e("../core"),r=n.util.inherit;n.Signers.S3=r(n.Signers.RequestSigner,{subResources:{acl:1,cors:1,lifecycle:1,"delete":1,location:1,logging:1,notification:1,partNumber:1,policy:1,requestPayment:1,restore:1,tagging:1,torrent:1,uploadId:1,uploads:1,versionId:1,versioning:1,versions:1,website:1},responseHeaders:{"response-content-type":1,"response-content-language":1,"response-expires":1,"response-cache-control":1,"response-content-disposition":1,"response-content-encoding":1},addAuthorization:function(e,t){this.request.headers["presigned-expires"]||(this.request.headers["X-Amz-Date"]=n.util.date.rfc822(t)),e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken);var r=this.sign(e.secretAccessKey,this.stringToSign()),i="AWS "+e.accessKeyId+":"+r;this.request.headers.Authorization=i},stringToSign:function(){var e=this.request,t=[];t.push(e.method),t.push(e.headers["Content-MD5"]||""),t.push(e.headers["Content-Type"]||""),t.push(e.headers["presigned-expires"]||"");var n=this.canonicalizedAmzHeaders();return n&&t.push(n),t.push(this.canonicalizedResource()),t.join("\n")},canonicalizedAmzHeaders:function(){var e=[];n.util.each(this.request.headers,function(t){t.match(/^x-amz-/i)&&e.push(t)}),e.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:1});var t=[];return n.util.arrayEach.call(this,e,function(e){t.push(e.toLowerCase()+":"+String(this.request.headers[e]))}),t.join("\n")},canonicalizedResource:function(){var e=this.request,t=e.path.split("?"),r=t[0],i=t[1],s="";if(e.virtualHostedBucket&&(s+="/"+e.virtualHostedBucket),s+=r,i){var o=[];n.util.arrayEach.call(this,i.split("&"),function(e){var t=e.split("=")[0],n=e.split("=")[1];if(this.subResources[t]||this.responseHeaders[t]){var r={name:t};void 0!==n&&(r.value=this.subResources[t]?n:decodeURIComponent(n)),o.push(r)}}),o.sort(function(e,t){return e.name<t.name?-1:1}),o.length&&(i=[],n.util.arrayEach(o,function(e){i.push(void 0===e.value?e.name:e.name+"="+e.value)}),s+="?"+i.join("&"))}return s},sign:function(e,t){return n.util.crypto.hmac(e,t,"base64","sha1")}}),t.exports=n.Signers.S3},{"../core":3}],44:[function(e,t){var n=e("../core"),r=n.util.inherit;n.Signers.V2=r(n.Signers.RequestSigner,{addAuthorization:function(e,t){t||(t=n.util.date.getDate());var r=this.request;r.params.Timestamp=n.util.date.iso8601(t),r.params.SignatureVersion="2",r.params.SignatureMethod="HmacSHA256",r.params.AWSAccessKeyId=e.accessKeyId,e.sessionToken&&(r.params.SecurityToken=e.sessionToken),delete r.params.Signature,r.params.Signature=this.signature(e),r.body=n.util.queryParamsToString(r.params),r.headers["Content-Length"]=r.body.length},signature:function(e){return n.util.crypto.hmac(e.secretAccessKey,this.stringToSign(),"base64")},stringToSign:function(){var e=[];return e.push(this.request.method),e.push(this.request.endpoint.host.toLowerCase()),e.push(this.request.pathname()),e.push(n.util.queryParamsToString(this.request.params)),e.join("\n")}}),t.exports=n.Signers.V2},{"../core":3}],45:[function(e,t){var n=e("../core"),r=n.util.inherit;n.Signers.V3=r(n.Signers.RequestSigner,{addAuthorization:function(e,t){var r=n.util.date.rfc822(t);this.request.headers["X-Amz-Date"]=r,e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken),this.request.headers["X-Amzn-Authorization"]=this.authorization(e,r)},authorization:function(e){return"AWS3 AWSAccessKeyId="+e.accessKeyId+",Algorithm=HmacSHA256,SignedHeaders="+this.signedHeaders()+",Signature="+this.signature(e)},signedHeaders:function(){var e=[];return n.util.arrayEach(this.headersToSign(),function(t){e.push(t.toLowerCase())}),e.sort().join(";")},canonicalHeaders:function(){var e=this.request.headers,t=[];return n.util.arrayEach(this.headersToSign(),function(n){t.push(n.toLowerCase().trim()+":"+String(e[n]).trim())}),t.sort().join("\n")+"\n"},headersToSign:function(){var e=[];return n.util.each(this.request.headers,function(t){("Host"===t||"Content-Encoding"===t||t.match(/^X-Amz/i))&&e.push(t)}),e},signature:function(e){return n.util.crypto.hmac(e.secretAccessKey,this.stringToSign(),"base64")},stringToSign:function(){var e=[];return e.push(this.request.method),e.push("/"),e.push(""),e.push(this.canonicalHeaders()),e.push(this.request.body),n.util.crypto.sha256(e.join("\n"))}}),t.exports=n.Signers.V3},{"../core":3}],46:[function(e,t){var n=e("../core"),r=n.util.inherit;e("./v3"),n.Signers.V3Https=r(n.Signers.V3,{authorization:function(e){return"AWS3-HTTPS AWSAccessKeyId="+e.accessKeyId+",Algorithm=HmacSHA256,Signature="+this.signature(e)},stringToSign:function(){return this.request.headers["X-Amz-Date"]}}),t.exports=n.Signers.V3Https},{"../core":3,"./v3":45}],47:[function(e,t){var n=e("../core"),r=n.util.inherit,i={},s="presigned-expires";n.Signers.V4=r(n.Signers.RequestSigner,{constructor:function(e,t){n.Signers.RequestSigner.call(this,e),this.serviceName=t},algorithm:"AWS4-HMAC-SHA256",addAuthorization:function(e,t){var r=n.util.date.iso8601(t).replace(/[:\-]|\.\d{3}/g,"");this.isPresigned()?this.updateForPresigned(e,r):this.addHeaders(e,r),this.request.headers.Authorization=this.authorization(e,r)},addHeaders:function(e,t){this.request.headers["X-Amz-Date"]=t,e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken)},updateForPresigned:function(e,t){var r=this.credentialString(t),i={"X-Amz-Date":t,"X-Amz-Algorithm":this.algorithm,"X-Amz-Credential":e.accessKeyId+"/"+r,"X-Amz-Expires":this.request.headers[s],"X-Amz-SignedHeaders":this.signedHeaders()};e.sessionToken&&(i["X-Amz-Security-Token"]=e.sessionToken),this.request.headers["Content-Type"]&&(i["Content-Type"]=this.request.headers["Content-Type"]),n.util.each.call(this,this.request.headers,function(e,t){e!==s&&this.isSignableHeader(e)&&0===e.toLowerCase().indexOf("x-amz-")&&(i[e]=t)});var u=this.request.path.indexOf("?")>=0?"&":"?";this.request.path+=u+n.util.queryParamsToString(i)},authorization:function(e,t){var n=[],r=this.credentialString(t);return n.push(this.algorithm+" Credential="+e.accessKeyId+"/"+r),n.push("SignedHeaders="+this.signedHeaders()),n.push("Signature="+this.signature(e,t)),n.join(", ")},signature:function(e,t){var r=i[this.serviceName],s=t.substr(0,8);if(!r||r.akid!==e.accessKeyId||r.region!==this.request.region||r.date!==s){var o=e.secretAccessKey,u=n.util.crypto.hmac("AWS4"+o,s,"buffer"),a=n.util.crypto.hmac(u,this.request.region,"buffer"),f=n.util.crypto.hmac(a,this.serviceName,"buffer"),l=n.util.crypto.hmac(f,"aws4_request","buffer");i[this.serviceName]={region:this.request.region,date:s,key:l,akid:e.accessKeyId}}var c=i[this.serviceName].key;return n.util.crypto.hmac(c,this.stringToSign(t),"hex")},stringToSign:function(e){var t=[];return t.push("AWS4-HMAC-SHA256"),t.push(e),t.push(this.credentialString(e)),t.push(this.hexEncodedHash(this.canonicalString())),t.join("\n")},canonicalString:function(){var e=[],t=this.request.pathname();return"s3"!==this.serviceName&&(t=n.util.uriEscapePath(t)),e.push(this.request.method),e.push(t),e.push(this.request.search()),e.push(this.canonicalHeaders()+"\n"),e.push(this.signedHeaders()),e.push(this.hexEncodedBodyHash()),e.join("\n")},canonicalHeaders:function(){var e=[];n.util.each.call(this,this.request.headers,function(t,n){e.push([t,n])}),e.sort(function(e,t){return e[0].toLowerCase()<t[0].toLowerCase()?-1:1});var t=[];return n.util.arrayEach.call(this,e,function(e){var n=e[0].toLowerCase();this.isSignableHeader(n)&&t.push(n+":"+this.canonicalHeaderValues(e[1].toString()))}),t.join("\n")},canonicalHeaderValues:function(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},signedHeaders:function(){var e=[];return n.util.each.call(this,this.request.headers,function(t){t=t.toLowerCase(),this.isSignableHeader(t)&&e.push(t)}),e.sort().join(";")},credentialString:function(e){var t=[];return t.push(e.substr(0,8)),t.push(this.request.region),t.push(this.serviceName),t.push("aws4_request"),t.join("/")},hexEncodedHash:function(e){return n.util.crypto.sha256(e,"hex")},hexEncodedBodyHash:function(){return this.isPresigned()&&"s3"===this.serviceName?"UNSIGNED-PAYLOAD":this.request.headers["X-Amz-Content-Sha256"]?this.request.headers["X-Amz-Content-Sha256"]:this.hexEncodedHash(this.request.body||"")},unsignableHeaders:["authorization","content-type","content-length","user-agent",s],isSignableHeader:function(e){return 0===e.toLowerCase().indexOf("x-amz-")?!0:this.unsignableHeaders.indexOf(e)<0},isPresigned:function(){return this.request.headers[s]?!0:!1}}),t.exports=n.Signers.V4},{"../core":3}],48:[function(e,t){function n(e,t){this.currentState=t||null,this.states=e||{}}n.prototype.runTo=function(e,t,n,r){"function"==typeof e&&(r=n,n=t,t=e,e=null);var i=this,s=i.states[i.currentState];s.fn.call(n||i,r,function(r){if(r){if(!s.fail)return t?t.call(n,r):null;i.currentState=s.fail}else{if(!s.accept)return t?t.call(n):null;i.currentState=s.accept}return i.currentState===e?t?t.call(n,r):null:void i.runTo(e,t,n,r)})},n.prototype.addState=function(e,t,n,r){return"function"==typeof t?(r=t,t=null,n=null):"function"==typeof n&&(r=n,n=null),this.currentState||(this.currentState=e),this.states[e]={accept:t,fail:n,fn:r},this},t.exports=n},{}],49:[function(e,t){(function(n){var r,i=e("crypto"),s=e("buffer").Buffer,o={engine:function(){return o.isBrowser()&&"undefined"!=typeof navigator?navigator.userAgent:n.platform+"/"+n.version},userAgent:function(){var t=o.isBrowser()?"js":"nodejs",n="aws-sdk-"+t+"/"+e("./core").VERSION;return"nodejs"===t&&(n+=" "+o.engine()),n},isBrowser:function(){return n&&n.browser},isNode:function(){return!o.isBrowser()},nodeRequire:function(t){return o.isNode()?e(t):void 0},multiRequire:function(t,n){return e(o.isNode()?t:n)},uriEscape:function(e){var t=encodeURIComponent(e);return t=t.replace(/[^A-Za-z0-9_.~\-%]+/g,escape),t=t.replace(/[*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},uriEscapePath:function(e){var t=[];return o.arrayEach(e.split("/"),function(e){t.push(o.uriEscape(e))}),t.join("/")},urlParse:function(t){return e("url").parse(t)},urlFormat:function(t){return e("url").format(t)},queryStringParse:function(t){return e("querystring").parse(t)},queryParamsToString:function(e){var t=[],n=o.uriEscape,r=Object.keys(e).sort();return o.arrayEach(r,function(r){var i=e[r],s=n(r),u=s+"=";if(Array.isArray(i)){var f=[];o.arrayEach(i,function(e){f.push(n(e))}),u=s+"="+f.sort().join("&"+s+"=")}else void 0!==i&&null!==i&&(u=s+"="+n(i));t.push(u)}),t.join("&")},readFileSync:function(e){return"undefined"!=typeof window?null:o.nodeRequire("fs").readFileSync(e,"utf-8")},base64:{encode:function(e){return(new s(e)).toString("base64")},decode:function(e){return new s(e,"base64")}},Buffer:s,buffer:{toStream:function(e){o.Buffer.isBuffer(e)||(e=new o.Buffer(e));var t=new(o.nodeRequire("stream").Readable),n=0;return t._read=function(r){if(n>=e.length)return t.push(null);var i=n+r;i>e.length&&(i=e.length),t.push(e.slice(n,i)),n=i},t},concat:function(e){var t,n=0,r=0,i=null;for(t=0;t<e.length;t++)n+=e[t].length;for(i=new s(n),t=0;t<e.length;t++)e[t].copy(i,r),r+=e[t].length;return i}},string:{byteLength:function(e){if(null===e||void 0===e)return 0;if("string"==typeof e&&(e=new s(e)),"number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"==typeof e.path)return o.nodeRequire("fs").lstatSync(e.path).size;throw o.error(new Error("Cannot determine length of "+e),{object:e})},upperFirst:function(e){return e[0].toUpperCase()+e.substr(1)},lowerFirst:function(e){return e[0].toLowerCase()+e.substr(1)}},ini:{parse:function(e){var t,n={};return o.arrayEach(e.split(/\r?\n/),function(e){e=e.split(/(^|\s);/)[0];var r=e.match(/^\s*\[([^\[\]]+)\]\s*$/);if(r)t=r[1];else if(t){var i=e.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/);i&&(n[t]=n[t]||{},n[t][i[1]]=i[2])}}),n}},fn:{noop:function(){},makeAsync:function(e,t){return t&&t<=e.length?e:function(){var t=Array.prototype.slice.call(arguments,0),n=t.pop(),r=e.apply(null,t);n(r)}}},jamespath:{query:function(e,t){if(!t)return[];var n=[],r=e.split(/\s+\|\|\s+/);return o.arrayEach.call(this,r,function(e){var r=[t],i=e.split(".");return o.arrayEach.call(this,i,function(e){var t=e.match("^(.+?)(?:\\[(-?\\d+|\\*|)\\])?$"),n=[];return o.arrayEach.call(this,r,function(e){"*"===t[1]?o.arrayEach.call(this,e,function(e){n.push(e)}):e.hasOwnProperty(t[1])&&n.push(e[t[1]])}),r=n,void 0!==t[2]&&(n=[],o.arrayEach.call(this,r,function(e){if(Array.isArray(e))if("*"===t[2]||""===t[2])n=n.concat(e);else{var r=parseInt(t[2],10);0>r&&(r=e.length+r),n.push(e[r])}}),r=n),0===r.length?o.abort:void 0}),r.length>0?(n=r,o.abort):void 0}),n},find:function(e,t){return o.jamespath.query(e,t)[0]}},date:{getDate:function(){return r||(r=e("./core")),r.config.systemClockOffset?new Date((new Date).getTime()+r.config.systemClockOffset):new Date},iso8601:function(e){return void 0===e&&(e=o.date.getDate()),e.toISOString()},rfc822:function(e){return void 0===e&&(e=o.date.getDate()),e.toUTCString()},unixTimestamp:function(e){return void 0===e&&(e=o.date.getDate()),e.getTime()/1e3},from:function(e){return new Date("number"==typeof e?1e3*e:e)},format:function(e,t){return t||(t="iso8601"),o.date[t](o.date.from(e))},parseTimestamp:function(e){if("number"==typeof e)return new Date(1e3*e);if(e.match(/^\d+$/))return new Date(1e3*e);if(e.match(/^\d{4}/))return new Date(e);if(e.match(/^\w{3},/))return new Date(e);throw o.error(new Error("unhandled timestamp format: "+e),{code:"TimestampParserError"})}},crypto:{crc32Table:[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],crc32:function(e){var t=o.crypto.crc32Table,n=-1;"string"==typeof e&&(e=new s(e));for(var r=0;r<e.length;r++){var i=e.readUInt8(r);n=n>>>8^t[255&(n^i)]}return(-1^n)>>>0},hmac:function(e,t,n,r){return n||(n="binary"),"buffer"===n&&(n=void 0),r||(r="sha256"),"string"==typeof t&&(t=new s(t)),i.createHmac(r,e).update(t).digest(n)},md5:function(e,t,n){return o.crypto.hash("md5",e,t,n)},sha256:function(e,t,n){return o.crypto.hash("sha256",e,t,n)},hash:function(e,t,n,r){var i=o.crypto.createHash(e);n||(n="binary"),"buffer"===n&&(n=void 0),"string"==typeof t&&(t=new s(t));var u=o.arraySliceFn(t),f=s.isBuffer(t);if(r&&"object"==typeof t&&"function"==typeof t.on&&!f)t.on("data",function(e){i.update(e)}),t.on("error",function(e){r(e)}),t.on("end",function(){r(null,i.digest(n))});else{if(!r||!u||f||"undefined"==typeof FileReader){o.isBrowser()&&"object"==typeof t&&!f&&(t=new s(new Uint8Array(t)));var l=i.update(t).digest(n);return r&&r(null,l),l}var c=0,h=524288,p=new FileReader;p.onerror=function(){r(new Error("Failed to read data."))},p.onload=function(){var e=new s(new Uint8Array(p.result));i.update(e),c+=e.length,p._continueReading()},p._continueReading=function(){if(c>=t.size)return void r(null,i.digest(n));var e=c+h;e>t.size&&(e=t.size),p.readAsArrayBuffer(u.call(t,c,e))},p._continueReading()}},toHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push(("0"+e.charCodeAt(n).toString(16)).substr(-2,2));return t.join("")},createHash:function(e){return i.createHash(e)}},abort:{},each:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=t.call(this,n,e[n]);if(r===o.abort)break}},arrayEach:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=t.call(this,e[n],parseInt(n,10));if(r===o.abort)break}},update:function(e,t){return o.each(t,function(t,n){e[t]=n}),e},merge:function(e,t){return o.update(o.copy(e),t)},copy:function(e){if(null===e||void 0===e)return e;var t={};for(var n in e)t[n]=e[n];return t},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},arraySliceFn:function(e){var t=e.slice||e.webkitSlice||e.mozSlice;return"function"==typeof t?t:null},isType:function(e,t){return"function"==typeof t&&(t=o.typeName(t)),Object.prototype.toString.call(e)==="[object "+t+"]"},typeName:function(e){if(e.hasOwnProperty("name"))return e.name;var t=e.toString(),n=t.match(/^\s*function (.+)\(/);return n?n[1]:t},error:function(e,t){var n=null;return"string"==typeof e.message&&""!==e.message&&("string"==typeof t||t&&t.message)&&(n=o.copy(e),n.message=e.message),e.message=e.message||null,"string"==typeof t?e.message=t:o.update(e,t),"function"==typeof Object.defineProperty&&(Object.defineProperty(e,"name",{writable:!0,enumerable:!1}),Object.defineProperty(e,"message",{enumerable:!0})),e.name=e.name||e.code||"Error",e.time=new Date,n&&(e.originalError=n),e},inherit:function(e,t){var n=null;if(void 0===t)t=e,e=Object,n={};else{var r=function(){};r.prototype=e.prototype,n=new r}return t.constructor===Object&&(t.constructor=function(){return e!==Object?e.apply(this,arguments):void 0}),t.constructor.prototype=n,o.update(t.constructor.prototype,t),t.constructor.__super__=e,t.constructor},mixin:function(){for(var e=arguments[0],t=1;t<arguments.length;t++)for(var n in arguments[t].prototype){var r=arguments[t].prototype[n];"constructor"!==n&&(e.prototype[n]=r)}return e},hideProperties:function(e,t){"function"==typeof Object.defineProperty&&o.arrayEach(t,function(t){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0})})},property:function(e,t,n,r,i){var s={configurable:!0,enumerable:void 0!==r?r:!0};"function"!=typeof n||i?(s.value=n,s.writable=!0):s.get=n,Object.defineProperty(e,t,s)},memoizedProperty:function(e,t,n,r){var i=null;o.property(e,t,function(){return null===i&&(i=n()),i},r)},hoistPayloadMember:function(e){var t=e.request,n=t.operation,i=t.service.api.operations[n].output;if(i.payload){var s=i.members[i.payload],o=e.data[i.payload];"structure"===s.type&&r.util.each(o,function(t,n){r.util.property(e.data,t,n,!1)})}},computeSha256:function(e,t){if(r.util.isNode()){var n=r.util.nodeRequire("stream").Stream,i=r.util.nodeRequire("fs");if(e instanceof n){if("string"!=typeof e.path)return t(new Error("Non-file stream objects are not supported with SigV4"));e=i.createReadStream(e.path)}}r.util.crypto.sha256(e,"hex",function(e,n){e?t(e):t(null,n)})}};t.exports=o}).call(this,e("FWaASH"))},{"./core":3,FWaASH:63,buffer:52,crypto:56,querystring:67,url:68}],50:[function(e,t){function n(){}function r(e,t){switch(t||(t={}),t.type){case"structure":return i(e,t);case"map":return s(e,t);case"list":return o(e,t);case void 0:case null:return a(e);default:return u(e,t)}}function i(e,t){var n={};return null===e?n:(f.each(t.members,function(t,i){if(i.isXmlAttribute){if(e.attributes.hasOwnProperty(i.name)){var s=e.attributes[i.name].value;n[t]=r({textContent:s},i)}}else{var o=i.flattened?e:e.getElementsByTagName(i.name)[0];o?n[t]=r(o,i):i.flattened||"list"!==i.type||(n[t]=i.defaultValue)}}),n)}function s(e,t){for(var n={},i=t.key.name||"key",s=t.value.name||"value",o=t.flattened?t.name:"entry",u=e.firstElementChild;u;){if(u.nodeName===o){var a=u.getElementsByTagName(i)[0].textContent,f=u.getElementsByTagName(s)[0];n[a]=r(f,t.value)}u=u.nextElementSibling}return n}function o(e,t){for(var n=[],i=t.flattened?t.name:t.member.name||"member",s=e.firstElementChild;s;)s.nodeName===i&&n.push(r(s,t.member)),s=s.nextElementSibling;return n}function u(e,t){if(e.getAttribute){var n=e.getAttribute("encoding");"base64"===n&&(t=new l.create({type:n}))}var r=e.textContent;return""===r&&(r=null),"function"==typeof t.toType?t.toType(r):r}function a(e){if(void 0===e||null===e)return"";if(!e.firstElementChild)return null===e.parentNode.parentNode?{}:0===e.childNodes.length?"":e.textContent;for(var t={type:"structure",members:{}},n=e.firstElementChild;n;){var r=n.nodeName;t.members.hasOwnProperty(r)?t.members[r].type="list":t.members[r]={name:r},n=n.nextElementSibling}return i(e,t)}var f=e("../util"),l=e("../model/shape");n.prototype.parse=function(e,t){if(""===e.replace(/^\s+/,""))return{};var n,i;try{if(window.DOMParser){try{var s=new DOMParser;n=s.parseFromString(e,"text/xml")}catch(o){throw f.error(new Error("Parse error in document"),{originalError:o})}if(null===n.documentElement)throw new Error("Cannot parse empty document.");var u=n.getElementsByTagName("parsererror")[0];if(u&&(u.parentNode===n||"body"===u.parentNode.nodeName))throw new Error(u.getElementsByTagName("div")[0].textContent)}else{if(!window.ActiveXObject)throw new Error("Cannot load XML parser");if(n=new window.ActiveXObject("Microsoft.XMLDOM"),n.async=!1,!n.loadXML(e))throw new Error("Parse error in document")}}catch(a){i=a}if(n&&n.documentElement&&!i){var l=r(n.documentElement,t),h=n.getElementsByTagName("ResponseMetadata")[0];return h&&(l.ResponseMetadata=r(h,{})),l}if(i)throw f.error(i||new Error,{code:"XMLParserError"});return{}},t.exports=n},{"../model/shape":20,"../util":49}],51:[function(e,t){function n(){}function r(e,t,n){switch(n.type){case"structure":return i(e,t,n);case"map":return s(e,t,n);case"list":return o(e,t,n);default:return u(e,t,n)}}function i(e,t,n){f.arrayEach(n.memberNames,function(i){var s=n.members[i];if("body"===s.location){var o=t[i],u=s.name;if(void 0!==o&&null!==o)if(s.isXmlAttribute)e.att(u,o);else if(s.flattened)r(e,o,s);else{var f=e.ele(u);a(f,s),r(f,o,s)}}})}function s(e,t,n){var i=n.key.name||"key",s=n.value.name||"value";f.each(t,function(t,o){var u=e.ele(n.flattened?n.name:"entry");r(u.ele(i),t,n.key),r(u.ele(s),o,n.value)})}function o(e,t,n){n.flattened?f.arrayEach(t,function(t){var i=n.member.name||n.name,s=e.ele(i);r(s,t,n.member)}):f.arrayEach(t,function(t){var i=n.member.name||"member",s=e.ele(i);r(s,t,n.member)})}function u(e,t,n){e.txt(n.toWireFormat(t))}function a(e,t){var n,r="xmlns";t.xmlNamespaceUri?(n=t.xmlNamespaceUri,t.xmlNamespacePrefix&&(r+=":"+t.xmlNamespacePrefix)):e.isRoot&&t.api.xmlNamespaceUri&&(n=t.api.xmlNamespaceUri),n&&e.att(r,n)}var f=e("../util"),l=e("xmlbuilder");n.prototype.toXML=function(e,t,n){var i=l.create(n);return a(i,t),r(i,e,t),0===i.children.length?"":i.root().toString()},t.exports=n},{"../util":49,xmlbuilder:73}],52:[function(e,t,n){function r(e,t,n){if(this instanceof r){var i=typeof e;if("base64"===t&&"string"===i)for(e=L(e);e.length%4!==0;)e+="=";var s;if("number"===i)s=O(e);else if("string"===i)s=r.byteLength(e,t);else{if("object"!==i)throw new Error("First argument needs to be a number, array or string.");s=O(e.length)}var o;r._useTypedArrays?o=r._augment(new Uint8Array(s)):(o=this,o.length=s,o._isBuffer=!0);var u;if(r._useTypedArrays&&"number"==typeof e.byteLength)o._set(e);else if(_(e))for(u=0;s>u;u++)o[u]=r.isBuffer(e)?e.readUInt8(u):e[u];else if("string"===i)o.write(e,0,t);else if("number"===i&&!r._useTypedArrays&&!n)for(u=0;s>u;u++)o[u]=0;return o}return new r(e,t,n)}function i(e,t,n,i){n=Number(n)||0;var s=e.length-n;i?(i=Number(i),i>s&&(i=s)):i=s;var o=t.length;z(o%2===0,"Invalid hex string"),i>o/2&&(i=o/2);for(var u=0;i>u;u++){var a=parseInt(t.substr(2*u,2),16);z(!isNaN(a),"Invalid hex string"),e[n+u]=a}return r._charsWritten=2*u,u}function s(e,t,n,i){var s=r._charsWritten=F(P(t),e,n,i);return s}function o(e,t,n,i){var s=r._charsWritten=F(H(t),e,n,i);return s}function u(e,t,n,r){return o(e,t,n,r)}function a(e,t,n,i){var s=r._charsWritten=F(j(t),e,n,i);return s}function f(e,t,n,i){var s=r._charsWritten=F(B(t),e,n,i);return s}function l(e,t,n){return W.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function c(e,t,n){var r="",i="";n=Math.min(e.length,n);for(var s=t;n>s;s++)e[s]<=127?(r+=I(i)+String.fromCharCode(e[s]),i=""):i+="%"+e[s].toString(16);return r+I(i)}function h(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function p(e,t,n){return h(e,t,n)}function d(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",s=t;n>s;s++)i+=D(e[s]);return i}function v(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function m(e,t,n,r){r||(z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==t&&null!==t,"missing offset"),z(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s;return n?(s=e[t],i>t+1&&(s|=e[t+1]<<8)):(s=e[t]<<8,i>t+1&&(s|=e[t+1])),s}}function g(e,t,n,r){r||(z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==t&&null!==t,"missing offset"),z(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s;return n?(i>t+2&&(s=e[t+2]<<16),i>t+1&&(s|=e[t+1]<<8),s|=e[t],i>t+3&&(s+=e[t+3]<<24>>>0)):(i>t+1&&(s=e[t+1]<<16),i>t+2&&(s|=e[t+2]<<8),i>t+3&&(s|=e[t+3]),s+=e[t]<<24>>>0),s}}function y(e,t,n,r){r||(z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==t&&null!==t,"missing offset"),z(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s=m(e,t,n,!0),o=32768&s;return o?-1*(65535-s+1):s}}function b(e,t,n,r){r||(z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==t&&null!==t,"missing offset"),z(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s=g(e,t,n,!0),o=2147483648&s;return o?-1*(4294967295-s+1):s}}function w(e,t,n,r){return r||(z("boolean"==typeof n,"missing or invalid endian"),z(t+3<e.length,"Trying to read beyond buffer length")),X.read(e,t,n,23,4)}function E(e,t,n,r){return r||(z("boolean"==typeof n,"missing or invalid endian"),z(t+7<e.length,"Trying to read beyond buffer length")),X.read(e,t,n,52,8)}function S(e,t,n,r,i){i||(z(void 0!==t&&null!==t,"missing value"),z("boolean"==typeof r,"missing or invalid endian"),z(void 0!==n&&null!==n,"missing offset"),z(n+1<e.length,"trying to write beyond buffer length"),q(t,65535));var s=e.length;if(!(n>=s))for(var o=0,u=Math.min(s-n,2);u>o;o++)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function x(e,t,n,r,i){i||(z(void 0!==t&&null!==t,"missing value"),z("boolean"==typeof r,"missing or invalid endian"),z(void 0!==n&&null!==n,"missing offset"),z(n+3<e.length,"trying to write beyond buffer length"),q(t,4294967295));var s=e.length;if(!(n>=s))for(var o=0,u=Math.min(s-n,4);u>o;o++)e[n+o]=t>>>8*(r?o:3-o)&255}function T(e,t,n,r,i){i||(z(void 0!==t&&null!==t,"missing value"),z("boolean"==typeof r,"missing or invalid endian"),z(void 0!==n&&null!==n,"missing offset"),z(n+1<e.length,"Trying to write beyond buffer length"),R(t,32767,-32768));var s=e.length;n>=s||(t>=0?S(e,t,n,r,i):S(e,65535+t+1,n,r,i))}function N(e,t,n,r,i){i||(z(void 0!==t&&null!==t,"missing value"),z("boolean"==typeof r,"missing or invalid endian"),z(void 0!==n&&null!==n,"missing offset"),z(n+3<e.length,"Trying to write beyond buffer length"),R(t,2147483647,-2147483648));var s=e.length;n>=s||(t>=0?x(e,t,n,r,i):x(e,4294967295+t+1,n,r,i))}function C(e,t,n,r,i){i||(z(void 0!==t&&null!==t,"missing value"),z("boolean"==typeof r,"missing or invalid endian"),z(void 0!==n&&null!==n,"missing offset"),z(n+3<e.length,"Trying to write beyond buffer length"),U(t,3.4028234663852886e38,-3.4028234663852886e38));var s=e.length;n>=s||X.write(e,t,n,r,23,4)}function k(e,t,n,r,i){i||(z(void 0!==t&&null!==t,"missing value"),z("boolean"==typeof r,"missing or invalid endian"),z(void 0!==n&&null!==n,"missing offset"),z(n+7<e.length,"Trying to write beyond buffer length"),U(t,1.7976931348623157e308,-1.7976931348623157e308));var s=e.length;n>=s||X.write(e,t,n,r,52,8)}function L(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function A(e,t,n){return"number"!=typeof e?n:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function O(e){return e=~~Math.ceil(+e),0>e?0:e}function M(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function _(e){return M(e)||r.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function D(e){return 16>e?"0"+e.toString(16):e.toString(16)}function P(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(127>=r)t.push(e.charCodeAt(n));else{var i=n;r>=55296&&57343>=r&&n++;for(var s=encodeURIComponent(e.slice(i,n+1)).substr(1).split("%"),o=0;o<s.length;o++)t.push(parseInt(s[o],16))}}return t}function H(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function B(e){for(var t,n,r,i=[],s=0;s<e.length;s++)t=e.charCodeAt(s),n=t>>8,r=t%256,i.push(r),i.push(n);return i}function j(e){return W.toByteArray(e)}function F(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}function I(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function q(e,t){z("number"==typeof e,"cannot write a non-number as a number"),z(e>=0,"specified a negative value for writing an unsigned value"),z(t>=e,"value is larger than maximum value for type"),z(Math.floor(e)===e,"value has a fractional component")}function R(e,t,n){z("number"==typeof e,"cannot write a non-number as a number"),z(t>=e,"value larger than maximum allowed value"),z(e>=n,"value smaller than minimum allowed value"),z(Math.floor(e)===e,"value has a fractional component")}function U(e,t,n){z("number"==typeof e,"cannot write a non-number as a number"),z(t>=e,"value larger than maximum allowed value"),z(e>=n,"value smaller than minimum allowed value")}function z(e,t){if(!e)throw new Error(t||"Failed assertion")}var W=e("base64-js"),X=e("ieee754");n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192,r._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(n){return!1}}(),r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.isBuffer=function(e){return null!==e&&void 0!==e&&!!e._isBuffer},r.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=P(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=j(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;default:throw new Error("Unknown encoding")}return n},r.concat=function(e,t){if(z(M(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new r(0);if(1===e.length)return e[0];var n;if("number"!=typeof t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var i=new r(t),s=0;for(n=0;n<e.length;n++){var o=e[n];o.copy(i,s),s+=o.length}return i},r.prototype.write=function(e,t,n,r){if(isFinite(t))isFinite(n)||(r=n,n=void 0);else{var l=r;r=t,t=n,n=l}t=Number(t)||0;var c=this.length-t;n?(n=Number(n),n>c&&(n=c)):n=c,r=String(r||"utf8").toLowerCase();var h;switch(r){case"hex":h=i(this,e,t,n);break;case"utf8":case"utf-8":h=s(this,e,t,n);break;case"ascii":h=o(this,e,t,n);break;case"binary":h=u(this,e,t,n);break;case"base64":h=a(this,e,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=f(this,e,t,n);break;default:throw new Error("Unknown encoding")}return h},r.prototype.toString=function(e,t,n){var r=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,n=void 0!==n?Number(n):n=r.length,n===t)return"";var i;switch(e){case"hex":i=d(r,t,n);break;case"utf8":case"utf-8":i=c(r,t,n);break;case"ascii":i=h(r,t,n);break;case"binary":i=p(r,t,n);break;case"base64":i=l(r,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=v(r,t,n);break;default:throw new Error("Unknown encoding")}return i},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.copy=function(e,t,n,i){var s=this;if(n||(n=0),i||0===i||(i=this.length),t||(t=0),i!==n&&0!==e.length&&0!==s.length){z(i>=n,"sourceEnd < sourceStart"),z(t>=0&&t<e.length,"targetStart out of bounds"),z(n>=0&&n<s.length,"sourceStart out of bounds"),z(i>=0&&i<=s.length,"sourceEnd out of bounds"),i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n;if(100>o||!r._useTypedArrays)for(var u=0;o>u;u++)e[u+t]=this[u+n];else e._set(this.subarray(n,n+o),t)}},r.prototype.slice=function(e,t){var n=this.length;if(e=A(e,n,0),t=A(t,n,n),r._useTypedArrays)return r._augment(this.subarray(e,t));for(var i=t-e,s=new r(i,void 0,!0),o=0;i>o;o++)s[o]=this[o+e];return s},r.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},r.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},r.prototype.readUInt8=function(e,t){return t||(z(void 0!==e&&null!==e,"missing offset"),z(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},r.prototype.readUInt16LE=function(e,t){return m(this,e,!0,t)},r.prototype.readUInt16BE=function(e,t){return m(this,e,!1,t)},r.prototype.readUInt32LE=function(e,t){return g(this,e,!0,t)},r.prototype.readUInt32BE=function(e,t){return g(this,e,!1,t)},r.prototype.readInt8=function(e,t){if(t||(z(void 0!==e&&null!==e,"missing offset"),z(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var n=128&this[e];return n?-1*(255-this[e]+1):this[e]}},r.prototype.readInt16LE=function(e,t){return y(this,e,!0,t)},r.prototype.readInt16BE=function(e,t){return y(this,e,!1,t)},r.prototype.readInt32LE=function(e,t){return b(this,e,!0,t)},r.prototype.readInt32BE=function(e,t){return b(this,e,!1,t)},r.prototype.readFloatLE=function(e,t){return w(this,e,!0,t)},r.prototype.readFloatBE=function(e,t){return w(this,e,!1,t)},r.prototype.readDoubleLE=function(e,t){return E(this,e,!0,t)},r.prototype.readDoubleBE=function(e,t){return E(this,e,!1,t)},r.prototype.writeUInt8=function(e,t,n){n||(z(void 0!==e&&null!==e,"missing value"),z(void 0!==t&&null!==t,"missing offset"),z(t<this.length,"trying to write beyond buffer length"),q(e,255)),t>=this.length||(this[t]=e)},r.prototype.writeUInt16LE=function(e,t,n){S(this,e,t,!0,n)},r.prototype.writeUInt16BE=function(e,t,n){S(this,e,t,!1,n)},r.prototype.writeUInt32LE=function(e,t,n){x(this,e,t,!0,n)},r.prototype.writeUInt32BE=function(e,t,n){x(this,e,t,!1,n)},r.prototype.writeInt8=function(e,t,n){n||(z(void 0!==e&&null!==e,"missing value"),z(void 0!==t&&null!==t,"missing offset"),z(t<this.length,"Trying to write beyond buffer length"),R(e,127,-128)),t>=this.length||(e>=0?this.writeUInt8(e,t,n):this.writeUInt8(255+e+1,t,n))},r.prototype.writeInt16LE=function(e,t,n){T(this,e,t,!0,n)},r.prototype.writeInt16BE=function(e,t,n){T(this,e,t,!1,n)},r.prototype.writeInt32LE=function(e,t,n){N(this,e,t,!0,n)},r.prototype.writeInt32BE=function(e,t,n){N(this,e,t,!1,n)},r.prototype.writeFloatLE=function(e,t,n){C(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){C(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){k(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){k(this,e,t,!1,n)},r.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),z("number"==typeof e&&!isNaN(e),"value is not a number"),z(n>=t,"end < start"),n!==t&&0!==this.length){z(t>=0&&t<this.length,"start out of bounds"),z(n>=0&&n<=this.length,"end out of bounds");for(var r=t;n>r;r++)this[r]=e}},r.prototype.inspect=function(){for(var e=[],t=this.length,r=0;t>r;r++)if(e[r]=D(this[r]),r===n.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r._useTypedArrays)return(new r(this)).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var V=r.prototype;r._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=V.get,e.set=V.set,e.write=V.write,e.toString=V.toString,e.toLocaleString=V.toString,e.toJSON=V.toJSON,e.copy=V.copy,e.slice=V.slice,e.readUInt8=V.readUInt8,e.readUInt16LE=V.readUInt16LE,e.readUInt16BE=V.readUInt16BE,e.readUInt32LE=V.readUInt32LE,e.readUInt32BE=V.readUInt32BE,e.readInt8=V.readInt8,e.readInt16LE=V.readInt16LE,e.readInt16BE=V.readInt16BE,e.readInt32LE=V.readInt32LE,e.readInt32BE=V.readInt32BE,e.readFloatLE=V.readFloatLE,e.readFloatBE=V.readFloatBE,e.readDoubleLE=V.readDoubleLE,e.readDoubleBE=V.readDoubleBE,e.writeUInt8=V.writeUInt8,e.writeUInt16LE=V.writeUInt16LE,e.writeUInt16BE=V.writeUInt16BE,e.writeUInt32LE=V.writeUInt32LE,e.writeUInt32BE=V.writeUInt32BE,e.writeInt8=V.writeInt8,e.writeInt16LE=V.writeInt16LE,e.writeInt16BE=V.writeInt16BE,e.writeInt32LE=V.writeInt32LE,e.writeInt32BE=V.writeInt32BE,e.writeFloatLE=V.writeFloatLE,e.writeFloatBE=V.writeFloatBE,e.writeDoubleLE=V.writeDoubleLE,e.writeDoubleBE=V.writeDoubleBE,e.fill=V.fill,e.inspect=V.inspect,e.toArrayBuffer=V.toArrayBuffer,e}},{"base64-js":53,ieee754:54}],53:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){function t(e){var t=e.charCodeAt(0);return t===u||t===h?62:t===a||t===p?63:f>t?-1:f+10>t?t-f+26+26:c+26>t?t-c:l+26>t?t-l+26:void 0}function n(e){function n(e){f[c++]=e}var r,i,s,u,a,f;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;a="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,f=new o(3*e.length/4-a),s=a>0?e.length-4:e.length;var c=0;for(r=0,i=0;s>r;r+=4,i+=3)u=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&u)>>16),n((65280&u)>>8),n(255&u);return 2===a?(u=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&u)):1===a&&(u=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(u>>8&255),n(255&u)),f}function s(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var s,o,u,a=e.length%3,f="";for(s=0,u=e.length-a;u>s;s+=3)o=(e[s]<<16)+(e[s+1]<<8)+e[s+2],f+=n(o);switch(a){case 1:o=e[e.length-1],f+=t(o>>2),f+=t(o<<4&63),f+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],f+=t(o>>10),f+=t(o>>4&63),f+=t(o<<2&63),f+="="}return f}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,u="+".charCodeAt(0),a="/".charCodeAt(0),f="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0),h="-".charCodeAt(0),p="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=s}("undefined"==typeof n?this.base64js={}:n)},{}],54:[function(e,t,n){n.read=function(e,t,n,r,i){var s,o,u=8*i-r-1,a=(1<<u)-1,f=a>>1,l=-7,c=n?i-1:0,h=n?-1:1,p=e[t+c];for(c+=h,s=p&(1<<-l)-1,p>>=-l,l+=u;l>0;s=256*s+e[t+c],c+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+e[t+c],c+=h,l-=8);if(0===s)s=1-f;else{if(s===a)return o?0/0:1/0*(p?-1:1);o+=Math.pow(2,r),s-=f}return(p?-1:1)*o*Math.pow(2,s-r)},n.write=function(e,t,n,r,i,s){var o,u,a,f=8*s-i-1,l=(1<<f)-1,c=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,d=r?1:-1,v=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-o))<1&&(o--,a*=2),t+=o+c>=1?h/a:h*Math.pow(2,1-c),t*a>=2&&(o++,a/=2),o+c>=l?(u=0,o=l):o+c>=1?(u=(t*a-1)*Math.pow(2,i),o+=c):(u=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&u,p+=d,u/=256,i-=8);for(o=o<<i|u,f+=i;f>0;e[n+p]=255&o,p+=d,o/=256,f-=8);e[n+p-d]|=128*v}},{}],55:[function(e,t){function n(e,t){if(e.length%o!==0){var n=e.length+(o-e.length%o);e=s.concat([e,u],n)}for(var r=[],i=t?e.readInt32BE:e.readInt32LE,a=0;a<e.length;a+=o)r.push(i.call(e,a));return r}function r(e,t,n){for(var r=new s(t),i=n?r.writeInt32BE:r.writeInt32LE,o=0;o<e.length;o++)i.call(r,e[o],4*o,!0);return r}function i(e,t,i,o){s.isBuffer(e)||(e=new s(e));var u=t(n(e,o),e.length*a);return r(u,i,o)}var s=e("buffer").Buffer,o=4,u=new s(o);u.fill(0);var a=8;t.exports={hash:i}},{buffer:52}],56:[function(e,t,n){function r(e,t,n){u.isBuffer(t)||(t=new u(t)),u.isBuffer(n)||(n=new u(n)),t.length>p?t=e(t):t.length<p&&(t=u.concat([t,d],p));for(var r=new u(p),i=new u(p),s=0;p>s;s++)r[s]=54^t[s],i[s]=92^t[s];var o=e(u.concat([r,n]));return e(u.concat([i,o]))}function i(e,t){e=e||"sha1";var n=h[e],i=[],o=0;return n||s("algorithm:",e,"is not yet supported"),{update:function(e){return u.isBuffer(e)||(e=new u(e)),i.push(e),o+=e.length,this},digest:function(e){var s=u.concat(i),o=t?r(n,t,s):n(s);return i=null,e?o.toString(e):o}}}function s(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function o(e,t){for(var n in e)t(e[n],n)}var u=e("buffer").Buffer,a=e("./sha"),f=e("./sha256"),l=e("./rng"),c=e("./md5"),h={sha1:a,sha256:f,md5:c},p=64,d=new u(p);d.fill(0),n.createHash=function(e){return i(e)},n.createHmac=function(e,t){return i(e,t)},n.randomBytes=function(e,t){if(!t||!t.call)return new u(l(e));try{t.call(this,void 0,new u(l(e)))}catch(n){t(n)}},o(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(e){n[e]=function(){s("sorry,",e,"is not implemented yet")}})},{"./md5":57,"./rng":58,"./sha":59,"./sha256":60,buffer:52}],57:[function(e,t){function n(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,r=-271733879,f=-1732584194,l=271733878,c=0;c<e.length;c+=16){var h=n,p=r,d=f,v=l;n=i(n,r,f,l,e[c+0],7,-680876936),l=i(l,n,r,f,e[c+1],12,-389564586),f=i(f,l,n,r,e[c+2],17,606105819),r=i(r,f,l,n,e[c+3],22,-1044525330),n=i(n,r,f,l,e[c+4],7,-176418897),l=i(l,n,r,f,e[c+5],12,1200080426),f=i(f,l,n,r,e[c+6],17,-1473231341),r=i(r,f,l,n,e[c+7],22,-45705983),n=i(n,r,f,l,e[c+8],7,1770035416),l=i(l,n,r,f,e[c+9],12,-1958414417),f=i(f,l,n,r,e[c+10],17,-42063),r=i(r,f,l,n,e[c+11],22,-1990404162),n=i(n,r,f,l,e[c+12],7,1804603682),l=i(l,n,r,f,e[c+13],12,-40341101),f=i(f,l,n,r,e[c+14],17,-1502002290),r=i(r,f,l,n,e[c+15],22,1236535329),n=s(n,r,f,l,e[c+1],5,-165796510),l=s(l,n,r,f,e[c+6],9,-1069501632),f=s(f,l,n,r,e[c+11],14,643717713),r=s(r,f,l,n,e[c+0],20,-373897302),n=s(n,r,f,l,e[c+5],5,-701558691),l=s(l,n,r,f,e[c+10],9,38016083),f=s(f,l,n,r,e[c+15],14,-660478335),r=s(r,f,l,n,e[c+4],20,-405537848),n=s(n,r,f,l,e[c+9],5,568446438),l=s(l,n,r,f,e[c+14],9,-1019803690),f=s(f,l,n,r,e[c+3],14,-187363961),r=s(r,f,l,n,e[c+8],20,1163531501),n=s(n,r,f,l,e[c+13],5,-1444681467),l=s(l,n,r,f,e[c+2],9,-51403784),f=s(f,l,n,r,e[c+7],14,1735328473),r=s(r,f,l,n,e[c+12],20,-1926607734),n=o(n,r,f,l,e[c+5],4,-378558),l=o(l,n,r,f,e[c+8],11,-2022574463),f=o(f,l,n,r,e[c+11],16,1839030562),r=o(r,f,l,n,e[c+14],23,-35309556),n=o(n,r,f,l,e[c+1],4,-1530992060),l=o(l,n,r,f,e[c+4],11,1272893353),f=o(f,l,n,r,e[c+7],16,-155497632),r=o(r,f,l,n,e[c+10],23,-1094730640),n=o(n,r,f,l,e[c+13],4,681279174),l=o(l,n,r,f,e[c+0],11,-358537222),f=o(f,l,n,r,e[c+3],16,-722521979),r=o(r,f,l,n,e[c+6],23,76029189),n=o(n,r,f,l,e[c+9],4,-640364487),l=o(l,n,r,f,e[c+12],11,-421815835),f=o(f,l,n,r,e[c+15],16,530742520),r=o(r,f,l,n,e[c+2],23,-995338651),n=u(n,r,f,l,e[c+0],6,-198630844),l=u(l,n,r,f,e[c+7],10,1126891415),f=u(f,l,n,r,e[c+14],15,-1416354905),r=u(r,f,l,n,e[c+5],21,-57434055),n=u(n,r,f,l,e[c+12],6,1700485571),l=u(l,n,r,f,e[c+3],10,-1894986606),f=u(f,l,n,r,e[c+10],15,-1051523),r=u(r,f,l,n,e[c+1],21,-2054922799),n=u(n,r,f,l,e[c+8],6,1873313359),l=u(l,n,r,f,e[c+15],10,-30611744),f=u(f,l,n,r,e[c+6],15,-1560198380),r=u(r,f,l,n,e[c+13],21,1309151649),n=u(n,r,f,l,e[c+4],6,-145523070),l=u(l,n,r,f,e[c+11],10,-1120210379),f=u(f,l,n,r,e[c+2],15,718787259),r=u(r,f,l,n,e[c+9],21,-343485551),n=a(n,h),r=a(r,p),f=a(f,d),l=a(l,v)}return Array(n,r,f,l)}function r(e,t,n,r,i,s){return a(f(a(a(t,e),a(r,s)),i),n)}function i(e,t,n,i,s,o,u){return r(t&n|~t&i,e,t,s,o,u)}function s(e,t,n,i,s,o,u){return r(t&i|n&~i,e,t,s,o,u)}function o(e,t,n,i,s,o,u){return r(t^n^i,e,t,s,o,u)}function u(e,t,n,i,s,o,u){return r(n^(t|~i),e,t,s,o,u)}function a(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function f(e,t){return e<<t|e>>>32-t}var l=e("./helpers");t.exports=function(e){return l.hash(e,n,16)}},{"./helpers":55}],58:[function(e,t){!function(){var e,n,r=this;e=function(e){for(var t,t,n=new Array(e),r=0;e>r;r++)0==(3&r)&&(t=4294967296*Math.random()),n[r]=t>>>((3&r)<<3)&255;return n},r.crypto&&crypto.getRandomValues&&(n=function(e){var t=new Uint8Array(e);return crypto.getRandomValues(t),t}),t.exports=n||e}()},{}],59:[function(e,t){function n(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var n=Array(80),u=1732584193,f=-271733879,l=-1732584194,c=271733878,h=-1009589776,p=0;p<e.length;p+=16){for(var d=u,v=f,m=l,g=c,y=h,b=0;80>b;b++){n[b]=16>b?e[p+b]:o(n[b-3]^n[b-8]^n[b-14]^n[b-16],1);var w=s(s(o(u,5),r(b,f,l,c)),s(s(h,n[b]),i(b)));h=c,c=l,l=o(f,30),f=u,u=w}u=s(u,d),f=s(f,v),l=s(l,m),c=s(c,g),h=s(h,y)}return Array(u,f,l,c,h)}function r(e,t,n,r){return 20>e?t&n|~t&r:40>e?t^n^r:60>e?t&n|t&r|n&r:t^n^r}function i(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function s(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function o(e,t){return e<<t|e>>>32-t}var u=e("./helpers");t.exports=function(e){return u.hash(e,n,20,!0)}},{"./helpers":55}],60:[function(e,t){var n=e("./helpers"),r=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n},i=function(e,t){return e>>>t|e<<32-t},s=function(e,t){return e>>>t},o=function(e,t,n){return e&t^~e&n},u=function(e,t,n){return e&t^e&n^t&n},a=function(e){return i(e,2)^i(e,13)^i(e,22)},f=function(e){return i(e,6)^i(e,11)^i(e,25)},l=function(e){return i(e,7)^i(e,18)^s(e,3)},c=function(e){return i(e,17)^i(e,19)^s(e,10)},h=function(e,t){var n,i,s,h,d,v,m,g,y,b,w,E,S=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),x=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),T=new Array(64);e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var y=0;y<e.length;y+=16){n=x[0],i=x[1],s=x[2],h=x[3],d=x[4],v=x[5],m=x[6],g=x[7];for(var b=0;64>b;b++)T[b]=16>b?e[b+y]:r(r(r(c(T[b-2]),T[b-7]),l(T[b-15])),T[b-16]),w=r(r(r(r(g,f(d)),o(d,v,m)),S[b]),T[b]),E=r(a(n),u(n,i,s)),g=m,m=v,v=d,d=r(h,w),h=s,s=i,i=n,n=r(w,E);x[0]=r(n,x[0]),x[1]=r(i,x[1]),x[2]=r(s,x[2]),x[3]=r(h,x[3]),x[4]=r(d,x[4]),x[5]=r(v,x[5]),x[6]=r(m,x[6]),x[7]=r(g,x[7])}return x};t.exports=function(e){return n.hash(e,h,32,!0)}},{"./helpers":55}],61:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,u,f,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length))throw(t=arguments[1],t instanceof Error)?t:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,u=new Array(i-1),f=1;i>f;f++)u[f-1]=arguments[f];n.apply(this,u)}else if(s(n)){for(i=arguments.length,u=new Array(i-1),f=1;i>f;f++)u[f-1]=arguments[f];for(l=n.slice(),i=l.length,f=0;i>f;f++)l[f].apply(this,u)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var i;i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(u=o;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],62:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],63:[function(e,t){function n(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],64:[function(e,t,n){(function(e){!function(i){function s(e){throw RangeError(P[e])}function o(e,t){for(var n=e.length;n--;)e[n]=t(e[n]);return e}function u(e,t){return o(e.split(D),t).join(".")}function a(e){for(var t,n,r=[],i=0,s=e.length;s>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&s>i?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function f(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=j(e>>>10&1023|55296),e=56320|1023&e),t+=j(e)}).join("")}function l(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:x}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?B(e/k):e>>1,e+=B(e/t);e>H*N>>1;r+=x)e=B(e/H);return B(r+(H+1)*e/(e+C))}function p(e){var t,n,r,i,o,u,a,c,p,d,v=[],m=e.length,g=0,y=A,b=L;for(n=e.lastIndexOf(O),0>n&&(n=0),r=0;n>r;++r)e.charCodeAt(r)>=128&&s("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;m>i;){for(o=g,u=1,a=x;i>=m&&s("invalid-input"),c=l(e.charCodeAt(i++)),(c>=x||c>B((S-g)/u))&&s("overflow"),g+=c*u,p=b>=a?T:a>=b+N?N:a-b,!(p>c);a+=x)d=x-p,u>B(S/d)&&s("overflow"),u*=d;t=v.length+1,b=h(g-o,t,0==o),B(g/t)>S-y&&s("overflow"),y+=B(g/t),g%=t,v.splice(g++,0,y)}return f(v)}function d(e){var t,n,r,i,o,u,f,l,p,d,v,m,g,y,b,w=[];for(e=a(e),m=e.length,t=A,n=0,o=L,u=0;m>u;++u)v=e[u],128>v&&w.push(j(v));for(r=i=w.length,i&&w.push(O);m>r;){for(f=S,u=0;m>u;++u)v=e[u],v>=t&&f>v&&(f=v);for(g=r+1,f-t>B((S-n)/g)&&s("overflow"),n+=(f-t)*g,t=f,u=0;m>u;++u)if(v=e[u],t>v&&++n>S&&s("overflow"),v==t){for(l=n,p=x;d=o>=p?T:p>=o+N?N:p-o,!(d>l);p+=x)b=l-d,y=x-d,w.push(j(c(d+b%y,0))),l=B(b/y);w.push(j(c(l,0))),o=h(n,g,r==i),n=0,++r}++n,++t}return w.join("")}function v(e){return u(e,function(e){return M.test(e)?p(e.slice(4).toLowerCase()):e})}function m(e){return u(e,function(e){return _.test(e)?"xn--"+d(e):e})}var g="object"==typeof n&&n,y="object"==typeof t&&t&&t.exports==g&&t,b="object"==typeof e&&e;(b.global===b||b.window===b)&&(i=b);var w,E,S=2147483647,x=36,T=1,N=26,C=38,k=700,L=72,A=128,O="-",M=/^xn--/,_=/[^ -~]/,D=/\x2E|\u3002|\uFF0E|\uFF61/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},H=x-T,B=Math.floor,j=String.fromCharCode;if(w={version:"1.2.4",ucs2:{decode:a,encode:f},decode:p,encode:d,toASCII:m,toUnicode:v},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",[],function(){return w});else if(g&&!g.nodeType)if(y)y.exports=w;else for(E in w)w.hasOwnProperty(E)&&(g[E]=w[E]);else i.punycode=w}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],65:[function(e,t){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,s,o){t=t||"&",s=s||"=";var u={};if("string"!=typeof e||0===e.length)return u;var a=/\+/g;e=e.split(t);var f=1e3;o&&"number"==typeof o.maxKeys&&(f=o.maxKeys);var l=e.length;f>0&&l>f&&(l=f);for(var c=0;l>c;++c){var h,p,d,v,m=e[c].replace(a,"%20"),g=m.indexOf(s);g>=0?(h=m.substr(0,g),p=m.substr(g+1)):(h=m,p=""),d=decodeURIComponent(h),v=decodeURIComponent(p),n(u,d)?r(u[d])?u[d].push(v):u[d]=[u[d],v]:u[d]=v}return u};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],66:[function(e,t){function n(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,u,a){return t=t||"&",u=u||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(n){var s=encodeURIComponent(r(n))+u;return i(e[n])?e[n].map(function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[n]))}).join(t):a?encodeURIComponent(r(a))+u+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],67:[function(e,t,n){n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":65,"./encode":66}],68:[function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&f(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function s(e){return a(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function o(e,t){return i(e,!1,!0).resolve(t)}function u(e,t){return e?i(e,!1,!0).resolveObject(t):t}function a(e){return"string"==typeof e}function f(e){return"object"==typeof e&&null!==e}function l(e){return null===e}function c(e){return null==e}var h=e("punycode");n.parse=i,n.resolve=o,n.resolveObject=u,n.format=s,n.Url=r;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],m=["{","}","|","\\","^","`"].concat(v),g=["'"].concat(m),y=["%","/","?",";","#"].concat(g),b=["/","?","#"],w=255,E=/^[a-z0-9A-Z_-]{0,63}$/,S=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},N={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=e("querystring");r.prototype.parse=function(e,t,n){if(!a(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e;r=r.trim();var i=p.exec(r);if(i){i=i[0];var s=i.toLowerCase();this.protocol=s,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var o="//"===r.substr(0,2);!o||i&&T[i]||(r=r.substr(2),this.slashes=!0)}if(!T[i]&&(o||i&&!N[i])){for(var u=-1,f=0;f<b.length;f++){var l=r.indexOf(b[f]);-1!==l&&(-1===u||u>l)&&(u=l)}var c,d;d=-1===u?r.lastIndexOf("@"):r.lastIndexOf("@",u),-1!==d&&(c=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(c)),u=-1;for(var f=0;f<y.length;f++){var l=r.indexOf(y[f]);-1!==l&&(-1===u||u>l)&&(u=l)}-1===u&&(u=r.length),this.host=r.slice(0,u),r=r.slice(u),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var m=this.hostname.split(/\./),f=0,k=m.length;k>f;f++){var L=m[f];if(L&&!L.match(E)){for(var A="",O=0,M=L.length;M>O;O++)A+=L.charCodeAt(O)>127?"x":L[O];if(!A.match(E)){var _=m.slice(0,f),D=m.slice(f+1),P=L.match(S);P&&(_.push(P[1]),D.unshift(P[2])),D.length&&(r="/"+D.join(".")+r),this.hostname=_.join(".");break}}}if(this.hostname=this.hostname.length>w?"":this.hostname.toLowerCase(),!v){for(var H=this.hostname.split("."),B=[],f=0;f<H.length;++f){var j=H[f];B.push(j.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(j):j)}this.hostname=B.join(".")}var F=this.port?":"+this.port:"",R=this.hostname||"";this.host=R+F,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!x[s])for(var f=0,k=g.length;k>f;f++){var U=g[f],z=encodeURIComponent(U);z===U&&(z=escape(U)),r=r.split(U).join(z)}var W=r.indexOf("#");-1!==W&&(this.hash=r.substr(W),r=r.slice(0,W));var X=r.indexOf("?");if(-1!==X?(this.search=r.substr(X),this.query=r.substr(X+1),t&&(this.query=C.parse(this.query)),r=r.slice(0,X)):t&&(this.search="",this.query={}),r&&(this.pathname=r),N[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",j=this.search||"";this.path=F+j}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&f(this.query)&&Object.keys(this.query).length&&(s=C.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||N[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+i+n+o+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(a(e)){var t=new r;t.parse(e,!1,!0),e=t}var n=new r;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),N[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!N[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||T[e.protocol])n.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var s=n.pathname||"",o=n.search||"";n.path=s+o}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var u=n.pathname&&"/"===n.pathname.charAt(0),f=e.host||e.pathname&&"/"===e.pathname.charAt(0),h=f||u||n.host&&e.pathname,p=h,d=n.pathname&&n.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],v=n.protocol&&!N[n.protocol];if(v&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),h=h&&(""===i[0]||""===d[0])),f)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),n.search=e.search,n.query=e.query;else if(!c(e.search)){if(v){n.hostname=n.host=d.shift();var m=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;m&&(n.auth=m.shift(),n.host=n.hostname=m.shift())}return n.search=e.search,n.query=e.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var g=d.slice(-1)[0],y=(n.host||e.host)&&("."===g||".."===g)||""===g,b=0,w=d.length;w>=0;w--)g=d[w],"."==g?d.splice(w,1):".."===g?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!h&&!p)for(;b--;b)d.unshift("..");!h||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var E=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(v){n.hostname=n.host=E?"":d.length?d.shift():"";var m=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;m&&(n.auth=m.shift(),n.host=n.hostname=m.shift())}return h=h||n.host&&d.length,h&&!E&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:64,querystring:67}],69:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],70:[function(e,t,n){(function(t,i){function s(e,t){var i={seen:[],stylize:u};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(t)?i.showHidden=t:t&&n._extend(i,t),S(i.showHidden)&&(i.showHidden=!1),S(i.depth)&&(i.depth=2),S(i.colors)&&(i.colors=!1),S(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),f(i,e,i.depth)}function o(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e){return e}function a(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function f(e,t,i){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var s=t.inspect(i,e);return w(s)||(s=f(e,s,i)),s}var o=l(e,t);if(o)return o;var u=Object.keys(t),m=a(u);if(e.showHidden&&(u=Object.getOwnPropertyNames(t)),C(t)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return c(t);if(0===u.length){if(k(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(N(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return c(t)}var y="",b=!1,E=["{","}"];if(v(t)&&(b=!0,E=["[","]"]),k(t)){var S=t.name?": "+t.name:"";y=" [Function"+S+"]"}if(x(t)&&(y=" "+RegExp.prototype.toString.call(t)),N(t)&&(y=" "+Date.prototype.toUTCString.call(t)),C(t)&&(y=" "+c(t)),0!==u.length||!!b&&0!=t.length){if(0>i)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var T;return T=b?h(e,t,i,m,u):u.map(function(n){return p(e,t,i,m,n,b)}),e.seen.pop(),d(T,y,E)}return E[0]+y+E[1]}function l(e,t){if(S(t))return e.stylize("undefined","undefined");if(w(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i){for(var s=[],o=0,u=t.length;u>o;++o)s.push(_(t,String(o))?p(e,t,n,r,String(o),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||s.push(p(e,t,n,r,i,!0))}),s}function p(e,t,n,r,i,s){var o,u,a;if(a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},a.get?u=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),_(r,i)||(o="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(u=g(n)?f(e,a.value,null):f(e,a.value,n-1),u.indexOf("\n")>-1&&(u=s?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),S(o)){if(s&&i.match(/^\d+$/))return u;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function d(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function v(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return null==e}function b(e){return"number"==typeof e}function w(e){return"string"==typeof e}function E(e){return"symbol"==typeof e}function S(e){return void 0===e}function x(e){return T(e)&&"[object RegExp]"===A(e)}function T(e){return"object"==typeof e&&null!==e}function N(e){return T(e)&&"[object Date]"===A(e)}function C(e){return T(e)&&("[object Error]"===A(e)||e instanceof Error)}function k(e){return"function"==typeof e}function L(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function A(e){return Object.prototype.toString.call(e)}function O(e){return 10>e?"0"+e.toString(10):e.toString(10)}function M(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),B[e.getMonth()],t].join(" ")}function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=/%[sdj%]/g;n.format=function(e){if(!w(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,o=String(e).replace(D,function(e){if("%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"};default:return e}}),u=r[n];i>n;u=r[++n])o+=g(u)||!T(u)?" "+u:" "+s(u);return o},n.deprecate=function(e,s){function o(){if(!u){if(t.throwDeprecation)throw new Error(s);t.traceDeprecation?console.trace(s):console.error(s),u=!0}return e.apply(this,arguments)}if(S(i.process))return function(){return n.deprecate(e,s).apply(this,arguments)};if(t.noDeprecation===!0)return e;var u=!1;return o};var P,H={};n.debuglog=function(e){if(S(P)&&(P=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!H[e])if((new RegExp("\\b"+e+"\\b","i")).test(P)){var i=t.pid;H[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,i,t)}}else H[e]=function(){};return H[e]},n.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow","boolean":"yellow","undefined":"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=v,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=y,n.isNumber=b,n.isString=w,n.isSymbol=E,n.isUndefined=S,n.isRegExp=x,n.isObject=T,n.isDate=N,n.isError=C,n.isFunction=k,n.isPrimitive=L,n.isBuffer=e("./support/isBuffer");var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",M(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!T(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("FWaASH"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":69,FWaASH:63,inherits:62}],71:[function(e,t){(function(){var n,r;r=e("./XMLFragment"),n=function(){function e(e,t,n){var s,o,u;if(this.children=[],this.rootObject=null,this.is(e,"Object")&&(u=[e,t],t=u[0],n=u[1],e=null),null!=e&&(e=""+e||"",null==t&&(t={version:"1.0"})),null!=t&&null==t.version)throw new Error("Version number is required");if(null!=t){if(t.version=""+t.version||"",!t.version.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t.version);if(s={version:t.version},null!=t.encoding){if(t.encoding=""+t.encoding||"",!t.encoding.match(/[A-Za-z](?:[A-Za-z0-9._-]|-)*/))throw new Error("Invalid encoding: "+t.encoding);s.encoding=t.encoding}null!=t.standalone&&(s.standalone=t.standalone?"yes":"no"),o=new r(this,"?xml",s),this.children.push(o)}null!=n&&(s={},null!=e&&(s.name=e),null!=n.ext&&(n.ext=""+n.ext||"",s.ext=n.ext),o=new r(this,"!DOCTYPE",s),this.children.push(o)),null!=e&&this.begin(e)}return e.prototype.begin=function(t,n,s){var o,u;if(null==t)throw new Error("Root element needs a name");return this.rootObject&&(this.children=[],this.rootObject=null),null!=n?(o=new e(t,n,s),o.root()):(t=""+t||"",u=new r(this,t,{}),u.isRoot=!0,u.documentObject=this,this.children.push(u),this.rootObject=u,u)},e.prototype.root=function(){return this.rootObject},e.prototype.end=function(e){return toString(e)},e.prototype.toString=function(e){var t,n,r,i,s;for(n="",s=this.children,r=0,i=s.length;i>r;r++)t=s[r],n+=t.toString(e);return n},e.prototype.is=function(e,t){var n;return n=Object.prototype.toString.call(e).slice(8,-1),null!=e&&n===t},e}(),t.exports=n}).call(this)},{"./XMLFragment":72}],72:[function(e,t){(function(){var e,n={}.hasOwnProperty;e=function(){function e(e,t,n,r){this.isRoot=!1,this.documentObject=null,this.parent=e,this.name=t,this.attributes=n,this.value=r,this.children=[]}return e.prototype.element=function(t,i,s){var o,u,a,f,l;if(null==t)throw new Error("Missing element name");t=""+t||"",this.assertLegalChar(t),null==i&&(i={}),this.is(i,"String")&&this.is(s,"Object")?(f=[s,i],i=f[0],s=f[1]):this.is(i,"String")&&(l=[{},i],i=l[0],s=l[1]);for(u in i)n.call(i,u)&&(a=i[u],a=""+a||"",i[u]=this.escape(a));return o=new e(this,t,i),null!=s&&(s=""+s||"",s=this.escape(s),this.assertLegalChar(s),o.raw(s)),this.children.push(o),o},e.prototype.insertBefore=function(t,i,s){var o,u,a,f,l,c;if(this.isRoot)throw new Error("Cannot insert elements at root level");if(null==t)throw new Error("Missing element name");t=""+t||"",this.assertLegalChar(t),null==i&&(i={}),this.is(i,"String")&&this.is(s,"Object")?(l=[s,i],i=l[0],s=l[1]):this.is(i,"String")&&(c=[{},i],i=c[0],s=c[1]);for(a in i)n.call(i,a)&&(f=i[a],f=""+f||"",i[a]=this.escape(f));return o=new e(this.parent,t,i),null!=s&&(s=""+s||"",s=this.escape(s),this.assertLegalChar(s),o.raw(s)),u=this.parent.children.indexOf(this),this.parent.children.splice(u,0,o),o},e.prototype.insertAfter=function(t,i,s){var o,u,a,f,l,c;if(this.isRoot)throw new Error("Cannot insert elements at root level");if(null==t)throw new Error("Missing element name");t=""+t||"",this.assertLegalChar(t),null==i&&(i={}),this.is(i,"String")&&this.is(s,"Object")?(l=[s,i],i=l[0],s=l[1]):this.is(i,"String")&&(c=[{},i],i=c[0],s=c[1]);for(a in i)n.call(i,a)&&(f=i[a],f=""+f||"",i[a]=this.escape(f));return o=new e(this.parent,t,i),null!=s&&(s=""+s||"",s=this.escape(s),this.assertLegalChar(s),o.raw(s)),u=this.parent.children.indexOf(this),this.parent.children.splice(u+1,0,o),o},e.prototype.remove=function(){var e,t;if(this.isRoot)throw new Error("Cannot remove the root element");return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat(t=[])),t,this.parent},e.prototype.text=function(t){var n;if(null==t)throw new Error("Missing element text");return t=""+t||"",t=this.escape(t),this.assertLegalChar(t),n=new e(this,"",{},t),this.children.push(n),this},e.prototype.cdata=function(t){var n;if(null==t)throw new Error("Missing CDATA text");if(t=""+t||"",this.assertLegalChar(t),t.match(/]]>/))throw new Error("Invalid CDATA text: "+t);return n=new e(this,"",{},"<![CDATA["+t+"]]>"),this.children.push(n),this},e.prototype.comment=function(t){var n;if(null==t)throw new Error("Missing comment text");if(t=""+t||"",t=this.escape(t),this.assertLegalChar(t),t.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return n=new e(this,"",{},"<!-- "+t+" -->"),this.children.push(n),this},e.prototype.raw=function(t){var n;if(null==t)throw new Error("Missing raw text");return t=""+t||"",n=new e(this,"",{},t),this.children.push(n),this},e.prototype.up=function(){if(this.isRoot)throw new Error("This node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var e;if(this.isRoot)return this;for(e=this.parent;!e.isRoot;)e=e.parent;return e},e.prototype.document=function(){return this.root().documentObject},e.prototype.end=function(e){return this.document().toString(e)},e.prototype.prev=function(){var e;if(this.isRoot)throw new Error("Root node has no siblings");if(e=this.parent.children.indexOf(this),1>e)throw new Error("Already at the first node");return this.parent.children[e-1]},e.prototype.next=function(){var e;if(this.isRoot)throw new Error("Root node has no siblings");if(e=this.parent.children.indexOf(this),-1===e||e===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[e+1]},e.prototype.clone=function(t){var n;return n=new e(this.parent,this.name,this.attributes,this.value),t&&this.children.forEach(function(e){var i;return i=e.clone(t),i.parent=n,n.children.push(i)}),n},e.prototype.importXMLBuilder=function(e){var t;return t=e.root().clone(!0),t.parent=this,this.children.push(t),t.isRoot=!1,this},e.prototype.attribute=function(e,t){var n;if(null==e)throw new Error("Missing attribute name");if(null==t)throw new Error("Missing attribute value");return e=""+e||"",t=""+t||"",null==(n=this.attributes)&&(this.attributes={}),this.attributes[e]=this.escape(t),this},e.prototype.removeAttribute=function(e){if(null==e)throw new Error("Missing attribute name");return e=""+e||"",delete this.attributes[e],this},e.prototype.toString=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p;u=null!=e&&e.pretty||!1,s=null!=e&&e.indent||"  ",o=null!=e&&e.newline||"\n",t||(t=0),f=(new Array(t+1)).join(s),a="",u&&(a+=f),a+=null==this.value?"<"+this.name:""+this.value,h=this.attributes;for(n in h)r=h[n],a+="!DOCTYPE"===this.name?" "+r:" "+n+'="'+r+'"';if(0===this.children.length)null==this.value&&(a+="?xml"===this.name?"?>":"!DOCTYPE"===this.name?">":"/>"),u&&(a+=o);else if(u&&1===this.children.length&&this.children[0].value)a+=">",a+=this.children[0].value,a+="</"+this.name+">",a+=o;else{for(a+=">",u&&(a+=o),p=this.children,l=0,c=p.length;c>l;l++)i=p[l],a+=i.toString(e,t+1);u&&(a+=f),a+="</"+this.name+">",u&&(a+=o)}return a},e.prototype.escape=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")},e.prototype.assertLegalChar=function(e){var t,n;if(t=/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE-\uFFFF]/,n=e.match(t))throw new Error("Invalid character ("+n+") in string: "+e)},e.prototype.is=function(e,t){var n;return n=Object.prototype.toString.call(e).slice(8,-1),null!=e&&n===t},e.prototype.ele=function(e,t,n){return this.element(e,t,n)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.att=function(e,t){return this.attribute(e,t)},e.prototype.com=function(e){return this.comment(e)},e.prototype.doc=function(){return this.document()},e.prototype.e=function(e,t,n){return this.element(e,t,n)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.a=function(e,t){return this.attribute(e,t)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.u=function(){return this.up()},e}(),t.exports=e}).call(this)},{}],73:[function(e,t){(function(){var n;n=e("./XMLBuilder"),t.exports.create=function(e,t,i){return null!=e?(new n(e,t,i)).root():new n}}).call(this)},{"./XMLBuilder":71}]},{},[1]),define("awssdk",function(){}),define("course/console/capture",["utils","base64","hash","awssdk"],function(e,t){function x(e,t){var n=t?e:u+e,a=r+"url="+o+"&title="+i+"&appkey="+s+"&pic="+n+"&searchPic=false";return a}function T(e,t){if(/^http/g.test(e))var n=e;else var n=N(u+e);var r="";return r+='<div class="col-md-3"><a href="javascript:;" data-toggle="modal" data-target="#showimg"><img src="'+n+'" deleteUrl='+t+" /></a>"+"</div>",r}function N(e){function r(e){if(!e)return"";var e=jsBase64.encode(e);return e.replace(/\+/g,"-").replace(/\//g,"_")}var t=r("http://syl-static.qiniudn.com/img/watermark.png"),n="?watermark/1/image/"+t+"/dissolve/60/gravity/SouthEast/dx/0/dy/10";return t?e+n:e}function C(){c.on("click",function(){function t(e,t,n){var t=t||"",n=n||512,r=atob(e),i=[];for(var s=0;s<r.length;s+=n){var o=r.slice(s,s+n),u=new Array(o.length);for(var a=0;a<o.length;a++)u[a]=o.charCodeAt(a);var f=new Uint8Array(u);i.push(f)}var l=new Blob(i,{type:t});return l}f.find("div").html("loading..."),f.show();var r=$("canvas").get(0).toDataURL("image/png").replace("data:image/png;base64,","");r=t(r,"image/png");var i=n.currentUserid+""+Date.now();i=hex_md5(i),AWS.config.update({accessKeyId:"AKIAJ5HCUGM7JKTNHXXQ",secretAccessKey:"jihB4IczLsQLQjDylNt3GfV5nxT7af5VNgDjOkmc"}),AWS.config.region="us-west-1";var s=new AWS.S3({params:{Bucket:"simplelab-upload"}}),o=i+".png",u={Key:o,ContentType:"image/png",ContentEncoding:"base64",Body:r};s.upload(u,function(t,n){if(t)e.flashMessage("error","capture image failed");else{var r="https://s3-us-west-1.amazonaws.com/simplelab-upload/"+o;$.post(p+r).done(function(t){var n=T(r,t.delete_url);c.parent(".col-md-3").before(n),l.find(".col-md-3").length>4&&c.find(".capturescreen").hide(),L(),A(),t.status=="error"&&e.flashMessage(t.status,t.message)}).fail(function(){e.flashMessage("error","failed to save the image, please try agian")}).always(function(){f.hide()})}})})}function k(){c.on("click",function(){f.find("div").html("请稍候..."),f.show();if(localStorage.mode=="ssh"&&$("canvas").length>3)var t=$("canvas").get(1).toDataURL("image/png").replace("data:image/png;base64,","");else var t=$("canvas").get(0).toDataURL("image/png").replace("data:image/png;base64,","");var r=n.currentUserid+""+Date.now();r=hex_md5(r),filenameBase64=jsBase64.encode(r);var i=x(r);$.post(h).done(function(n){n&&n.status=="error"&&e.flashMessage(n.status,n.message),n&&n.status=="success"&&$.ajax({type:"post",url:a+filenameBase64,headers:{"Content-Type":"application/octet-stream",Authorization:"UpToken "+n.token},data:t}).done(function(t){t.hash&&$.post(p+N(u+r)).done(function(t){var n=T(r,t.delete_url);c.parent(".col-md-3").before(n),l.find(".col-md-3").length>4&&c.find(".capturescreen").hide(),L(),A(),t.status=="error"&&e.flashMessage(t.status,t.message),t.status=="success"&&(d.modal("show"),v.on("click",function(){window.open(i,"_blank")}))}).fail(function(){e.flashMessage("error","保存图片失败，请稍后再试")}).always(function(){f.hide()})}).fail(function(){f.hide(),e.flashMessage("error","上传截图失败，请稍后再试")})}).fail(function(){f.hide(),e.flashMessage("error","系统错误，请稍后再试")})})}function L(){l.find("img").on("click",function(){var e=$(this).attr("src"),t=x(e,!0),n=$(this).attr("deleteUrl");m=$(this),y.attr("deleteUrl",n),b.attr("src",e),w.off("click").on("click",function(){window.open(t,"_blank")})})}function A(){y.on("click",function(){var t=$(this).attr("deleteUrl");E.modal("show"),S.off("click").one("click",function(){f.find("div").html("请稍后..."),f.show();if(n.siteType==1){AWS.config.update({accessKeyId:"AKIAJ5HCUGM7JKTNHXXQ",secretAccessKey:"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"}),AWS.config.region="us-west-1";var r=new AWS.S3({params:{Bucket:"simplelab-upload"}}),i={Bucket:"simplelab-upload",Key:m.attr("src").match(/\w+\.png/g)[0]};r.deleteObject(i,function(n,r){n?(console.error("error: ",n,n.stack),e.flashMessage("error","failed to delete the image, please try again")):$.post(t).done(function(t){if(t&&t.status=="error")e.flashMessage(t.status,t.message);else{m.parents(".col-md-3").remove();var n=c.parent(".col-md-3");l.find(".col-md-3").length<=4&&n.show()}}).fail(function(t){e.flashMessage("error","failed to delete the image, please try again")}).always(function(){f.hide()})})}else $.post(t).done(function(t){if(t&&t.status=="error")e.flashMessage(t.status,t.message);else{m.parents(".col-md-3").remove();var n=c.parent(".col-md-3");l.find(".col-md-3").length<=4&&n.show()}}).fail(function(t){e.flashMessage("error","failed to delete the image, please try again")}).always(function(){f.hide()})})})}var n=$("#jinja-data").data(),r="http://service.weibo.com/share/share.php?",i="%23实验分享%23我在实验楼完成了实验"+n.labName+"”，有实验截图为证，朋友们来一起做IT实验吧，晒截图有机会获得精美礼品~@实验楼官方微博",s="1343713053",o="https://www.shiyanlou.com/",u="https://dn-simplecloud.qbox.me/",a="https://up.qbox.me/putb64/-1/key/",f=$("#loading"),l=$("#labimages"),c=l.find(".capturescreen"),h=n.qiniuTokenUrl,p=n.saveImgUrl+"?imagelink=",d=$("#screenshot-modal"),v=$("#screentshot-share"),m=null,g=$("#showimg"),y=g.find(".deleteCap"),b=g.find("img"),w=g.find(".sharecapture"),E=$("#deleteCap"),S=E.find(".deleteConfirm");n.siteType=="0"?k():C(),L(),A()}),define("course/console/horizontalCtrl",["bootstrap","course/console/connectVm"],function(e,t){function p(){function n(n){if(e){s.width(Math.min($(window).width()-200,n.pageX-t.x+t.w)),o.width(s.outerWidth());var r=[u,a,f];$.each(r,function(e,t){t.width(s.width())}),d()}}function i(t){e&&(e=!e,r.css({top:s.offset().top,left:s.width(),width:20,height:s.height()}),$(document).off("mousemove mouseup"))}var e=!1,t={};$(window).on("resize",function(){h=$(window).width()-s.outerWidth()}),r.css({top:s.offset().top,left:s.width(),height:s.height()}),r.on("mousedown",function(r){e=!e,t={w:s.width(),x:r.pageX},$(this).css({top:0,left:0,width:$(window).width(),height:"100%"}),$(document).on("mousemove",function(e){n(e)}),$(document).on("mouseup",function(e){i(e)})})}function d(){var e=$(window).width()-s.outerWidth();e>h&&(e=h),l.css("width",e),c.css("width",e),t.display.scale(e/n.resolution[0])}var n=$("#jinja-data").data(),r=$("#horizontalctrl"),i=$(".labcontent"),s=$("#document"),o=$("#footertool"),u=$("#note"),a=$("#labimages"),f=$("#question"),l=$(".vmlayer"),c=$(".vmdesktop"),h=$(window).width()-s.outerWidth();p()}),define("course/console/doc",["marked","highlight"],function(e,t){var n=$("#jinja-data").data(),r=$("#mdcontent"),i=$("#preview"),s=$("#showdocimg"),o=$(".doc-catalog"),u=r.val();i.html(e(u)),t.initHighlighting();var a=$(".document-top-info").clone(),f=$(".document-bottom-info").clone();$(".document-top-info, .document-bottom-info").remove(),i.prepend(a),i.append(f);var l=i.find("h2"),c=[];l=Array.prototype.slice.call(l),l=l.map(function(e,t,n){var r=$(e).offset().top;return c.push(r),'<option value="'+$(e).text()+"end"+r+'">'+$(e).text()+"</option>"}),l=l.join(""),o.html(l).on("change",function(){var e=this;$(e).data("title",/(.+)end(\d+)/g.exec($(e).val())[1]),i.animate({scrollTop:0},0).animate({scrollTop:$('h2:contains("'+$(e).data("title")+'")').offset().top-68-$("#toolbar").outerHeight()},200)}),i.scroll(function(){var e=o.offset().top+o.height()*2,t=$(this).scrollTop()+e,n=o.find("option");c.map(function(e,r,i){t>=e&&(c.length-1==r||t<c[r+1])&&o.val($(n[r]).val())})}),i.find("a").attr("target","_blank"),i.find("img").on("click",function(){var e=$(this).attr("src");s.modal("show"),s.find("img").attr("src",e)});if(n.hasNextlab=="finished")if(n.siteType==0){$("<div class='docPreviewMiddle'><h2>您已经完成本课程所有实验</h2></div><hr>").appendTo(i);var h=n.relatedCourses.adv_courses;if(!$.isEmptyObject(h)){$("<h4>你还可以学习以下进阶课程</h4>").appendTo(i);for(p in h)$("<a class='adv-course' href='/courses/"+p+"' target='_blank'>"+h[p]+"<a>").appendTo(i)}}else $("<div class='docPreviewMiddle'><h2>You have finished all labs</h2></div><hr>").appendTo(i);else n.hasNextlab=="updating"?$("<div class='docPreviewMiddle'><h2>课程更新中，敬请期待</h2></div>").appendTo(i):n.hasNextlab=="hasnext"&&(n.siteType==0?$("<div class='docPreviewMiddle'><a class='btn btn-success nextlab' id='nextLab2'  title='下一个实验'>下一个实验</a></div>").appendTo(i):$("<div class='docPreviewMiddle'><a class='btn btn-success nextlab' id='nextLab2'  title='next lab'>next lab</a></div>").appendTo(i))}),define("course/console/labCtrl",["utils","course/console/connectVm"],function(e,t){function a(){i.on("click",function(){return $(this).attr("disabled")||s.modal("show"),$("#stopLabConfirm").one("click",function(){t.guac.onerror=null,r.find(".lab_title").html("正在停止实验..."),r.show(),$.post(n.stopLabUrl).done(function(t){t.status=="success"&&(window.location.href=n.courseUrl),t.status=="error"&&e.flashMessage(t.status,t.message)}).fail(function(){e.flashMessage("error","停止实验失败，请重试")}).always(function(){$(".guac-error").hide(),r.hide()})}),!1})}function f(){$("#nextLab").on("click",function(){o.modal("show"),u.on("click",function(){$.post(n.nextLabUrl).done(function(t){t.status=="success"?window.location.href=t.nexturl:t.status=="error"&&e.flashMessage(t.status,t.message)}).fail(function(){e.flashMessage("error","进入下一个实验失败，请重试")}).always(function(){o.hide()})})})}function l(){$("#nextLab2").on("click",function(){$("#nextLab").click()})}var n=$("#jinja-data").data(),r=$("#loading"),i=$("#stopLab"),s=$("#stopLab-model"),o=$("#nextLab-model"),u=$("#nextLabConfirm");a(),f(),l()}),define("course/console/note",["utils","course/console/connectVm"],function(e,t){function o(){$("#note").delegate(".publish-report","click",function(){var t=this,r=$("#publish-report");return $.get(n.questionForm).done(function(i){if(i.csrf_token){var o=i.csrf_token;$.post(n.noteUrl,{text:s.val()}).done(function(i){i.status=="success"?(r.modal("show"),$(".publish-report-confirm").off("click").on("click",function(){return $.post(n.publishReportUrl,{report_id:n.reportId,csrf_token:o}).done(function(n){r.modal("hide"),n.status=="success"?($("#publish-report-success").modal("show"),$(t).text("取消公开").addClass("unpublish-report").removeClass("publish-report")):e.flashMessage(n.status,n.message)}),!1})):e.flashMessage("error","发布失败，请重试")})}}),!1})}function u(){$("#note").delegate(".unpublish-report","click",function(){var t=this,r=n.unpublishReportUrl;$.post(r).done(function(n){n.status=="success"&&$(t).text("公开").addClass("publish-report").removeClass("unpublish-report"),e.flashMessage(n.status,n.message)})})}var n=$("#jinja-data").data(),r=$("#saveNote"),i=$("#note form"),s=i.find("textarea");s.on("mouseenter",function(){$(this).focus(),t.keyboard.onkeydown=null,t.keyboard.onkeyup=null}).on("mouseleave",function(){t.keyboard.onkeydown=t.keydownEvent,t.keyboard.onkeyup=t.keyupEvent}),r.on("click",function(){var t=s.val();return $.post(n.noteUrl,{text:t}).done(function(t){t&&t.status&&t.status=="success"?e.flashMessage("success","笔记保存成功"):e.flashMessage("error","笔记保存失败，请重试")}).fail(function(){e.flashMessage("error","笔记保存失败，请重试")}),!1}),o(),u()}),define("course/console/noteCtrl",[],function(){function n(e){function u(e){function i(e){r.height=o-e.clientY+"px",t.find("textarea").height(function(){var e=$(this).offset().top,t=$("#labimages").height();if(e>0)return $("#footertool").offset().top-$("#note .btn-group").offset().top-$("#note .btn-group").height()*3-t+15}),t.find(".mkeditor-viewer > div").height(function(){var e=$(this).offset().top,t=$("#labimages").height();if(e>0)return $("#footertool").offset().top-$(this).offset().top-50-t})}$(e).on("mousemove",i),$(e).on("mouseup",function(){e==n&&n.releaseCapture(),$(e).off("mousemove",i),$(e).off("mouseup"),$(n).css("z-index",950)})}var n=e[0],r=n.style,i=$(".topborder",n)||n,s=0,o=0;t.find(".nav-tabs").on("shown.bs.tab",function(e){$("textarea",t).each(function(){var e=$(this).offset().top,t=$("#labimages").height();$(this).height(function(){return $("#footertool").offset().top-$("#note .btn-group").offset().top-$("#note .btn-group").height()*3-t+15})}),$(".mkeditor-viewer > div",t).height(function(){var e=$("#labimages").height();return $("#footertool").offset().top-$(this).offset().top-50-e})}),i.on("mousedown",function(e){s=e.clientX-n.offsetWidth,o=e.clientY+$(n).height()+20,$(n).css("z-index",1e3),n.setCapture?(n.setCapture(),u(n)):u($(document).add(n)),e.preventDefault()})}var e=$("#jinja-data").data(),t=$("#note");n(t)}),define("course/console/leftTime",["utils"],function(e){function h(){var n=parseInt(l/60),h=l%60;if(l<0)return window.clearInterval(c),!1;n=n<10?"0"+n:""+n,h=h<10?"0"+h:""+h,r.text(n[0]),i.text(n[1]),s.text(h[0]),o.text(h[1]);if(n==0&&h==0)return window.clearInterval(c),!1;l==5*60&&(u.modal("show").off("click"),u.find(".modal-backdrop.fade.in").off("click"),a.on("click",function(){$.post(f,{lab_id:t.labid}).done(function(t){u.modal("hide"),e.flashMessage(t.status,t.message),t.status=="success"&&(l+=3600)})}),u.find(".confirm").on("click",function(){u.modal("hide")})),l--}var t=$("#jinja-data").data(),n=$(".lefttime"),r=n.find(".minutes-ten"),i=n.find(".minutes-one"),s=n.find(".seconds-ten"),o=n.find(".seconds-one"),u=$("#increase-time"),a=u.find(".addtime"),f=t.increaseTimeUrl,l=parseInt(t.leftTime),c=window.setInterval(h,1e3);l<0&&(window.clearInterval(c),l=0)}),define("course/console/fullScreen",["utils","course/console/fixLayout"],function(e,t){var n=$("#toolbar .fullscreen");n.on("click",function(){!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement?document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.flashMessage("error","你的浏览器不支持此全屏API，请使用新版本的Chrome或者Firefox浏览器"):document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}),$(document).on("mozfullscreenchange webkitfullscreenchange MSFullscreenChange fullscreenchange",function(){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement)n.css("background-position","-154px -26px"),t.fixLayout();else{var e=screen.width,r=screen.height;t.fixLayout(e,r),n.css("background-position","-218px -26px")}})}),define("course/console/toolCtrl",["course/console/connectVm","question/askQuestion"],function(e){var t=$("#jinja-data").data(),n=$("#note"),r=$("#question"),i=$("#askquestion"),s=$("#footertool"),o=[n,r];$("#labimages .row").css({"max-width":$("#labimages").width()}),s.on("click",".btn",function(){function c(){$.get(t.courseQuestionUrl).done(function(e){var e=e.data,t="";for(var n=0;n<e.total;n++)t+='<div class="question"><a href="'+e.items[n].url+'" target="_blank">'+e.items[n].title+"</a></div>";var i='<div class="question">还没有与此课程相关的问题</div>';r.find(".question-list").html(t||i)}).fail(function(){utils.flashMessage("error","获取实验相关问题失败，请刷新页面后重试")})}var u=$(this).attr("href"),a=u.replace(/^\#/,""),f=$(this).hasClass("active");if(f)$(this).removeClass("active"),$(u).animate({width:r.outerWidth(),height:0,bottom:21});else{o.map(function(e,t,n){a!=$(e).attr("id")&&$(e).animate({width:r.outerWidth(),height:0,bottom:21})});var l=0;switch(u){case"#note":n.css("overflow","visible"),l=$("#document").height()*.7;break;case"#question":n.css("overflow","hidden"),l=$("#document").height()+9,c(),i.on("show.bs.modal",function(){e.keyboard.onkeydown=null,e.keyboard.onkeyup=null}).on("hide.bs.modal",function(){e.keyboard.onkeydown=e.keydownEvent,e.keyboard.onkeyup=e.keyupEvent}).on("hide.bs.modal",function(){c()})}$(u).animate({height:l,bottom:41},function(){u=="#note"&&$("textarea",n).height(function(){var e=$(this).offset().top,t=$("#labimages").height();return $("#footertool").offset().top-$("#note .btn-group").offset().top-$("#note .btn-group").height()*3-t+15})}),s.find(".btn").removeClass("active"),$(this).addClass("active")}})}),define("course/console",["course/console/fixLayout","question/askQuestion"],function(e){var t=$("#jinja-data").data();require(["course/console/connectVm"],function(){require(["course/console/shareVm"]),require(["course/console/codeDownload"]),require(["course/console/studyTime"]),require(["course/console/capture"]),require(["course/console/horizontalCtrl"])}),require(["course/console/doc"],function(){require(["course/console/labCtrl"])}),require(["course/console/note"],function(){require(["course/console/noteCtrl"])}),require(["course/console/leftTime"]),require(["course/console/fullScreen"]),require(["course/console/toolCtrl"]);var n=$("#preview"),r=$(".docfontsize"),i=$(".vmlayer");$(window).on("resize",function(){e.fixLayout()}),r.change(function(){$("> p",n).css("font-size",$(this).val()+"px")}),i.hover(function(){$("#text_ifr").blur(),$(".vmdesktop").focus(),$(this).css({"z-index":-100})}),$(".labcontent").hover(function(){i.css({"z-index":900})}),$("#toolbar a").tooltip(),$(".singledoc").on("click",function(){var e=$(this).attr("href");return window.open(e,"_blank","scrollbars=yes, width=400, height=600"),!1}),t.userLabsCount<=1&&$("#user-guide").modal("show")});